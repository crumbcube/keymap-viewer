/*! For license information please see main.cb3f0b4d.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:e,key:u,ref:c,props:a,_owner:l.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=m.prototype;var x=b.prototype=new v;x.constructor=b,g(x,m.prototype),x.isPureReactComponent=!0;var C=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},w={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var o,a={},i=null,l=null;if(null!=t)for(o in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,o)&&!w.hasOwnProperty(o)&&(a[o]=t[o]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(o in s=e.defaultProps)void 0===a[o]&&(a[o]=s[o]);return{$$typeof:n,type:e,key:i,ref:l,props:a,_owner:S.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,o,a,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var s=!1;if(null===e)s=!0;else switch(l){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return i=i(s=e),e=""===a?"."+E(s,0):a,C(i)?(o="",null!=e&&(o=e.replace(T,"$&/")+"/"),N(i,t,o,"",(function(e){return e}))):null!=i&&(I(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,o+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(T,"$&/")+"/")+e)),t.push(i)),1;if(s=0,a=""===a?".":a+":",C(e))for(var u=0;u<e.length;u++){var c=a+E(l=e[u],u);s+=N(l,t,o,c,i)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(l=e.next()).done;)s+=N(l=l.value,t,o,c=a+E(l,u++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function P(e,t,n){if(null==e)return e;var r=[],o=0;return N(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},K={transition:null},M={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:K,ReactCurrentOwner:S};function F(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=o,t.Profiler=i,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=F,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=g({},e.props),a=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)k.call(t,u)&&!w.hasOwnProperty(u)&&(o[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){s=Array(u);for(var c=0;c<u;c++)s[c]=arguments[c+2];o.children=s}return{$$typeof:n,type:e.type,key:a,ref:i,props:o,_owner:l}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=K.transition;K.transition={};try{e()}finally{K.transition=t}},t.unstable_act=F,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var l=2*(r+1)-1,s=e[l],u=l+1,c=e[u];if(0>a(s,n))u<o&&0>a(c,s)?(e[r]=c,e[u]=n,r=u):(e[r]=s,e[l]=n,r=l);else{if(!(u<o&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,s=l.now();t.unstable_now=function(){return l.now()-s}}var u=[],c=[],d=1,h=null,f=3,p=!1,g=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)o(c);else{if(!(t.startTime<=e))break;o(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function C(e){if(y=!1,x(e),!g)if(null!==r(u))g=!0,K(k);else{var t=r(c);null!==t&&M(C,t.startTime-e)}}function k(e,n){g=!1,y&&(y=!1,v(I),I=-1),p=!0;var a=f;try{for(x(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!N());){var i=h.callback;if("function"===typeof i){h.callback=null,f=h.priorityLevel;var l=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?h.callback=l:h===r(u)&&o(u),x(n)}else o(u);h=r(u)}if(null!==h)var s=!0;else{var d=r(c);null!==d&&M(C,d.startTime-n),s=!1}return s}finally{h=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,w=!1,_=null,I=-1,T=5,E=-1;function N(){return!(t.unstable_now()-E<T)}function P(){if(null!==_){var e=t.unstable_now();E=e;var n=!0;try{n=_(!0,e)}finally{n?S():(w=!1,_=null)}}else w=!1}if("function"===typeof b)S=function(){b(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,L=A.port2;A.port1.onmessage=P,S=function(){L.postMessage(null)}}else S=function(){m(P,0)};function K(e){_=e,w||(w=!0,S())}function M(e,n){I=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,K(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>i?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(y?(v(I),I=-1):y=!0,M(C,a-i))):(e.sortIndex=l,n(u,e),g||p||(g=!0,K(k))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),o=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function s(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,o,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var o=y.hasOwnProperty(t)?y[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,v);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,v);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,v);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var K=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var R,D=Object.assign;function O(e){if(void 0===R)try{throw Error()}catch(Yu){var t=Yu.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var j=!1;function H(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Zu){var r=Zu}Reflect.construct(e,[],t)}else{try{t.call()}catch(Zu){r=Zu}e.call(t.prototype)}else{try{throw Error()}catch(Zu){r=Zu}e()}}catch(Zu){if(Zu&&r&&"string"===typeof Zu.stack){for(var o=Zu.stack.split("\n"),a=r.stack.split("\n"),i=o.length-1,l=a.length-1;1<=i&&0<=l&&o[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==a[l]){if(1!==i||1!==l)do{if(i--,0>--l||o[i]!==a[l]){var s="\n"+o[i].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=i&&0<=l);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?O(e):""}function V(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 1:return e=H(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case _:return"Profiler";case w:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return B(e(t))}catch(Yu){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=z(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(sc){return e.body}}function q(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(he).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ye=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function me(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,ke=null,Se=null;function we(e){if(e=bo(e)){if("function"!==typeof Ce)throw Error(a(280));var t=e.stateNode;t&&(t=Co(t),Ce(e.stateNode,e.type,t))}}function _e(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ie(){if(ke){var e=ke,t=Se;if(Se=ke=null,we(e),t)for(e=0;e<t.length;e++)we(t[e])}}function Te(e,t){return e(t)}function Ee(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Te(e,t,n)}finally{Ne=!1,(null!==ke||null!==Se)&&(Ee(),Ie())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=Co(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Le=!1;if(c)try{var Ke={};Object.defineProperty(Ke,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Ke,Ke),window.removeEventListener("test",Ke,Ke)}catch(Wu){Le=!1}function Me(e,t,n,r,o,a,i,l,s){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(tc){this.onError(tc)}}var Fe=!1,Re=null,De=!1,Oe=null,je={onError:function(e){Fe=!0,Re=e}};function He(e,t,n,r,o,a,i,l,s){Fe=!1,Re=null,Me.apply(je,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ue(e){if(Ve(e)!==e)throw Error(a(188))}function Ge(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Ue(o),e;if(i===r)return Ue(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var l=!1,s=o.child;s;){if(s===n){l=!0,n=o,r=i;break}if(s===r){l=!0,r=o,n=i;break}s=s.sibling}if(!l){for(s=i.child;s;){if(s===n){l=!0,n=i,r=o;break}if(s===r){l=!0,r=i,n=o;break}s=s.sibling}if(!l)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e),null!==e?ze(e):null}function ze(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=ze(e);if(null!==t)return t;e=e.sibling}return null}var We=o.unstable_scheduleCallback,Ye=o.unstable_cancelCallback,$e=o.unstable_shouldYield,qe=o.unstable_requestPaint,Qe=o.unstable_now,Xe=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,Je=o.unstable_UserBlockingPriority,et=o.unstable_NormalPriority,tt=o.unstable_LowPriority,nt=o.unstable_IdlePriority,rt=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(it(e)/lt|0)|0},it=Math.log,lt=Math.LN2;var st=64,ut=4194304;function ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var l=i&~o;0!==l?r=ct(l):0!==(a&=i)&&(r=ct(a))}else 0!==(i=n&~o)?r=ct(i):0!==a&&(r=ct(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(a=t&-t)||16===o&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=st;return 0===(4194240&(st<<=1))&&(st=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function mt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,Ct,kt,St,wt,_t=!1,It=[],Tt=null,Et=null,Nt=null,Pt=new Map,At=new Map,Lt=[],Kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Ft(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&Ct(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Rt(e){var t=vo(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void wt(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bo(n))&&Ct(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ot(e,t,n){Dt(e)&&n.delete(t)}function jt(){_t=!1,null!==Tt&&Dt(Tt)&&(Tt=null),null!==Et&&Dt(Et)&&(Et=null),null!==Nt&&Dt(Nt)&&(Nt=null),Pt.forEach(Ot),At.forEach(Ot)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,jt)))}function Vt(e){function t(t){return Ht(t,e)}if(0<It.length){Ht(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Ht(Tt,e),null!==Et&&Ht(Et,e),null!==Nt&&Ht(Nt,e),Pt.forEach(t),At.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Rt(n),null===n.blockedOn&&Lt.shift()}var Bt=x.ReactCurrentBatchConfig,Ut=!0;function Gt(e,t,n,r){var o=vt,a=Bt.transition;Bt.transition=null;try{vt=1,Wt(e,t,n,r)}finally{vt=o,Bt.transition=a}}function zt(e,t,n,r){var o=vt,a=Bt.transition;Bt.transition=null;try{vt=4,Wt(e,t,n,r)}finally{vt=o,Bt.transition=a}}function Wt(e,t,n,r){if(Ut){var o=$t(e,t,n,r);if(null===o)Ur(e,t,r,Yt,n),Mt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Tt=Ft(Tt,e,t,n,r,o),!0;case"dragenter":return Et=Ft(Et,e,t,n,r,o),!0;case"mouseover":return Nt=Ft(Nt,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return Pt.set(a,Ft(Pt.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,At.set(a,Ft(At.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Kt.indexOf(e)){for(;null!==o;){var a=bo(o);if(null!==a&&xt(a),null===(a=$t(e,t,n,r))&&Ur(e,t,r,Yt,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else Ur(e,t,r,null,n)}}var Yt=null;function $t(e,t,n,r){if(Yt=null,null!==(e=vo(e=xe(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case Je:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,Zt=null;function Jt(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,o="value"in Qt?Qt.value:Qt.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var on,an,ln,sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(sn),cn=D({},sn,{view:0,detail:0}),dn=rn(cn),hn=D({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=rn(hn),pn=rn(D({},hn,{dataTransfer:0})),gn=rn(D({},cn,{relatedTarget:0})),yn=rn(D({},sn,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=D({},sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=rn(mn),bn=rn(D({},sn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function wn(){return Sn}var _n=D({},cn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=rn(_n),Tn=rn(D({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=rn(D({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn})),Nn=rn(D({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=D({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=rn(Pn),Ln=[9,13,27,32],Kn=c&&"CompositionEvent"in window,Mn=null;c&&"documentMode"in document&&(Mn=document.documentMode);var Fn=c&&"TextEvent"in window&&!Mn,Rn=c&&(!Kn||Mn&&8<Mn&&11>=Mn),Dn=String.fromCharCode(32),On=!1;function jn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Gn(e,t,n,r){_e(r),0<(t=zr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zn=null,Wn=null;function Yn(e){Dr(e,0)}function $n(e){if(Y(xo(e)))return e}function qn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Xn;if(c){var Zn="oninput"in document;if(!Zn){var Jn=document.createElement("div");Jn.setAttribute("oninput","return;"),Zn="function"===typeof Jn.oninput}Xn=Zn}else Xn=!1;Qn=Xn&&(!document.documentMode||9<document.documentMode)}function er(){zn&&(zn.detachEvent("onpropertychange",tr),Wn=zn=null)}function tr(e){if("value"===e.propertyName&&$n(Wn)){var t=[];Gn(t,Wn,e,xe(e)),Pe(Yn,t)}}function nr(e,t,n){"focusin"===e?(er(),Wn=n,(zn=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Wn)}function or(e,t){if("click"===e)return $n(t)}function ar(e,t){if("input"===e||"change"===e)return $n(t)}var ir="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ir(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!ir(e[o],t[o]))return!1}return!0}function sr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=sr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sr(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(Xu){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=void 0===r.end?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=ur(n,a);var i=ur(n,r);o&&i&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,mr=null,vr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==gr||gr!==$(r)||("selectionStart"in(r=gr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},mr&&lr(mr,r)||(mr=r,0<(r=zr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},kr={},Sr={};function wr(e){if(kr[e])return kr[e];if(!Cr[e])return e;var t,n=Cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return kr[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);var _r=wr("animationend"),Ir=wr("animationiteration"),Tr=wr("animationstart"),Er=wr("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Nr.set(e,t),s(t,[e])}for(var Lr=0;Lr<Pr.length;Lr++){var Kr=Pr[Lr];Ar(Kr.toLowerCase(),"on"+(Kr[0].toUpperCase()+Kr.slice(1)))}Ar(_r,"onAnimationEnd"),Ar(Ir,"onAnimationIteration"),Ar(Tr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Er,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Rr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,l,s,u){if(He.apply(this,arguments),Fe){if(!Fe)throw Error(a(198));var c=Re;Fe=!1,Re=null,De||(De=!0,Oe=c)}}(r,t,void 0,e),e.currentTarget=null}function Dr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],s=l.instance,u=l.currentTarget;if(l=l.listener,s!==a&&o.isPropagationStopped())break e;Rr(o,l,u),a=s}else for(i=0;i<r.length;i++){if(s=(l=r[i]).instance,u=l.currentTarget,l=l.listener,s!==a&&o.isPropagationStopped())break e;Rr(o,l,u),a=s}}}if(De)throw e=Oe,De=!1,Oe=null,e}function Or(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Hr]){e[Hr]=!0,i.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,jr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(qt(t)){case 1:var o=Gt;break;case 4:o=zt;break;default:o=Wt}n=o.bind(null,t,n,e),o=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Ur(e,t,n,r,o){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===o||8===l.nodeType&&l.parentNode===o)break;if(4===i)for(i=r.return;null!==i;){var s=i.tag;if((3===s||4===s)&&((s=i.stateNode.containerInfo)===o||8===s.nodeType&&s.parentNode===o))return;i=i.return}for(;null!==l;){if(null===(i=vo(l)))return;if(5===(s=i.tag)||6===s){r=a=i;continue e}l=l.parentNode}}r=r.return}Pe((function(){var r=a,o=xe(n),i=[];e:{var l=Nr.get(e);if(void 0!==l){var s=un,u=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":s=In;break;case"focusin":u="focus",s=gn;break;case"focusout":u="blur",s=gn;break;case"beforeblur":case"afterblur":s=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=En;break;case _r:case Ir:case Tr:s=yn;break;case Er:s=Nn;break;case"scroll":s=dn;break;case"wheel":s=An;break;case"copy":case"cut":case"paste":s=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Tn}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==l?l+"Capture":null:l;c=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Ae(p,h))&&c.push(Gr(p,g,f)))),d)break;p=p.return}0<c.length&&(l=new s(l,u,null,n,o),i.push({event:l,listeners:c}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!vo(u)&&!u[po])&&(s||l)&&(l=o.window===o?o:(l=o.ownerDocument)?l.defaultView||l.parentWindow:window,s?(s=r,null!==(u=(u=n.relatedTarget||n.toElement)?vo(u):null)&&(u!==(d=Ve(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(s=null,u=r),s!==u)){if(c=fn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==s?l:xo(s),f=null==u?l:xo(u),(l=new c(g,p+"leave",s,n,o)).target=d,l.relatedTarget=f,g=null,vo(o)===r&&((c=new c(h,p+"enter",u,n,o)).target=f,c.relatedTarget=d,g=c),d=g,s&&u)e:{for(h=u,p=0,f=c=s;f;f=Wr(f))p++;for(f=0,g=h;g;g=Wr(g))f++;for(;0<p-f;)c=Wr(c),p--;for(;0<f-p;)h=Wr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Wr(c),h=Wr(h)}c=null}else c=null;null!==s&&Yr(i,l,s,c,!1),null!==u&&null!==d&&Yr(i,d,u,c,!0)}if("select"===(s=(l=r?xo(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===s&&"file"===l.type)var y=qn;else if(Un(l))if(Qn)y=ar;else{y=rr;var m=nr}else(s=l.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(y=or);switch(y&&(y=y(e,r))?Gn(i,y,n,o):(m&&m(e,l,r),"focusout"===e&&(m=l._wrapperState)&&m.controlled&&"number"===l.type&&ee(l,"number",l.value)),m=r?xo(r):window,e){case"focusin":(Un(m)||"true"===m.contentEditable)&&(gr=m,yr=r,mr=null);break;case"focusout":mr=yr=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,br(i,n,o);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(i,n,o)}var v;if(Kn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Rn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(v=Jt()):(Xt="value"in(Qt=o)?Qt.value:Qt.textContent,Vn=!0)),0<(m=zr(r,b)).length&&(b=new bn(b,e,null,n,o),i.push({event:b,listeners:m}),v?b.data=v:null!==(v=Hn(n))&&(b.data=v))),(v=Fn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(On=!0,Dn);case"textInput":return(e=t.data)===Dn&&On?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Kn&&jn(e,t)?(e=Jt(),Zt=Xt=Qt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=zr(r,"onBeforeInput")).length&&(o=new bn("onBeforeInput","beforeinput",null,n,o),i.push({event:o,listeners:r}),o.data=v))}Dr(i,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=Ae(e,n))&&r.unshift(Gr(e,a,o)),null!=(a=Ae(e,t))&&r.push(Gr(e,a,o))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var l=n,s=l.alternate,u=l.stateNode;if(null!==s&&s===r)break;5===l.tag&&null!==u&&(l=u,o?null!=(s=Ae(n,a))&&i.unshift(Gr(n,s,l)):o||null!=(s=Ae(n,a))&&i.push(Gr(n,s,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var $r=/\r\n?/g,qr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(qr,"")}function Xr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function Zr(){}var Jr=null,eo=null;function to(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var no="function"===typeof setTimeout?setTimeout:void 0,ro="function"===typeof clearTimeout?clearTimeout:void 0,oo="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oo?function(e){return oo.resolve(null).then(e).catch(io)}:no;function io(e){setTimeout((function(){throw e}))}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Vt(t)}function so(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var co=Math.random().toString(36).slice(2),ho="__reactFiber$"+co,fo="__reactProps$"+co,po="__reactContainer$"+co,go="__reactEvents$"+co,yo="__reactListeners$"+co,mo="__reactHandles$"+co;function vo(e){var t=e[ho];if(t)return t;for(var n=e.parentNode;n;){if(t=n[po]||n[ho]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[ho])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function bo(e){return!(e=e[ho]||e[po])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Co(e){return e[fo]||null}var ko=[],So=-1;function wo(e){return{current:e}}function _o(e){0>So||(e.current=ko[So],ko[So]=null,So--)}function Io(e,t){So++,ko[So]=e.current,e.current=t}var To={},Eo=wo(To),No=wo(!1),Po=To;function Ao(e,t){var n=e.type.contextTypes;if(!n)return To;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Lo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ko(){_o(No),_o(Eo)}function Mo(e,t,n){if(Eo.current!==To)throw Error(a(168));Io(Eo,t),Io(No,n)}function Fo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,U(e)||"Unknown",o));return D({},n,r)}function Ro(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||To,Po=Eo.current,Io(Eo,e),Io(No,No.current),!0}function Do(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Fo(e,t,Po),r.__reactInternalMemoizedMergedChildContext=e,_o(No),_o(Eo),Io(Eo,e)):_o(No),Io(No,n)}var Oo=null,jo=!1,Ho=!1;function Vo(e){null===Oo?Oo=[e]:Oo.push(e)}function Bo(){if(!Ho&&null!==Oo){Ho=!0;var e=0,t=vt;try{var n=Oo;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Oo=null,jo=!1}catch(o){throw null!==Oo&&(Oo=Oo.slice(e+1)),We(Ze,Bo),o}finally{vt=t,Ho=!1}}return null}var Uo=[],Go=0,zo=null,Wo=0,Yo=[],$o=0,qo=null,Qo=1,Xo="";function Zo(e,t){Uo[Go++]=Wo,Uo[Go++]=zo,zo=e,Wo=t}function Jo(e,t,n){Yo[$o++]=Qo,Yo[$o++]=Xo,Yo[$o++]=qo,qo=e;var r=Qo;e=Xo;var o=32-at(r)-1;r&=~(1<<o),n+=1;var a=32-at(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Qo=1<<32-at(t)+o|n<<o|r,Xo=a+e}else Qo=1<<a|n<<o|r,Xo=e}function ea(e){null!==e.return&&(Zo(e,1),Jo(e,1,0))}function ta(e){for(;e===zo;)zo=Uo[--Go],Uo[Go]=null,Wo=Uo[--Go],Uo[Go]=null;for(;e===qo;)qo=Yo[--$o],Yo[$o]=null,Xo=Yo[--$o],Yo[$o]=null,Qo=Yo[--$o],Yo[$o]=null}var na=null,ra=null,oa=!1,aa=null;function ia(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function la(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=so(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==qo?{id:Qo,overflow:Xo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(oa){var t=ra;if(t){var n=t;if(!la(e,t)){if(sa(e))throw Error(a(418));t=so(n.nextSibling);var r=na;t&&la(e,t)?ia(r,n):(e.flags=-4097&e.flags|2,oa=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,oa=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!oa)return ca(e),oa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!to(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)ia(e,t),t=so(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=so(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?so(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=so(e.nextSibling)}function fa(){ra=na=null,oa=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var ga=x.ReactCurrentBatchConfig;function ya(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var o=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=o.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ma(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Lu(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ru(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===L&&va(a)===t.type)?((r=o(t,n.props)).ref=ya(e,t,n),r.return=e,r):((r=Ku(n.type,n.key,n.props,null,e.mode,r)).ref=ya(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Du(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Mu(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ru(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case C:return(n=Ku(t.type,t.key,t.props,null,e.mode,n)).ref=ya(e,null,t),n.return=e,n;case k:return(t=Du(t,e.mode,n)).return=e,t;case L:return h(e,(0,t._init)(t._payload),n)}if(te(t)||F(t))return(t=Mu(t,e.mode,n,null)).return=e,t;ma(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case C:return n.key===o?u(e,t,n,r):null;case k:return n.key===o?c(e,t,n,r):null;case L:return f(e,t,(o=n._init)(n._payload),r)}if(te(n)||F(n))return null!==o?null:d(e,t,n,r,null);ma(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case C:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case L:return p(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||F(r))return d(t,e=e.get(n)||null,r,o,null);ma(t,r)}return null}function g(o,a,l,s){for(var u=null,c=null,d=a,g=a=0,y=null;null!==d&&g<l.length;g++){d.index>g?(y=d,d=null):y=d.sibling;var m=f(o,d,l[g],s);if(null===m){null===d&&(d=y);break}e&&d&&null===m.alternate&&t(o,d),a=i(m,a,g),null===c?u=m:c.sibling=m,c=m,d=y}if(g===l.length)return n(o,d),oa&&Zo(o,g),u;if(null===d){for(;g<l.length;g++)null!==(d=h(o,l[g],s))&&(a=i(d,a,g),null===c?u=d:c.sibling=d,c=d);return oa&&Zo(o,g),u}for(d=r(o,d);g<l.length;g++)null!==(y=p(d,o,g,l[g],s))&&(e&&null!==y.alternate&&d.delete(null===y.key?g:y.key),a=i(y,a,g),null===c?u=y:c.sibling=y,c=y);return e&&d.forEach((function(e){return t(o,e)})),oa&&Zo(o,g),u}function y(o,l,s,u){var c=F(s);if("function"!==typeof c)throw Error(a(150));if(null==(s=c.call(s)))throw Error(a(151));for(var d=c=null,g=l,y=l=0,m=null,v=s.next();null!==g&&!v.done;y++,v=s.next()){g.index>y?(m=g,g=null):m=g.sibling;var b=f(o,g,v.value,u);if(null===b){null===g&&(g=m);break}e&&g&&null===b.alternate&&t(o,g),l=i(b,l,y),null===d?c=b:d.sibling=b,d=b,g=m}if(v.done)return n(o,g),oa&&Zo(o,y),c;if(null===g){for(;!v.done;y++,v=s.next())null!==(v=h(o,v.value,u))&&(l=i(v,l,y),null===d?c=v:d.sibling=v,d=v);return oa&&Zo(o,y),c}for(g=r(o,g);!v.done;y++,v=s.next())null!==(v=p(g,o,y,v.value,u))&&(e&&null!==v.alternate&&g.delete(null===v.key?y:v.key),l=i(v,l,y),null===d?c=v:d.sibling=v,d=v);return e&&g.forEach((function(e){return t(o,e)})),oa&&Zo(o,y),c}return function e(r,a,i,s){if("object"===typeof i&&null!==i&&i.type===S&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case C:e:{for(var u=i.key,c=a;null!==c;){if(c.key===u){if((u=i.type)===S){if(7===c.tag){n(r,c.sibling),(a=o(c,i.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===L&&va(u)===c.type){n(r,c.sibling),(a=o(c,i.props)).ref=ya(r,c,i),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}i.type===S?((a=Mu(i.props.children,r.mode,s,i.key)).return=r,r=a):((s=Ku(i.type,i.key,i.props,null,r.mode,s)).ref=ya(r,a,i),s.return=r,r=s)}return l(r);case k:e:{for(c=i.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(r,a.sibling),(a=o(a,i.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Du(i,r.mode,s)).return=r,r=a}return l(r);case L:return e(r,a,(c=i._init)(i._payload),s)}if(te(i))return g(r,a,i,s);if(F(i))return y(r,a,i,s);ma(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(n(r,a.sibling),(a=o(a,i)).return=r,r=a):(n(r,a),(a=Ru(i,r.mode,s)).return=r,r=a),l(r)):n(r,a)}}var xa=ba(!0),Ca=ba(!1),ka=wo(null),Sa=null,wa=null,_a=null;function Ia(){_a=wa=Sa=null}function Ta(e){var t=ka.current;_o(ka),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Na(e,t){Sa=e,_a=wa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vl=!0),e.firstContext=null)}function Pa(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===wa){if(null===Sa)throw Error(a(308));wa=e,Sa.dependencies={lanes:0,firstContext:e}}else wa=wa.next=e;return t}var Aa=null;function La(e){null===Aa?Aa=[e]:Aa.push(e)}function Ka(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,La(t)):(n.next=o.next,o.next=n),t.interleaved=n,Ma(e,r)}function Ma(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Fa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ja(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ts)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Ma(e,n)}return null===(o=r.interleaved)?(t.next=t,La(r)):(t.next=o.next,o.next=t),r.interleaved=t,Ma(e,n)}function Ha(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}function Va(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?o=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ba(e,t,n,r){var o=e.updateQueue;Fa=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var s=l,u=s.next;s.next=null,null===i?a=u:i.next=u,i=s;var c=e.alternate;null!==c&&((l=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===l?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=s))}if(null!==a){var d=o.baseState;for(i=0,c=u=s=null,l=a;;){var h=l.lane,f=l.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,g=l;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=D({},d,h);break e;case 2:Fa=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[l]:h.push(l))}else f={eventTime:f,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===c?(u=c=f,s=d):c=c.next=f,i|=h;if(null===(l=l.next)){if(null===(l=o.shared.pending))break;l=(h=l).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===c&&(s=d),o.baseState=s,o.firstBaseUpdate=u,o.lastBaseUpdate=c,null!==(t=o.shared.interleaved)){o=t;do{i|=o.lane,o=o.next}while(o!==t)}else null===a&&(o.shared.lanes=0);Fs|=i,e.lanes=i,e.memoizedState=d}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(a(191,o));o.call(r)}}}var Ga={},za=wo(Ga),Wa=wo(Ga),Ya=wo(Ga);function $a(e){if(e===Ga)throw Error(a(174));return e}function qa(e,t){switch(Io(Ya,t),Io(Wa,e),Io(za,Ga),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_o(za),Io(za,t)}function Qa(){_o(za),_o(Wa),_o(Ya)}function Xa(e){$a(Ya.current);var t=$a(za.current),n=se(t,e.type);t!==n&&(Io(Wa,e),Io(za,n))}function Za(e){Wa.current===e&&(_o(za),_o(Wa))}var Ja=wo(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=x.ReactCurrentDispatcher,oi=x.ReactCurrentBatchConfig,ai=0,ii=null,li=null,si=null,ui=!1,ci=!1,di=0,hi=0;function fi(){throw Error(a(321))}function pi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ir(e[n],t[n]))return!1;return!0}function gi(e,t,n,r,o,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Zi:Ji,e=n(r,o),ci){i=0;do{if(ci=!1,di=0,25<=i)throw Error(a(301));i+=1,si=li=null,t.updateQueue=null,ri.current=el,e=n(r,o)}while(ci)}if(ri.current=Xi,t=null!==li&&null!==li.next,ai=0,si=li=ii=null,ui=!1,t)throw Error(a(300));return e}function yi(){var e=0!==di;return di=0,e}function mi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===si?ii.memoizedState=si=e:si=si.next=e,si}function vi(){if(null===li){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===si?ii.memoizedState:si.next;if(null!==t)si=t,li=e;else{if(null===e)throw Error(a(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===si?ii.memoizedState=si=e:si=si.next=e}return si}function bi(e,t){return"function"===typeof t?t(e):t}function xi(e){var t=vi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=li,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var l=o.next;o.next=i.next,i.next=l}r.baseQueue=o=i,n.pending=null}if(null!==o){i=o.next,r=r.baseState;var s=l=null,u=null,c=i;do{var d=c.lane;if((ai&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(s=u=h,l=r):u=u.next=h,ii.lanes|=d,Fs|=d}c=c.next}while(null!==c&&c!==i);null===u?l=r:u.next=s,ir(r,t.memoizedState)||(vl=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{i=o.lane,ii.lanes|=i,Fs|=i,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ci(e){var t=vi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var l=o=o.next;do{i=e(i,l.action),l=l.next}while(l!==o);ir(i,t.memoizedState)||(vl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ki(){}function Si(e,t){var n=ii,r=vi(),o=t(),i=!ir(r.memoizedState,o);if(i&&(r.memoizedState=o,vl=!0),r=r.queue,Fi(Ii.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==si&&1&si.memoizedState.tag){if(n.flags|=2048,Pi(9,_i.bind(null,n,r,o,t),void 0,null),null===Es)throw Error(a(349));0!==(30&ai)||wi(n,t,o)}return o}function wi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _i(e,t,n,r){t.value=n,t.getSnapshot=r,Ti(t)&&Ei(e)}function Ii(e,t,n){return n((function(){Ti(t)&&Ei(e)}))}function Ti(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ir(e,n)}catch(Xu){return!0}}function Ei(e){var t=Ma(e,1);null!==t&&tu(t,e,1,-1)}function Ni(e){var t=mi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Yi.bind(null,ii,e),[t.memoizedState,e]}function Pi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ai(){return vi().memoizedState}function Li(e,t,n,r){var o=mi();ii.flags|=e,o.memoizedState=Pi(1|t,n,void 0,void 0===r?null:r)}function Ki(e,t,n,r){var o=vi();r=void 0===r?null:r;var a=void 0;if(null!==li){var i=li.memoizedState;if(a=i.destroy,null!==r&&pi(r,i.deps))return void(o.memoizedState=Pi(t,n,a,r))}ii.flags|=e,o.memoizedState=Pi(1|t,n,a,r)}function Mi(e,t){return Li(8390656,8,e,t)}function Fi(e,t){return Ki(2048,8,e,t)}function Ri(e,t){return Ki(4,2,e,t)}function Di(e,t){return Ki(4,4,e,t)}function Oi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ji(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ki(4,4,Oi.bind(null,t,e),n)}function Hi(){}function Vi(e,t){var n=vi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Bi(e,t){var n=vi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ui(e,t,n){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,vl=!0),e.memoizedState=n):(ir(n,t)||(n=pt(),ii.lanes|=n,Fs|=n,e.baseState=!0),t)}function Gi(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=oi.transition;oi.transition={};try{e(!1),t()}finally{vt=n,oi.transition=r}}function zi(){return vi().memoizedState}function Wi(e,t,n){var r=eu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$i(e))qi(t,n);else if(null!==(n=Ka(e,t,n,r))){tu(n,e,r,Js()),Qi(n,t,r)}}function Yi(e,t,n){var r=eu(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($i(e))qi(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=a(i,n);if(o.hasEagerState=!0,o.eagerState=l,ir(l,i)){var s=t.interleaved;return null===s?(o.next=o,La(t)):(o.next=s.next,s.next=o),void(t.interleaved=o)}}catch(Zu){}null!==(n=Ka(e,t,o,r))&&(tu(n,e,r,o=Js()),Qi(n,t,r))}}function $i(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function qi(e,t){ci=ui=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}var Xi={readContext:Pa,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},Zi={readContext:Pa,useCallback:function(e,t){return mi().memoizedState=[e,void 0===t?null:t],e},useContext:Pa,useEffect:Mi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Li(4194308,4,Oi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Li(4194308,4,e,t)},useInsertionEffect:function(e,t){return Li(4,2,e,t)},useMemo:function(e,t){var n=mi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=mi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wi.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},mi().memoizedState=e},useState:Ni,useDebugValue:Hi,useDeferredValue:function(e){return mi().memoizedState=e},useTransition:function(){var e=Ni(!1),t=e[0];return e=Gi.bind(null,e[1]),mi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ii,o=mi();if(oa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Es)throw Error(a(349));0!==(30&ai)||wi(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Mi(Ii.bind(null,r,i,e),[e]),r.flags|=2048,Pi(9,_i.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=mi(),t=Es.identifierPrefix;if(oa){var n=Xo;t=":"+t+"R"+(n=(Qo&~(1<<32-at(Qo)-1)).toString(32)+n),0<(n=di++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ji={readContext:Pa,useCallback:Vi,useContext:Pa,useEffect:Fi,useImperativeHandle:ji,useInsertionEffect:Ri,useLayoutEffect:Di,useMemo:Bi,useReducer:xi,useRef:Ai,useState:function(){return xi(bi)},useDebugValue:Hi,useDeferredValue:function(e){return Ui(vi(),li.memoizedState,e)},useTransition:function(){return[xi(bi)[0],vi().memoizedState]},useMutableSource:ki,useSyncExternalStore:Si,useId:zi,unstable_isNewReconciler:!1},el={readContext:Pa,useCallback:Vi,useContext:Pa,useEffect:Fi,useImperativeHandle:ji,useInsertionEffect:Ri,useLayoutEffect:Di,useMemo:Bi,useReducer:Ci,useRef:Ai,useState:function(){return Ci(bi)},useDebugValue:Hi,useDeferredValue:function(e){var t=vi();return null===li?t.memoizedState=e:Ui(t,li.memoizedState,e)},useTransition:function(){return[Ci(bi)[0],vi().memoizedState]},useMutableSource:ki,useSyncExternalStore:Si,useId:zi,unstable_isNewReconciler:!1};function tl(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function nl(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var rl={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Js(),o=eu(e),a=Oa(r,o);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ja(e,a,o))&&(tu(t,e,o,r),Ha(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Js(),o=eu(e),a=Oa(r,o);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ja(e,a,o))&&(tu(t,e,o,r),Ha(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Js(),r=eu(e),o=Oa(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=ja(e,o,r))&&(tu(t,e,r,n),Ha(t,e,r))}};function ol(e,t,n,r,o,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(o,a))}function al(e,t,n){var r=!1,o=To,a=t.contextType;return"object"===typeof a&&null!==a?a=Pa(a):(o=Lo(t)?Po:Eo.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ao(e,o):To),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=rl,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function il(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&rl.enqueueReplaceState(t,t.state,null)}function ll(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?o.context=Pa(a):(a=Lo(t)?Po:Eo.current,o.context=Ao(e,a)),o.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(nl(e,t,a,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&rl.enqueueReplaceState(o,o.state,null),Ba(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function sl(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var o=n}catch(qu){o="\nError generating stack: "+qu.message+"\n"+qu.stack}return{value:e,source:t,stack:o,digest:null}}function ul(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function cl(e,t){try{console.error(t.value)}catch(Yu){setTimeout((function(){throw Yu}))}}var dl="function"===typeof WeakMap?WeakMap:Map;function hl(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Us||(Us=!0,Gs=r),cl(0,t)},n}function fl(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){cl(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){cl(0,t),"function"!==typeof r&&(null===zs?zs=new Set([this]):zs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new dl;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=wu.bind(null,e,t,n),t.then(e,e))}function gl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yl(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,ja(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var ml=x.ReactCurrentOwner,vl=!1;function bl(e,t,n,r){t.child=null===e?Ca(t,null,n,r):xa(t,e.child,n,r)}function xl(e,t,n,r,o){n=n.render;var a=t.ref;return Na(t,o),r=gi(e,t,n,r,a,o),n=yi(),null===e||vl?(oa&&n&&ea(t),t.flags|=1,bl(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ul(e,t,o))}function Cl(e,t,n,r,o){if(null===e){var a=n.type;return"function"!==typeof a||Au(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ku(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,kl(e,t,a,r,o))}if(a=e.child,0===(e.lanes&o)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Ul(e,t,o)}return t.flags|=1,(e=Lu(a,r)).ref=t.ref,e.return=t,t.child=e}function kl(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(vl=!1,t.pendingProps=r=a,0===(e.lanes&o))return t.lanes=e.lanes,Ul(e,t,o);0!==(131072&e.flags)&&(vl=!0)}}return _l(e,t,n,r,o)}function Sl(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Io(Ls,As),As|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Io(Ls,As),As|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Io(Ls,As),As|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Io(Ls,As),As|=r;return bl(e,t,o,n),t.child}function wl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _l(e,t,n,r,o){var a=Lo(n)?Po:Eo.current;return a=Ao(t,a),Na(t,o),n=gi(e,t,n,r,a,o),r=yi(),null===e||vl?(oa&&r&&ea(t),t.flags|=1,bl(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ul(e,t,o))}function Il(e,t,n,r,o){if(Lo(n)){var a=!0;Ro(t)}else a=!1;if(Na(t,o),null===t.stateNode)Bl(e,t),al(t,n,r),ll(t,n,r,o),r=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var s=i.context,u=n.contextType;"object"===typeof u&&null!==u?u=Pa(u):u=Ao(t,u=Lo(n)?Po:Eo.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==r||s!==u)&&il(t,i,r,u),Fa=!1;var h=t.memoizedState;i.state=h,Ba(t,r,i,o),s=t.memoizedState,l!==r||h!==s||No.current||Fa?("function"===typeof c&&(nl(t,n,c,r),s=t.memoizedState),(l=Fa||ol(t,n,l,r,h,s,u))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),i.props=r,i.state=s,i.context=u,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Da(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:tl(t.type,l),i.props=u,d=t.pendingProps,h=i.context,"object"===typeof(s=n.contextType)&&null!==s?s=Pa(s):s=Ao(t,s=Lo(n)?Po:Eo.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==d||h!==s)&&il(t,i,r,s),Fa=!1,h=t.memoizedState,i.state=h,Ba(t,r,i,o);var p=t.memoizedState;l!==d||h!==p||No.current||Fa?("function"===typeof f&&(nl(t,n,f,r),p=t.memoizedState),(u=Fa||ol(t,n,u,r,h,p,s)||!1)?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,s),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=s,r=u):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Tl(e,t,n,r,a,o)}function Tl(e,t,n,r,o,a){wl(e,t);var i=0!==(128&t.flags);if(!r&&!i)return o&&Do(t,n,!1),Ul(e,t,a);r=t.stateNode,ml.current=t;var l=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=xa(t,e.child,null,a),t.child=xa(t,null,l,a)):bl(e,t,l,a),t.memoizedState=r.state,o&&Do(t,n,!0),t.child}function El(e){var t=e.stateNode;t.pendingContext?Mo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mo(0,t.context,!1),qa(e,t.containerInfo)}function Nl(e,t,n,r,o){return fa(),pa(o),t.flags|=256,bl(e,t,n,r),t.child}var Pl,Al,Ll,Kl,Ml={dehydrated:null,treeContext:null,retryLane:0};function Fl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rl(e,t,n){var r,o=t.pendingProps,i=Ja.current,l=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Io(Ja,1&i),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=o.children,e=o.fallback,l?(o=t.mode,l=t.child,s={mode:"hidden",children:s},0===(1&o)&&null!==l?(l.childLanes=0,l.pendingProps=s):l=Fu(s,o,0,null),e=Mu(e,o,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Fl(n),t.memoizedState=Ml,e):Dl(t,s));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,o,i,l){if(n)return 256&t.flags?(t.flags&=-257,Ol(e,t,l,r=ul(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=Fu({mode:"visible",children:r.children},o,0,null),(i=Mu(i,o,l,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&xa(t,e.child,null,l),t.child.memoizedState=Fl(l),t.memoizedState=Ml,i);if(0===(1&t.mode))return Ol(e,t,l,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var s=r.dgst;return r=s,Ol(e,t,l,r=ul(i=Error(a(419)),r,void 0))}if(s=0!==(l&e.childLanes),vl||s){if(null!==(r=Es)){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|l))?0:o)&&o!==i.retryLane&&(i.retryLane=o,Ma(e,o),tu(r,e,o,-1))}return pu(),Ol(e,t,l,r=ul(Error(a(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Iu.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,ra=so(o.nextSibling),na=t,oa=!0,aa=null,null!==e&&(Yo[$o++]=Qo,Yo[$o++]=Xo,Yo[$o++]=qo,Qo=e.id,Xo=e.overflow,qo=t),t=Dl(t,r.children),t.flags|=4096,t)}(e,t,s,o,r,i,n);if(l){l=o.fallback,s=t.mode,r=(i=e.child).sibling;var u={mode:"hidden",children:o.children};return 0===(1&s)&&t.child!==i?((o=t.child).childLanes=0,o.pendingProps=u,t.deletions=null):(o=Lu(i,u)).subtreeFlags=14680064&i.subtreeFlags,null!==r?l=Lu(r,l):(l=Mu(l,s,n,null)).flags|=2,l.return=t,o.return=t,o.sibling=l,t.child=o,o=l,l=t.child,s=null===(s=e.child.memoizedState)?Fl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},l.memoizedState=s,l.childLanes=e.childLanes&~n,t.memoizedState=Ml,o}return e=(l=e.child).sibling,o=Lu(l,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Dl(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ol(e,t,n,r){return null!==r&&pa(r),xa(t,e.child,null,n),(e=Dl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function jl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function Hl(e,t,n,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function Vl(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(bl(e,t,r.children,n),0!==(2&(r=Ja.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&jl(e,n,t);else if(19===e.tag)jl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Io(Ja,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Hl(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ei(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Hl(t,!0,n,null,a);break;case"together":Hl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bl(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ul(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Lu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gl(e,t){if(!oa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function zl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wl(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zl(t),null;case 1:case 17:return Lo(t.type)&&Ko(),zl(t),null;case 3:return r=t.stateNode,Qa(),_o(No),_o(Eo),ni(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(au(aa),aa=null))),Al(e,t),zl(t),null;case 5:Za(t);var o=$a(Ya.current);if(n=t.type,null!==e&&null!=t.stateNode)Ll(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return zl(t),null}if(e=$a(za.current),da(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ho]=t,r[fo]=i,e=0!==(1&t.mode),n){case"dialog":Or("cancel",r),Or("close",r);break;case"iframe":case"object":case"embed":Or("load",r);break;case"video":case"audio":for(o=0;o<Mr.length;o++)Or(Mr[o],r);break;case"source":Or("error",r);break;case"img":case"image":case"link":Or("error",r),Or("load",r);break;case"details":Or("toggle",r);break;case"input":Q(r,i),Or("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Or("invalid",r);break;case"textarea":oe(r,i),Or("invalid",r)}for(var s in me(n,i),o=null,i)if(i.hasOwnProperty(s)){var u=i[s];"children"===s?"string"===typeof u?r.textContent!==u&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,u,e),o=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,u,e),o=["children",""+u]):l.hasOwnProperty(s)&&null!=u&&"onScroll"===s&&Or("scroll",r)}switch(n){case"input":W(r),J(r,i,!0);break;case"textarea":W(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ho]=t,e[fo]=r,Pl(e,t,!1,!1),t.stateNode=e;e:{switch(s=ve(n,r),n){case"dialog":Or("cancel",e),Or("close",e),o=r;break;case"iframe":case"object":case"embed":Or("load",e),o=r;break;case"video":case"audio":for(o=0;o<Mr.length;o++)Or(Mr[o],e);o=r;break;case"source":Or("error",e),o=r;break;case"img":case"image":case"link":Or("error",e),Or("load",e),o=r;break;case"details":Or("toggle",e),o=r;break;case"input":Q(e,r),o=q(e,r),Or("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=D({},r,{value:void 0}),Or("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Or("invalid",e)}for(i in me(n,o),u=o)if(u.hasOwnProperty(i)){var c=u[i];"style"===i?ge(e,c):"dangerouslySetInnerHTML"===i?null!=(c=c?c.__html:void 0)&&ce(e,c):"children"===i?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=c&&"onScroll"===i&&Or("scroll",e):null!=c&&b(e,i,c,s))}switch(n){case"input":W(e),J(e,r,!1);break;case"textarea":W(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return zl(t),null;case 6:if(e&&null!=t.stateNode)Kl(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=$a(Ya.current),$a(za.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[ho]=t,(i=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ho]=t,t.stateNode=r}return zl(t),null;case 13:if(_o(Ja),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(oa&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),fa(),t.flags|=98560,i=!1;else if(i=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[ho]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;zl(t),i=!1}else null!==aa&&(au(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Ja.current)?0===Ks&&(Ks=3):pu())),null!==t.updateQueue&&(t.flags|=4),zl(t),null);case 4:return Qa(),Al(e,t),null===e&&Vr(t.stateNode.containerInfo),zl(t),null;case 10:return Ta(t.type._context),zl(t),null;case 19:if(_o(Ja),null===(i=t.memoizedState))return zl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)Gl(i,!1);else{if(0!==Ks||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ei(e))){for(t.flags|=128,Gl(i,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(s=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Io(Ja,1&Ja.current|2),t.child}e=e.sibling}null!==i.tail&&Qe()>Vs&&(t.flags|=128,r=!0,Gl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!oa)return zl(t),null}else 2*Qe()-i.renderingStartTime>Vs&&1073741824!==n&&(t.flags|=128,r=!0,Gl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=i.last)?n.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,n=Ja.current,Io(Ja,r?1&n|2:1&n),t):(zl(t),null);case 22:case 23:return cu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&As)&&(zl(t),6&t.subtreeFlags&&(t.flags|=8192)):zl(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yl(e,t){switch(ta(t),t.tag){case 1:return Lo(t.type)&&Ko(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qa(),_o(No),_o(Eo),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(_o(Ja),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _o(Ja),null;case 4:return Qa(),null;case 10:return Ta(t.type._context),null;case 22:case 23:return cu(),null;default:return null}}Pl=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Al=function(){},Ll=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,$a(za.current);var a,i=null;switch(n){case"input":o=q(e,o),r=q(e,r),i=[];break;case"select":o=D({},o,{value:void 0}),r=D({},r,{value:void 0}),i=[];break;case"textarea":o=re(e,o),r=re(e,r),i=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in me(n,r),n=null,o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&null!=o[c])if("style"===c){var s=o[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(l.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(s=null!=o?o[c]:void 0,r.hasOwnProperty(c)&&u!==s&&(null!=u||null!=s))if("style"===c)if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(i=i||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(i=i||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(l.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Or("scroll",e),i||s===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}},Kl=function(e,t,n,r){n!==r&&(t.flags|=4)};var $l=!1,ql=!1,Ql="function"===typeof WeakSet?WeakSet:Set,Xl=null;function Zl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(Xu){Su(e,t,Xu)}else n.current=null}function Jl(e,t,n){try{n()}catch(Xu){Su(e,t,Xu)}}var es=!1;function ts(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,void 0!==a&&Jl(t,n,a)}o=o.next}while(o!==r)}}function ns(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rs(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ho],delete t[fo],delete t[go],delete t[yo],delete t[mo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function as(e){return 5===e.tag||3===e.tag||4===e.tag}function is(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||as(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}var us=null,cs=!1;function ds(e,t,n){for(n=n.child;null!==n;)hs(e,t,n),n=n.sibling}function hs(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,n)}catch(nc){}switch(n.tag){case 5:ql||Zl(n,t);case 6:var r=us,o=cs;us=null,ds(e,t,n),cs=o,null!==(us=r)&&(cs?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(cs?(e=us,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),Vt(e)):lo(us,n.stateNode));break;case 4:r=us,o=cs,us=n.stateNode.containerInfo,cs=!0,ds(e,t,n),us=r,cs=o;break;case 0:case 11:case 14:case 15:if(!ql&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var a=o,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&Jl(n,t,i),o=o.next}while(o!==r)}ds(e,t,n);break;case 1:if(!ql&&(Zl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(nc){Su(n,t,nc)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(ql=(r=ql)||null!==n.memoizedState,ds(e,t,n),ql=r):ds(e,t,n);break;default:ds(e,t,n)}}function fs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ql),t.forEach((function(t){var r=Tu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ps(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,l=t,s=l;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,cs=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,cs=!0;break e}s=s.return}if(null===us)throw Error(a(160));hs(i,l,o),us=null,cs=!1;var u=o.alternate;null!==u&&(u.return=null),o.return=null}catch(Zu){Su(o,t,Zu)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gs(t,e),t=t.sibling}function gs(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ps(t,e),ys(e),4&r){try{ts(3,e,e.return),ns(3,e)}catch(Bu){Su(e,e.return,Bu)}try{ts(5,e,e.return)}catch(Bu){Su(e,e.return,Bu)}}break;case 1:ps(t,e),ys(e),512&r&&null!==n&&Zl(n,n.return);break;case 5:if(ps(t,e),ys(e),512&r&&null!==n&&Zl(n,n.return),32&e.flags){var o=e.stateNode;try{de(o,"")}catch(Bu){Su(e,e.return,Bu)}}if(4&r&&null!=(o=e.stateNode)){var i=e.memoizedProps,l=null!==n?n.memoizedProps:i,s=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===s&&"radio"===i.type&&null!=i.name&&X(o,i),ve(s,l);var c=ve(s,i);for(l=0;l<u.length;l+=2){var d=u[l],h=u[l+1];"style"===d?ge(o,h):"dangerouslySetInnerHTML"===d?ce(o,h):"children"===d?de(o,h):b(o,d,h,c)}switch(s){case"input":Z(o,i);break;case"textarea":ae(o,i);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(o,!!i.multiple,p,!1):f!==!!i.multiple&&(null!=i.defaultValue?ne(o,!!i.multiple,i.defaultValue,!0):ne(o,!!i.multiple,i.multiple?[]:"",!1))}o[fo]=i}catch(Bu){Su(e,e.return,Bu)}}break;case 6:if(ps(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(a(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(Bu){Su(e,e.return,Bu)}}break;case 3:if(ps(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(Bu){Su(e,e.return,Bu)}break;case 4:default:ps(t,e),ys(e);break;case 13:ps(t,e),ys(e),8192&(o=e.child).flags&&(i=null!==o.memoizedState,o.stateNode.isHidden=i,!i||null!==o.alternate&&null!==o.alternate.memoizedState||(Hs=Qe())),4&r&&fs(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(ql=(c=ql)||d,ps(t,e),ql=c):ps(t,e),ys(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Xl=e,d=e.child;null!==d;){for(h=Xl=d;null!==Xl;){switch(p=(f=Xl).child,f.tag){case 0:case 11:case 14:case 15:ts(4,f,f.return);break;case 1:Zl(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(Bu){Su(r,n,Bu)}}break;case 5:Zl(f,f.return);break;case 22:if(null!==f.memoizedState){xs(h);continue}}null!==p?(p.return=f,Xl=p):xs(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,c?"function"===typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none":(s=h.stateNode,l=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,s.style.display=pe("display",l))}catch(Bu){Su(e,e.return,Bu)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(Bu){Su(e,e.return,Bu)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ps(t,e),ys(e),4&r&&fs(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(as(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(de(o,""),r.flags&=-33),ss(e,is(e),o);break;case 3:case 4:var i=r.stateNode.containerInfo;ls(e,is(e),i);break;default:throw Error(a(161))}}catch(l){Su(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ms(e,t,n){Xl=e,vs(e,t,n)}function vs(e,t,n){for(var r=0!==(1&e.mode);null!==Xl;){var o=Xl,a=o.child;if(22===o.tag&&r){var i=null!==o.memoizedState||$l;if(!i){var l=o.alternate,s=null!==l&&null!==l.memoizedState||ql;l=$l;var u=ql;if($l=i,(ql=s)&&!u)for(Xl=o;null!==Xl;)s=(i=Xl).child,22===i.tag&&null!==i.memoizedState?Cs(o):null!==s?(s.return=i,Xl=s):Cs(o);for(;null!==a;)Xl=a,vs(a,t,n),a=a.sibling;Xl=o,$l=l,ql=u}bs(e)}else 0!==(8772&o.subtreeFlags)&&null!==a?(a.return=o,Xl=a):bs(e)}}function bs(e){for(;null!==Xl;){var t=Xl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:ql||ns(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!ql)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:tl(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ua(t,i,r);break;case 3:var l=t.updateQueue;if(null!==l){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,l,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(a(163))}ql||512&t.flags&&rs(t)}catch(Uu){Su(t,t.return,Uu)}}if(t===e){Xl=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xl=n;break}Xl=t.return}}function xs(e){for(;null!==Xl;){var t=Xl;if(t===e){Xl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xl=n;break}Xl=t.return}}function Cs(e){for(;null!==Xl;){var t=Xl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ns(4,t)}catch(s){Su(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(s){Su(t,o,s)}}var a=t.return;try{rs(t)}catch(s){Su(t,a,s)}break;case 5:var i=t.return;try{rs(t)}catch(s){Su(t,i,s)}}}catch(s){Su(t,t.return,s)}if(t===e){Xl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Xl=l;break}Xl=t.return}}var ks,Ss=Math.ceil,ws=x.ReactCurrentDispatcher,_s=x.ReactCurrentOwner,Is=x.ReactCurrentBatchConfig,Ts=0,Es=null,Ns=null,Ps=0,As=0,Ls=wo(0),Ks=0,Ms=null,Fs=0,Rs=0,Ds=0,Os=null,js=null,Hs=0,Vs=1/0,Bs=null,Us=!1,Gs=null,zs=null,Ws=!1,Ys=null,$s=0,qs=0,Qs=null,Xs=-1,Zs=0;function Js(){return 0!==(6&Ts)?Qe():-1!==Xs?Xs:Xs=Qe()}function eu(e){return 0===(1&e.mode)?1:0!==(2&Ts)&&0!==Ps?Ps&-Ps:null!==ga.transition?(0===Zs&&(Zs=pt()),Zs):0!==(e=vt)?e:e=void 0===(e=window.event)?16:qt(e.type)}function tu(e,t,n,r){if(50<qs)throw qs=0,Qs=null,Error(a(185));yt(e,n,r),0!==(2&Ts)&&e===Es||(e===Es&&(0===(2&Ts)&&(Rs|=n),4===Ks&&iu(e,Ps)),nu(e,r),1===n&&0===Ts&&0===(1&t.mode)&&(Vs=Qe()+500,jo&&Bo()))}function nu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-at(a),l=1<<i,s=o[i];-1===s?0!==(l&n)&&0===(l&r)||(o[i]=ht(l,t)):s<=t&&(e.expiredLanes|=l),a&=~l}}(e,t);var r=dt(e,e===Es?Ps:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){jo=!0,Vo(e)}(lu.bind(null,e)):Vo(lu.bind(null,e)),ao((function(){0===(6&Ts)&&Bo()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=Je;break;case 16:default:n=et;break;case 536870912:n=nt}n=Eu(n,ru.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ru(e,t){if(Xs=-1,Zs=0,0!==(6&Ts))throw Error(a(327));var n=e.callbackNode;if(Cu()&&e.callbackNode!==n)return null;var r=dt(e,e===Es?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var o=Ts;Ts|=2;var i=fu();for(Es===e&&Ps===t||(Bs=null,Vs=Qe()+500,du(e,t));;)try{mu();break}catch(nc){hu(e,nc)}Ia(),ws.current=i,Ts=o,null!==Ns?t=0:(Es=null,Ps=0,t=Ks)}if(0!==t){if(2===t&&(0!==(o=ft(e))&&(r=o,t=ou(e,o))),1===t)throw n=Ms,du(e,0),iu(e,r),nu(e,Qe()),n;if(6===t)iu(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!ir(a(),o))return!1}catch(l){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=gu(e,r))&&(0!==(i=ft(e))&&(r=i,t=ou(e,i))),1===t))throw n=Ms,du(e,0),iu(e,r),nu(e,Qe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xu(e,js,Bs);break;case 3:if(iu(e,r),(130023424&r)===r&&10<(t=Hs+500-Qe())){if(0!==dt(e,0))break;if(((o=e.suspendedLanes)&r)!==r){Js(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=no(xu.bind(null,e,js,Bs),t);break}xu(e,js,Bs);break;case 4:if(iu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var l=31-at(r);i=1<<l,(l=t[l])>o&&(o=l),r&=~i}if(r=o,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=no(xu.bind(null,e,js,Bs),r);break}xu(e,js,Bs);break;default:throw Error(a(329))}}}return nu(e,Qe()),e.callbackNode===n?ru.bind(null,e):null}function ou(e,t){var n=Os;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=gu(e,t))&&(t=js,js=n,null!==t&&au(t)),e}function au(e){null===js?js=e:js.push.apply(js,e)}function iu(e,t){for(t&=~Ds,t&=~Rs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&Ts))throw Error(a(327));Cu();var t=dt(e,0);if(0===(1&t))return nu(e,Qe()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Ms,du(e,0),iu(e,t),nu(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xu(e,js,Bs),nu(e,Qe()),null}function su(e,t){var n=Ts;Ts|=1;try{return e(t)}finally{0===(Ts=n)&&(Vs=Qe()+500,jo&&Bo())}}function uu(e){null!==Ys&&0===Ys.tag&&0===(6&Ts)&&Cu();var t=Ts;Ts|=1;var n=Is.transition,r=vt;try{if(Is.transition=null,vt=1,e)return e()}finally{vt=r,Is.transition=n,0===(6&(Ts=t))&&Bo()}}function cu(){As=Ls.current,_o(Ls)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ro(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ko();break;case 3:Qa(),_o(No),_o(Eo),ni();break;case 5:Za(r);break;case 4:Qa();break;case 13:case 19:_o(Ja);break;case 10:Ta(r.type._context);break;case 22:case 23:cu()}n=n.return}if(Es=e,Ns=e=Lu(e.current,null),Ps=As=t,Ks=0,Ms=null,Ds=Rs=Fs=0,js=Os=null,null!==Aa){for(t=0;t<Aa.length;t++)if(null!==(r=(n=Aa[t]).interleaved)){n.interleaved=null;var o=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=o,r.next=i}n.pending=r}Aa=null}return e}function hu(e,t){for(;;){var n=Ns;try{if(Ia(),ri.current=Xi,ui){for(var r=ii.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ui=!1}if(ai=0,si=li=ii=null,ci=!1,di=0,_s.current=null,null===n||null===n.return){Ks=1,Ms=t,Ns=null;break}e:{var i=e,l=n.return,s=n,u=t;if(t=Ps,s.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=s,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gl(l);if(null!==p){p.flags&=-257,yl(p,l,s,0,t),1&p.mode&&pl(i,c,t),u=c;var g=(t=p).updateQueue;if(null===g){var y=new Set;y.add(u),t.updateQueue=y}else g.add(u);break e}if(0===(1&t)){pl(i,c,t),pu();break e}u=Error(a(426))}else if(oa&&1&s.mode){var m=gl(l);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),yl(m,l,s,0,t),pa(sl(u,s));break e}}i=u=sl(u,s),4!==Ks&&(Ks=2),null===Os?Os=[i]:Os.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Va(i,hl(0,u,t));break e;case 1:s=u;var v=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===zs||!zs.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Va(i,fl(i,s,t));break e}}i=i.return}while(null!==i)}bu(n)}catch(x){t=x,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function fu(){var e=ws.current;return ws.current=Xi,null===e?Xi:e}function pu(){0!==Ks&&3!==Ks&&2!==Ks||(Ks=4),null===Es||0===(268435455&Fs)&&0===(268435455&Rs)||iu(Es,Ps)}function gu(e,t){var n=Ts;Ts|=2;var r=fu();for(Es===e&&Ps===t||(Bs=null,du(e,t));;)try{yu();break}catch(o){hu(e,o)}if(Ia(),Ts=n,ws.current=r,null!==Ns)throw Error(a(261));return Es=null,Ps=0,Ks}function yu(){for(;null!==Ns;)vu(Ns)}function mu(){for(;null!==Ns&&!$e();)vu(Ns)}function vu(e){var t=ks(e.alternate,e,As);e.memoizedProps=e.pendingProps,null===t?bu(e):Ns=t,_s.current=null}function bu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wl(n,t,As)))return void(Ns=n)}else{if(null!==(n=Yl(n,t)))return n.flags&=32767,void(Ns=n);if(null===e)return Ks=6,void(Ns=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Ks&&(Ks=5)}function xu(e,t,n){var r=vt,o=Is.transition;try{Is.transition=null,vt=1,function(e,t,n,r){do{Cu()}while(null!==Ys);if(0!==(6&Ts))throw Error(a(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}(e,i),e===Es&&(Ns=Es=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Eu(et,(function(){return Cu(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Is.transition,Is.transition=null;var l=vt;vt=1;var s=Ts;Ts|=4,_s.current=null,function(e,t){if(Jr=Ut,hr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(C){n=null;break e}var l=0,s=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==o&&3!==h.nodeType||(s=l+o),h!==i||0!==r&&3!==h.nodeType||(u=l+r),3===h.nodeType&&(l+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===o&&(s=l),f===i&&++d===r&&(u=l),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===s||-1===u?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(eo={focusedElem:e,selectionRange:n},Ut=!1,Xl=t;null!==Xl;)if(e=(t=Xl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xl=e;else for(;null!==Xl;){t=Xl;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var y=g.memoizedProps,m=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:tl(t.type,y),m);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(C){Su(t,t.return,C)}if(null!==(e=t.sibling)){e.return=t.return,Xl=e;break}Xl=t.return}g=es,es=!1}(e,n),gs(n,e),fr(eo),Ut=!!Jr,eo=Jr=null,e.current=n,ms(n,e,o),qe(),Ts=s,vt=l,Is.transition=i}else e.current=n;if(Ws&&(Ws=!1,Ys=e,$s=o),i=e.pendingLanes,0===i&&(zs=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nu(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Us)throw Us=!1,e=Gs,Gs=null,e;0!==(1&$s)&&0!==e.tag&&Cu(),i=e.pendingLanes,0!==(1&i)?e===Qs?qs++:(qs=0,Qs=e):qs=0,Bo()}(e,t,n,r)}finally{Is.transition=o,vt=r}return null}function Cu(){if(null!==Ys){var e=bt($s),t=Is.transition,n=vt;try{if(Is.transition=null,vt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,$s=0,0!==(6&Ts))throw Error(a(331));var o=Ts;for(Ts|=4,Xl=e.current;null!==Xl;){var i=Xl,l=i.child;if(0!==(16&Xl.flags)){var s=i.deletions;if(null!==s){for(var u=0;u<s.length;u++){var c=s[u];for(Xl=c;null!==Xl;){var d=Xl;switch(d.tag){case 0:case 11:case 15:ts(8,d,i)}var h=d.child;if(null!==h)h.return=d,Xl=h;else for(;null!==Xl;){var f=(d=Xl).sibling,p=d.return;if(os(d),d===c){Xl=null;break}if(null!==f){f.return=p,Xl=f;break}Xl=p}}}var g=i.alternate;if(null!==g){var y=g.child;if(null!==y){g.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Xl=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Xl=l;else e:for(;null!==Xl;){if(0!==(2048&(i=Xl).flags))switch(i.tag){case 0:case 11:case 15:ts(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Xl=v;break e}Xl=i.return}}var b=e.current;for(Xl=b;null!==Xl;){var x=(l=Xl).child;if(0!==(2064&l.subtreeFlags)&&null!==x)x.return=l,Xl=x;else e:for(l=b;null!==Xl;){if(0!==(2048&(s=Xl).flags))try{switch(s.tag){case 0:case 11:case 15:ns(9,s)}}catch(k){Su(s,s.return,k)}if(s===l){Xl=null;break e}var C=s.sibling;if(null!==C){C.return=s.return,Xl=C;break e}Xl=s.return}}if(Ts=o,Bo(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(k){}r=!0}return r}finally{vt=n,Is.transition=t}}return!1}function ku(e,t,n){e=ja(e,t=hl(0,t=sl(n,t),1),1),t=Js(),null!==e&&(yt(e,1,t),nu(e,t))}function Su(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zs||!zs.has(r))){t=ja(t,e=fl(t,e=sl(n,e),1),1),e=Js(),null!==t&&(yt(t,1,e),nu(t,e));break}}t=t.return}}function wu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Js(),e.pingedLanes|=e.suspendedLanes&n,Es===e&&(Ps&n)===n&&(4===Ks||3===Ks&&(130023424&Ps)===Ps&&500>Qe()-Hs?du(e,0):Ds|=n),nu(e,t)}function _u(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=Js();null!==(e=Ma(e,t))&&(yt(e,t,n),nu(e,n))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_u(e,n)}function Tu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),_u(e,n)}function Eu(e,t){return We(e,t)}function Nu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,r){return new Nu(e,t,n,r)}function Au(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lu(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ku(e,t,n,r,o,i){var l=2;if(r=e,"function"===typeof e)Au(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case S:return Mu(n.children,o,i,t);case w:l=8,o|=8;break;case _:return(e=Pu(12,n,t,2|o)).elementType=_,e.lanes=i,e;case N:return(e=Pu(13,n,t,o)).elementType=N,e.lanes=i,e;case P:return(e=Pu(19,n,t,o)).elementType=P,e.lanes=i,e;case K:return Fu(n,o,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:l=10;break e;case T:l=9;break e;case E:l=11;break e;case A:l=14;break e;case L:l=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pu(l,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Mu(e,t,n,r){return(e=Pu(7,e,r,t)).lanes=n,e}function Fu(e,t,n,r){return(e=Pu(22,e,r,t)).elementType=K,e.lanes=n,e.stateNode={isHidden:!1},e}function Ru(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function Du(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ou(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function ju(e,t,n,r,o,a,i,l,s){return e=new Ou(e,t,n,l,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Hu(e){if(!e)return To;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Lo(n))return Fo(e,n,t)}return t}function Vu(e,t,n,r,o,a,i,l,s){return(e=ju(n,r,!0,e,0,a,0,l,s)).context=Hu(null),n=e.current,(a=Oa(r=Js(),o=eu(n))).callback=void 0!==t&&null!==t?t:null,ja(n,a,o),e.current.lanes=o,yt(e,o,r),nu(e,r),e}function Gu(e,t,n,r){var o=t.current,a=Js(),i=eu(o);return n=Hu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=ja(o,t,i))&&(tu(e,o,i,a),Ha(e,o,i)),i}function zu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $u(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qu(e,t){$u(e,t),(e=e.alternate)&&$u(e,t)}ks=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||No.current)vl=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vl=!1,function(e,t,n){switch(t.tag){case 3:El(t),fa();break;case 5:Xa(t);break;case 1:Lo(t.type)&&Ro(t);break;case 4:qa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Io(ka,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Io(Ja,1&Ja.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Rl(e,t,n):(Io(Ja,1&Ja.current),null!==(e=Ul(e,t,n))?e.sibling:null);Io(Ja,1&Ja.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vl(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Io(Ja,Ja.current),r)break;return null;case 22:case 23:return t.lanes=0,Sl(e,t,n)}return Ul(e,t,n)}(e,t,n);vl=0!==(131072&e.flags)}else vl=!1,oa&&0!==(1048576&t.flags)&&Jo(t,Wo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bl(e,t),e=t.pendingProps;var o=Ao(t,Eo.current);Na(t,n),o=gi(null,t,r,e,o,n);var i=yi();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lo(r)?(i=!0,Ro(t)):i=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ra(t),o.updater=rl,t.stateNode=o,o._reactInternals=t,ll(t,r,e,n),t=Tl(null,t,r,!0,i,n)):(t.tag=0,oa&&i&&ea(t),bl(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bl(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Au(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===A)return 14}return 2}(r),e=tl(r,e),o){case 0:t=_l(null,t,r,e,n);break e;case 1:t=Il(null,t,r,e,n);break e;case 11:t=xl(null,t,r,e,n);break e;case 14:t=Cl(null,t,r,tl(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,_l(e,t,r,o=t.elementType===r?o:tl(r,o),n);case 1:return r=t.type,o=t.pendingProps,Il(e,t,r,o=t.elementType===r?o:tl(r,o),n);case 3:e:{if(El(t),null===e)throw Error(a(387));r=t.pendingProps,o=(i=t.memoizedState).element,Da(e,t),Ba(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Nl(e,t,r,n,o=sl(Error(a(423)),t));break e}if(r!==o){t=Nl(e,t,r,n,o=sl(Error(a(424)),t));break e}for(ra=so(t.stateNode.containerInfo.firstChild),na=t,oa=!0,aa=null,n=Ca(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===o){t=Ul(e,t,n);break e}bl(e,t,r,n)}t=t.child}return t;case 5:return Xa(t),null===e&&ua(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,l=o.children,to(r,o)?l=null:null!==i&&to(r,i)&&(t.flags|=32),wl(e,t),bl(e,t,l,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Rl(e,t,n);case 4:return qa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xa(t,null,r,n):bl(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,xl(e,t,r,o=t.elementType===r?o:tl(r,o),n);case 7:return bl(e,t,t.pendingProps,n),t.child;case 8:case 12:return bl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,l=o.value,Io(ka,r._currentValue),r._currentValue=l,null!==i)if(ir(i.value,l)){if(i.children===o.children&&!No.current){t=Ul(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var s=i.dependencies;if(null!==s){l=i.child;for(var u=s.firstContext;null!==u;){if(u.context===r){if(1===i.tag){(u=Oa(-1,n&-n)).tag=2;var c=i.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=n,null!==(u=i.alternate)&&(u.lanes|=n),Ea(i.return,n,t),s.lanes|=n;break}u=u.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(a(341));l.lanes|=n,null!==(s=l.alternate)&&(s.lanes|=n),Ea(l,n,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}bl(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Na(t,n),r=r(o=Pa(o)),t.flags|=1,bl(e,t,r,n),t.child;case 14:return o=tl(r=t.type,t.pendingProps),Cl(e,t,r,o=tl(r.type,o),n);case 15:return kl(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:tl(r,o),Bl(e,t),t.tag=1,Lo(r)?(e=!0,Ro(t)):e=!1,Na(t,n),al(t,r,o),ll(t,r,o,n),Tl(null,t,r,!0,e,n);case 19:return Vl(e,t,n);case 22:return Sl(e,t,n)}throw Error(a(156,t.tag))};var Ju="function"===typeof reportError?reportError:function(e){console.error(e)};function ec(e){this._internalRoot=e}function rc(e){this._internalRoot=e}function oc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ic(){}function lc(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a;if("function"===typeof o){var l=o;o=function(){var e=zu(i);l.call(e)}}Gu(t,i,e,o)}else i=function(e,t,n,r,o){if(o){if("function"===typeof r){var a=r;r=function(){var e=zu(i);a.call(e)}}var i=Vu(t,r,e,0,null,!1,0,"",ic);return e._reactRootContainer=i,e[po]=i.current,Vr(8===e.nodeType?e.parentNode:e),uu(),i}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var l=r;r=function(){var e=zu(s);l.call(e)}}var s=ju(e,0,!1,null,0,!1,0,"",ic);return e._reactRootContainer=s,e[po]=s.current,Vr(8===e.nodeType?e.parentNode:e),uu((function(){Gu(t,s,n,r)})),s}(n,t,e,o,r);return zu(i)}rc.prototype.render=ec.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gu(e,t,null,null)},rc.prototype.unmount=ec.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uu((function(){Gu(null,e,null,null)})),t[po]=null}},rc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Rt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ct(t.pendingLanes);0!==n&&(mt(t,1|n),nu(t,Qe()),0===(6&Ts)&&(Vs=Qe()+500,Bo()))}break;case 13:uu((function(){var t=Ma(e,1);if(null!==t){var n=Js();tu(t,e,1,n)}})),Qu(e,1)}},Ct=function(e){if(13===e.tag){var t=Ma(e,134217728);if(null!==t)tu(t,e,134217728,Js());Qu(e,134217728)}},kt=function(e){if(13===e.tag){var t=eu(e),n=Ma(e,t);if(null!==n)tu(n,e,t,Js());Qu(e,t)}},St=function(){return vt},wt=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},Ce=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Co(r);if(!o)throw Error(a(90));Y(r),Z(r,o)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=su,Ee=uu;var uc={usingClientEntryPoint:!1,Events:[bo,xo,Co,_e,Ie,su]},cc={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{rt=hc.inject(dc),ot=hc}catch(Wu){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!oc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!oc(e))throw Error(a(299));var n=!1,r="",o=Ju;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=ju(e,1,!1,null,0,n,0,r,o),e[po]=t.current,Vr(8===e.nodeType?e.parentNode:e),new ec(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return uu(e)},t.hydrate=function(e,t,n){if(!ac(t))throw Error(a(200));return lc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!oc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,o=!1,i="",l=Ju;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(l=n.onRecoverableError)),t=Vu(t,null,e,1,null!=n?n:null,o,0,i,l),e[po]=t.current,Vr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new rc(t)},t.render=function(e,t,n){if(!ac(t))throw Error(a(200));return lc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(a(40));return!!e._reactRootContainer&&(uu((function(){lc(null,null,e,!1,(function(){e._reactRootContainer=null,e[po]=null}))})),!0)},t.unstable_batchedUpdates=su,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return lc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}var r=n(43),o=n(391);const a=["\u3042\u884c","\u304b\u884c","\u3055\u884c","\u305f\u884c","\u306a\u884c","\u306f\u884c","\u307e\u884c","\u3084\u884c","\u3089\u884c","\u308f\u884c"],i=["\u3042\u6bb5","\u3044\u6bb5","\u3046\u6bb5","\u3048\u6bb5","\u304a\u6bb5"],l={"\u3042\u884c":["\u3042","\u3044","\u3046","\u3048","\u304a"],"\u304b\u884c":["\u304b","\u304d","\u304f","\u3051","\u3053"],"\u3055\u884c":["\u3055","\u3057","\u3059","\u305b","\u305d"],"\u305f\u884c":["\u305f","\u3061","\u3064","\u3066","\u3068"],"\u306a\u884c":["\u306a","\u306b","\u306c","\u306d","\u306e"],"\u306f\u884c":["\u306f","\u3072","\u3075","\u3078","\u307b"],"\u307e\u884c":["\u307e","\u307f","\u3080","\u3081","\u3082"],"\u3084\u884c":["\u3084","\u3086","\u3088"],"\u3089\u884c":["\u3089","\u308a","\u308b","\u308c","\u308d"],"\u308f\u884c":["\u308f","\u3092","\u3093","\u30fc","\uff5e"]},s={"\u3042\u884c":["\u3042","\u3044","\u3046","\u3048","\u304a"],"\u304b\u884c":["\u304b","\u304d","\u304f","\u3051","\u3053"],"\u3055\u884c":["\u3055","\u3057","\u3059","\u305b","\u305d"],"\u305f\u884c":["\u305f","\u3061","\u3064","\u3066","\u3068"],"\u306a\u884c":["\u306a","\u306b","\u306c","\u306d","\u306e"],"\u306f\u884c":["\u306f","\u3072","\u3075","\u3078","\u307b"],"\u307e\u884c":["\u307e","\u307f","\u3080","\u3081","\u3082"],"\u3084\u884c":["\u3084","\u3086","\u3088"],"\u3089\u884c":["\u3089","\u308a","\u308b","\u308c","\u308d"],"\u308f\u884c":["\u308f","\u3092","\u3093","\u30fc","\uff5e"]},u=["\u304b\u884c","\u3055\u884c","\u305f\u884c","\u306a\u884c","\u306f\u884c","\u307e\u884c","\u3089\u884c"],c={"\u304b\u884c":["\u304d\u3083","\u304d\u3085","\u304d\u3087"],"\u3055\u884c":["\u3057\u3083","\u3057\u3085","\u3057\u3087"],"\u305f\u884c":["\u3061\u3083","\u3061\u3085","\u3061\u3087"],"\u306a\u884c":["\u306b\u3083","\u306b\u3085","\u306b\u3087"],"\u306f\u884c":["\u3072\u3083","\u3072\u3085","\u3072\u3087"],"\u307e\u884c":["\u307f\u3083","\u307f\u3085","\u307f\u3087"],"\u3089\u884c":["\u308a\u3083","\u308a\u3085","\u308a\u3087"]},d={"\u304b\u884c":["\u3042\u6bb5","\u3046\u6bb5","\u304a\u6bb5"],"\u3055\u884c":["\u3042\u6bb5","\u3046\u6bb5","\u304a\u6bb5"],"\u305f\u884c":["\u3042\u6bb5","\u3046\u6bb5","\u304a\u6bb5"],"\u306a\u884c":["\u3042\u6bb5","\u3046\u6bb5","\u304a\u6bb5"],"\u306f\u884c":["\u3042\u6bb5","\u3046\u6bb5","\u304a\u6bb5"],"\u307e\u884c":["\u3042\u6bb5","\u3046\u6bb5","\u304a\u6bb5"],"\u3089\u884c":["\u3042\u6bb5","\u3046\u6bb5","\u304a\u6bb5"]},h=["\u304b\u884c","\u3055\u884c","\u305f\u884c","\u306f\u884c"],f={"\u304b\u884c":["\u304c","\u304e","\u3050","\u3052","\u3054"],"\u3055\u884c":["\u3056","\u3058","\u305a","\u305c","\u305e"],"\u305f\u884c":["\u3060","\u3062","\u3065","\u3067","\u3069"],"\u306f\u884c":["\u3070","\u3073","\u3076","\u3079","\u307c"]},p={"\u304b\u884c":["\u3042\u6bb5","\u3044\u6bb5","\u3046\u6bb5","\u3048\u6bb5","\u304a\u6bb5"],"\u3055\u884c":["\u3042\u6bb5","\u3044\u6bb5","\u3046\u6bb5","\u3048\u6bb5","\u304a\u6bb5"],"\u305f\u884c":["\u3042\u6bb5","\u3044\u6bb5","\u3046\u6bb5","\u3048\u6bb5","\u304a\u6bb5"],"\u306f\u884c":["\u3042\u6bb5","\u3044\u6bb5","\u3046\u6bb5","\u3048\u6bb5","\u304a\u6bb5"]},g=["\u306f\u884c"],y={"\u306f\u884c":["\u3071","\u3074","\u3077","\u307a","\u307d"]},m={"\u306f\u884c":["\u3042\u6bb5","\u3044\u6bb5","\u3046\u6bb5","\u3048\u6bb5","\u304a\u6bb5"]},v=[{groupName:"\u3063",chars:["\u3063"],inputs:[{char:"\u3063",isTsu:!0}]},{groupName:"\u5c0f\u6587\u5b57\u3042\u884c",chars:["\u3041","\u3043","\u3045","\u3047","\u3049"],inputs:[{char:"\u3041",isTsu:!1,gyouKey:"\u3042\u884c",middleKey:"\u201d \xb0 \u5c0f",danKey:"\u3042\u6bb5"},{char:"\u3043",isTsu:!1,gyouKey:"\u3042\u884c",middleKey:"\u201d \xb0 \u5c0f",danKey:"\u3044\u6bb5"},{char:"\u3045",isTsu:!1,gyouKey:"\u3042\u884c",middleKey:"\u201d \xb0 \u5c0f",danKey:"\u3046\u6bb5"},{char:"\u3047",isTsu:!1,gyouKey:"\u3042\u884c",middleKey:"\u201d \xb0 \u5c0f",danKey:"\u3048\u6bb5"},{char:"\u3049",isTsu:!1,gyouKey:"\u3042\u884c",middleKey:"\u201d \xb0 \u5c0f",danKey:"\u304a\u6bb5"}]},{groupName:"\u5c0f\u6587\u5b57\u3084\u884c",chars:["\u3083","\u3085","\u3087"],inputs:[{char:"\u3083",isTsu:!1,gyouKey:"\u3084\u884c",middleKey:"\u201d \xb0 \u5c0f",danKey:"\u3042\u6bb5"},{char:"\u3085",isTsu:!1,gyouKey:"\u3084\u884c",middleKey:"\u201d \xb0 \u5c0f",danKey:"\u3046\u6bb5"},{char:"\u3087",isTsu:!1,gyouKey:"\u3084\u884c",middleKey:"\u201d \xb0 \u5c0f",danKey:"\u304a\u6bb5"}]},{groupName:"\u5c0f\u6587\u5b57\u308f\u884c",chars:["\u308e"],inputs:[{char:"\u308e",isTsu:!1,gyouKey:"\u308f\u884c",middleKey:"\u201d \xb0 \u5c0f",danKey:"\u3042\u6bb5"}]},{groupName:"\u5c0f\u6587\u5b57\u304b\u884c",chars:["\u30f5","\u30f6"],inputs:[{char:"\u30f5",isTsu:!1,gyouKey:"\u304b\u884c",middleKey:"\u201d \xb0 \u5c0f",danKey:"\u3042\u6bb5"},{char:"\u30f6",isTsu:!1,gyouKey:"\u304b\u884c",middleKey:"\u201d \xb0 \u5c0f",danKey:"\u3048\u6bb5"}]},{groupName:"\u30f4",chars:["\u30f4"],inputs:[{char:"\u30f4",isTsu:!1,gyouKey:"\u308f\u884c",middleKey:"\u201d \xb0 \u5c0f",danKey:"\u3046\u6bb5"}]}],b=[{groupName:"\u62ec\u5f27\uff11",chars:["{","}","<",">"],inputs:[{keyName:"{"},{keyName:"}"},{keyName:"<"},{keyName:">"}]},{groupName:"\u62ec\u5f27\uff12",chars:["'",'"',"(",")"],inputs:[{keyName:"'"},{keyName:'"'},{keyName:"("},{keyName:")"}]},{groupName:"\u62ec\u5f27\uff13",chars:[":",";","\u300c","\u300d"],inputs:[{keyName:":"},{keyName:";"},{keyName:"\u300c"},{keyName:"\u300d"}]}],x=[{groupName:"\u8a18\u53f7\uff12\uff0d\uff11",chars:["+","_","*","-","@"],inputs:[{gyouKey:"\u3042\u884c"},{gyouKey:"\u304b\u884c"},{gyouKey:"\u3055\u884c"},{gyouKey:"\u305f\u884c"},{gyouKey:"\u306a\u884c"}]},{groupName:"\u8a18\u53f7\uff12\uff0d\uff12",chars:["\u30fb","&","|","%","\uffe5"],inputs:[{gyouKey:"\u306f\u884c"},{gyouKey:"\u307e\u884c"},{gyouKey:"\u3084\u884c"},{gyouKey:"\u3089\u884c"},{gyouKey:"\u308f\u884c"}]}],C=[{groupName:"\u8a18\u53f73-\u30b0\u30eb\u30fc\u30d71",chars:["`","?","^","\u3002","\u3001"],inputs:[{char:"`",gyouKey:"`"},{char:"?",gyouKey:"?"},{char:"^",gyouKey:"^"},{char:",",gyouKey:"\u3002"},{char:".",gyouKey:"\u3001"}]},{groupName:"\u8a18\u53f73-\u30b0\u30eb\u30fc\u30d72",chars:["!","$","\u2026","#","~"],inputs:[{char:"!",gyouKey:"!"},{char:"$",gyouKey:"$"},{char:"\u2026",gyouKey:"\u2026"},{char:"#",gyouKey:"#"},{char:"~",gyouKey:"~"}]},{groupName:"\u8a18\u53f73-\u30b0\u30eb\u30fc\u30d73",chars:["\uff1d"],inputs:[{char:"\uff1d"}]}],k=[{groupName:"\u304c\u884c\u3083\u3085\u3087",chars:["\u304e\u3083","\u304e\u3085","\u304e\u3087"],inputs:[{gyouKey:"\u304b\u884c",youonKey:"\u3083\u3085\u3087",dakuonKey:"\u201d \xb0 \u5c0f",dan:"\u3042\u6bb5"},{gyouKey:"\u304b\u884c",youonKey:"\u3083\u3085\u3087",dakuonKey:"\u201d \xb0 \u5c0f",dan:"\u3046\u6bb5"},{gyouKey:"\u304b\u884c",youonKey:"\u3083\u3085\u3087",dakuonKey:"\u201d \xb0 \u5c0f",dan:"\u304a\u6bb5"}]},{groupName:"\u3056\u884c\u3083\u3085\u3087",chars:["\u3058\u3083","\u3058\u3085","\u3058\u3087"],inputs:[{gyouKey:"\u3055\u884c",youonKey:"\u3083\u3085\u3087",dakuonKey:"\u201d \xb0 \u5c0f",dan:"\u3042\u6bb5"},{gyouKey:"\u3055\u884c",youonKey:"\u3083\u3085\u3087",dakuonKey:"\u201d \xb0 \u5c0f",dan:"\u3046\u6bb5"},{gyouKey:"\u3055\u884c",youonKey:"\u3083\u3085\u3087",dakuonKey:"\u201d \xb0 \u5c0f",dan:"\u304a\u6bb5"}]},{groupName:"\u3060\u884c\u3083\u3085\u3087",chars:["\u3062\u3083","\u3062\u3085","\u3062\u3087"],inputs:[{gyouKey:"\u305f\u884c",youonKey:"\u3083\u3085\u3087",dakuonKey:"\u201d \xb0 \u5c0f",dan:"\u3042\u6bb5"},{gyouKey:"\u305f\u884c",youonKey:"\u3083\u3085\u3087",dakuonKey:"\u201d \xb0 \u5c0f",dan:"\u3046\u6bb5"},{gyouKey:"\u305f\u884c",youonKey:"\u3083\u3085\u3087",dakuonKey:"\u201d \xb0 \u5c0f",dan:"\u304a\u6bb5"}]},{groupName:"\u3070\u884c\u3083\u3085\u3087",chars:["\u3073\u3083","\u3073\u3085","\u3073\u3087"],inputs:[{gyouKey:"\u306f\u884c",youonKey:"\u3083\u3085\u3087",dakuonKey:"\u201d \xb0 \u5c0f",dan:"\u3042\u6bb5"},{gyouKey:"\u306f\u884c",youonKey:"\u3083\u3085\u3087",dakuonKey:"\u201d \xb0 \u5c0f",dan:"\u3046\u6bb5"},{gyouKey:"\u306f\u884c",youonKey:"\u3083\u3085\u3087",dakuonKey:"\u201d \xb0 \u5c0f",dan:"\u304a\u6bb5"}]}],S={"\u304b\u884c":["\u304e\u3083","\u304e\u3085","\u304e\u3087"],"\u3055\u884c":["\u3058\u3083","\u3058\u3085","\u3058\u3087"],"\u305f\u884c":["\u3062\u3083","\u3062\u3085","\u3062\u3087"],"\u306f\u884c":["\u3073\u3083","\u3073\u3085","\u3073\u3087"]},w={"\u304b\u884c":["\u3042\u6bb5","\u3046\u6bb5","\u304a\u6bb5"],"\u3055\u884c":["\u3042\u6bb5","\u3046\u6bb5","\u304a\u6bb5"],"\u305f\u884c":["\u3042\u6bb5","\u3046\u6bb5","\u304a\u6bb5"],"\u306f\u884c":["\u3042\u6bb5","\u3046\u6bb5","\u304a\u6bb5"]},_={"\u3071\u884c":["\u3074\u3083","\u3074\u3085","\u3074\u3087"]},I={"\u3071\u884c":["\u3042\u6bb5","\u3046\u6bb5","\u304a\u6bb5"]},T=[{groupName:"\u3071\u884c\u3083\u3085\u3087",chars:["\u3074\u3083","\u3074\u3085","\u3074\u3087"],inputs:[{gyouKey:"\u306f\u884c",youonKey:"\u3083\u3085\u3087",dakuonKey1:"\u201d \xb0 \u5c0f",dakuonKey2:"\u201d \xb0 \u5c0f",dan:"\u3042\u6bb5"},{gyouKey:"\u306f\u884c",youonKey:"\u3083\u3085\u3087",dakuonKey1:"\u201d \xb0 \u5c0f",dakuonKey2:"\u201d \xb0 \u5c0f",dan:"\u3046\u6bb5"},{gyouKey:"\u306f\u884c",youonKey:"\u3083\u3085\u3087",dakuonKey1:"\u201d \xb0 \u5c0f",dakuonKey2:"\u201d \xb0 \u5c0f",dan:"\u304a\u6bb5"}]}],E=["abc","def","ghi","jkl","mno","pqrs","tuv","wxyz"],N="Caps\nLock",P="=\n\u8a18\u53f7",A=10,L=10,K=(a.map((e=>({groupName:e,chars:s[e]||[]}))),u.map((e=>({groupName:"".concat(e,"\u3083\u3085\u3087"),chars:c[e]||[]}))),h.map((e=>{var t,n;return{groupName:"".concat(null===(t=f[e])||void 0===t||null===(n=t[0])||void 0===n?void 0:n.replace(/.$/,""),"\u884c"),chars:f[e]||[],gyouKey:e}})),g.map((e=>{var t,n;return{groupName:"".concat(null===(t=y[e])||void 0===t||null===(n=t[0])||void 0===n?void 0:n.replace(/.$/,""),"\u884c"),chars:y[e]||[],gyouKey:e}})),{"\u304b\u884c":["\u304d\u3083\u304d\u3043\u304d\u3085\u304d\u3047\u304d\u3087"],"\u3055\u884c":["\u3057\u3083\u3057\u3043\u3057\u3085\u3057\u3047\u3057\u3087"],"\u305f\u884c":["\u3061\u3083\u3061\u3043\u3061\u3085\u3061\u3047\u3061\u3087"],"\u306a\u884c":["\u306b\u3083\u306b\u3043\u306b\u3085\u306b\u3047\u306b\u3087"],"\u306f\u884c":["\u3072\u3083\u3072\u3043\u3072\u3085\u3072\u3047\u3072\u3087"],"\u307e\u884c":["\u307f\u3083\u307f\u3043\u307f\u3085\u307f\u3047\u307f\u3087"],"\u3089\u884c":["\u308a\u3083\u308a\u3043\u308a\u3085\u308a\u3047\u308a\u3087"]}),M=u.map((e=>{var t;const n=[],r=K[e]&&K[e][0]&&null!==(t=K[e][0].match(/.{1,2}/g))&&void 0!==t?t:[];for(let a=0;a<5;a++){var o;if(1===a||3===a)n.push({char:null!==(o=r[a])&&void 0!==o?o:"",gyouKey:e,dan:1===a?"\u3044\u6bb5":"\u3048\u6bb5"});else n.push(null)}return{inputs:n}})),F=[{headerChars:["\u3044\u3041","\u3044\u3043","\u3044\u3045","\u3044\u3047","\u3044\u3049"],targets:[{char:"\u3044\u3047",headerIndex:3,keys:["\u3042\u884c","\u3083\u3085\u3087","\u3048\u6bb5"],actualSecondKey:"\u3083\u3085\u3087"}]},{headerChars:["\u3046\u3041","\u3046\u3043","\u3046\u3045","\u3046\u3047","\u3046\u3049"],targets:[{char:"\u3046\u3043",headerIndex:1,keys:["\u3042\u884c","\u62d72","\u3044\u6bb5"],actualSecondKey:"\u3055\u884c"},{char:"\u3046\u3047",headerIndex:3,keys:["\u3042\u884c","\u62d72","\u3048\u6bb5"],actualSecondKey:"\u3055\u884c"},{char:"\u3046\u3049",headerIndex:4,keys:["\u3042\u884c","\u62d72","\u304a\u6bb5"],actualSecondKey:"\u3055\u884c"}]},{headerChars:["\u304f\u3041","\u304f\u3043","\u304f\u3045","\u304f\u3047","\u304f\u3049"],targets:[{char:"\u304f\u3041",headerIndex:0,keys:["\u304b\u884c","\u62d72","\u3042\u6bb5"],actualSecondKey:"\u3055\u884c"},{char:"\u304f\u3043",headerIndex:1,keys:["\u304b\u884c","\u62d72","\u3044\u6bb5"],actualSecondKey:"\u3055\u884c"},{char:"\u304f\u3047",headerIndex:3,keys:["\u304b\u884c","\u62d72","\u3048\u6bb5"],actualSecondKey:"\u3055\u884c"},{char:"\u304f\u3049",headerIndex:4,keys:["\u304b\u884c","\u62d72","\u304a\u6bb5"],actualSecondKey:"\u3055\u884c"}]},{headerChars:["\u3059\u3041","\u3059\u3043","\u3059\u3045","\u3059\u3047","\u3059\u3049"],targets:[{char:"\u3059\u3043",headerIndex:1,keys:["\u3055\u884c","\u62d72","\u3044\u6bb5"],actualSecondKey:"\u3055\u884c"}]},{headerChars:["\u3064\u3041","\u3064\u3043","\u3064\u3045","\u3064\u3047","\u3064\u3049"],targets:[{char:"\u3064\u3041",headerIndex:0,keys:["\u305f\u884c","\u62d72","\u3042\u6bb5"],actualSecondKey:"\u3055\u884c"},{char:"\u3064\u3043",headerIndex:1,keys:["\u305f\u884c","\u62d72","\u3044\u6bb5"],actualSecondKey:"\u3055\u884c"},{char:"\u3064\u3047",headerIndex:3,keys:["\u305f\u884c","\u62d72","\u3048\u6bb5"],actualSecondKey:"\u3055\u884c"},{char:"\u3064\u3049",headerIndex:4,keys:["\u305f\u884c","\u62d72","\u304a\u6bb5"],actualSecondKey:"\u3055\u884c"}]},{headerChars:["\u3066\u3041","\u3066\u3043","\u3066\u3045","\u3066\u3047","\u3066\u3049"],targets:[{char:"\u3066\u3043",headerIndex:1,keys:["\u305f\u884c","\u62d73","\u3044\u6bb5"],actualSecondKey:"\u307e\u884c"}]},{headerChars:["\u3068\u3041","\u3068\u3043","\u3068\u3045","\u3068\u3047","\u3068\u3049"],targets:[{char:"\u3068\u3045",headerIndex:2,keys:["\u305f\u884c","\u62d74","\u3046\u6bb5"],actualSecondKey:"\u3089\u884c"}]},{headerChars:["\u3075\u3041","\u3075\u3043","\u3075\u3045","\u3075\u3047","\u3075\u3049"],targets:[{char:"\u3075\u3041",headerIndex:0,keys:["\u306f\u884c","\u62d72","\u3042\u6bb5"],actualSecondKey:"\u3055\u884c"},{char:"\u3075\u3043",headerIndex:1,keys:["\u306f\u884c","\u62d72","\u3044\u6bb5"],actualSecondKey:"\u3055\u884c"},{char:"\u3075\u3047",headerIndex:3,keys:["\u306f\u884c","\u62d72","\u3048\u6bb5"],actualSecondKey:"\u3055\u884c"},{char:"\u3075\u3049",headerIndex:4,keys:["\u306f\u884c","\u62d72","\u304a\u6bb5"],actualSecondKey:"\u3055\u884c"}]},{headerChars:["\u30f4\u30a1","\u30f4\u30a3","\u30f4","\u30f4\u30a7","\u30f4\u30a9"],targets:[{char:"\u30f4\u30a1",headerIndex:0,keys:["\u3042\u884c","\u62d72","\u201d \xb0 \u5c0f","\u3042\u6bb5"],actualSecondKey:"\u3055\u884c",actualThirdKey:"\u201d \xb0 \u5c0f"},{char:"\u30f4\u30a3",headerIndex:1,keys:["\u3042\u884c","\u62d72","\u201d \xb0 \u5c0f","\u3044\u6bb5"],actualSecondKey:"\u3055\u884c",actualThirdKey:"\u201d \xb0 \u5c0f"},{char:"\u30f4",headerIndex:2,keys:["\u308f\u884c","\u201d \xb0 \u5c0f","\u3046\u6bb5"],actualSecondKey:"\u201d \xb0 \u5c0f"},{char:"\u30f4\u30a7",headerIndex:3,keys:["\u3042\u884c","\u62d72","\u201d \xb0 \u5c0f","\u3048\u6bb5"],actualSecondKey:"\u3055\u884c",actualThirdKey:"\u201d \xb0 \u5c0f"},{char:"\u30f4\u30a9",headerIndex:4,keys:["\u3042\u884c","\u62d72","\u201d \xb0 \u5c0f","\u304a\u6bb5"],actualSecondKey:"\u3055\u884c",actualThirdKey:"\u201d \xb0 \u5c0f"}]}],R=[{groupName:"\u8a18\u53f7\u30bb\u30c3\u30c81",chars:["@","-","_","/","\xb0"]}],D=[{groupName:"\u5f15\u7528\u7b26\u30fb\u533a\u5207\u308a",chars:["'",'"',":",";"]}],O={"tw-20h":{right:{layers:[["IME ","\u304b\u306a","\u82f1\u5b57","\u30de\u30a6\u30b9"," BS","\u5909\u63db","7","8","9","TAB",".","4","5","6","SP","0","1","2","3","ENT"],["IME","7","8","9","BS","*","4","5","6","-","/","1","2","3","","\u7d42\u4e86","0","",".","Enter"],["IME ","\u3063","\u3083\u3085\u3087","\u201d \xb0 \u5c0f"," BS","\u5909\u63db","\u3042\u884c","\u304b\u884c","\u3055\u884c","TAB","\u8a18\u53f7","\u305f\u884c","\u306a\u884c","\u306f\u884c"," SP","\u308f\u884c","\u307e\u884c","\u3084\u884c","\u3089\u884c","ENT"],["____","____","____","____","____","____","____","\u3046\u6bb5","____","____","____","\u3044\u6bb5","\u3042\u6bb5","\u3048\u6bb5","____","____","____","\u304a\u6bb5","____","____"],["IME ","____","Caps\nLock","A/a"," BS","\u5909\u63db","@ - _ \\","abc","def","TAB",". , ? !","ghi","jkl","mno"," SP","' \" : ;","pqrs","tuv","wxyz","ENT"],["____","____","____","____","____","____","","\u2462","","____","____","\u2461","\u2460","\u2463","____","____","","","","____"],["____","____","____","____","____","{","}","<",">","____","'",'"',"(",")","____",":",";","\u300c","\u300d","____"],["____","____","____","____","____","____","+","_","*","____","\u8a18\u53f7","-","@","\u30fb","____","\uffe5","&","|","%","____"],["____","____","____","____","____","____","____","?","^","____","=\n\u8a18\u53f7","\u3002","\u3001","!","____","~","$","\u2026","#","____"],["____","____","____","____","____","","\u8a18\u53f7","_","","____","","-","@","/","____","","\xb0","","","____"],["____","____","____","____","____","","",":","","____","",'"',"'",";","____","\u8a18\u53f7","","","","____"],["Undo","\u30db\u30fc\u30eb\u30c9","Redo","Del","ESC","History","Home"," \u2191 ","PgUp","S(Tab)","Paste"," \u2190 ","Start\n(Copy)","\u2192","S(SP)","Ins","End","\u2193","PgDn","ENT"],["Alt(F4)","Win+C(\u2190)","\u30db\u30fc\u30eb\u30c9","Win+C(\u2192)","ESC","Shift+F10","Alt+S(Tab)","Win(\u2191)","Alt+Tab","S(Tab)","Win+D","Win(\u2190)","Win","Win(\u2192)","S(SP)","Win+X","Win+S(T)","Win(\u2193)","Win+T","ENT"],["\u30c6\u30f3\u30ad\u30fc","","","\u30db\u30fc\u30eb\u30c9","ESC","\u66f4\u65b0","Ctl+S(Tab)","Ctl+W","Ctl+Tab","S(Tab)","\u5c65\u6b74","Ctl+L","Ctl+T","Ctl+S(T)","S(SP)","\u691c\u7d22","","","","ENT"],["","____","____","____","","","\u5de6Click"," \u2191 ","\u53f3Click","",""," \u2190 ","WHEEL"," \u2192 ","","",""," \u2193 ","",""],["","____","____","____","Ctl","",""," \u2191 ","","",""," \u2190 ","MOUSE"," \u2192 ","","",""," \u2193 ","",""]]},left:{layers:[["BS","\u304b\u306a","\u82f1\u5b57","\u30de\u30a6\u30b9","IME ","TAB","7","8","9","\u5909\u63db","SP","4","5","6",".","ENT","1","2","3","0"],["BS","7","8","9","IME","-","4","5","6","*","+","1","2","3","/","Enter","0","",".","\u7d42\u4e86"],[" BS","\u3063","\u3083\u3085\u3087","\u201d \xb0 \u5c0f","IME ","TAB","\u3042\u884c","\u304b\u884c","\u3055\u884c","\u5909\u63db"," SP","\u305f\u884c","\u306a\u884c","\u306f\u884c","\u8a18\u53f7","ENT","\u307e\u884c","\u3084\u884c","\u3089\u884c","\u308f\u884c"],["____","____","____","____","____","____","____","\u3046\u6bb5","____","____","____","\u3044\u6bb5","\u3042\u6bb5","\u3048\u6bb5","____","____","____","\u304a\u6bb5","____","____"],[" BS","____","Caps\nLock","A/a","IME ","TAB","@ - _ \\","abc","def","\u5909\u63db"," SP","ghi","jkl","mno",". , ? !","ENT","pqrs","tuv","wxyz","' \" : ;"],["____","____","____","____","____","____","","\u2462","","____","____","\u2461","\u2460","\u2463","____","____","","","","____"],["____","____","____","____","____","____","{","}","<",">","____","'",'"',"(",")","____",":",";","\u300c","\u300d"],["____","____","____","____","____","____","+","_","*","____","____","-","@","\u30fb","\u8a18\u53f7","____","&","|","%","\uffe5"],["____","____","____","____","____","____","`","?","^","____","____","\u3002","\u3001","!","=\n\u8a18\u53f7","____","$","\u2026","#","~"],["____","____","____","____","____","____","\u8a18\u53f7","_","","","____","-","@","/","","____","\xb0","","",""],["____","____","____","____","____","____","",":","","","____",'"',"'",";","","____","","","","\u8a18\u53f7"],["ESC","\u30db\u30fc\u30eb\u30c9","Redo","Del","Undo","S(Tab)","Home"," \u2191 ","PgUp","History","S(SP)"," \u2190 ","Start\n(Copy)","\u2192","Paste","ENT","End","\u2193","PgDn","Ins"],["ESC","Win+C(\u2190)","\u30db\u30fc\u30eb\u30c9","Win+C(\u2192)","Alt(F4)","S(Tab)","Alt+S(Tab)","Win(\u2191)","Alt+Tab","Shift+F10","S(SP)","Win(\u2190)","Win","Win(\u2192)","Win+D","ENT","Win+S(T)","Win(\u2193)","Win+T","Win+X"],["ESC","\u30db\u30fc\u30eb\u30c9","","","S(Tab)","Ctl+S(Tab)","Ctl+W","Ctl+Tab","\u66f4\u65b0","S(SP)","Ctl+L","Ctl+T","Ctl+S(T)","\u5c65\u6b74","ENT","","","","\u691c\u7d22"],["","____","____","____","","","\u5de6Click"," \u2191 ","\u53f3Click","",""," \u2190 ","WHEEL"," \u2192 ","","",""," \u2193 ","",""],["Ctl","____","____","____","","",""," \u2191 ","","",""," \u2190 ","MOUSE"," \u2192 ","","",""," \u2193 ","",""]]}},"tw-20v":{right:{layers:[["\u304b\u306a","\u82f1\u5b57","\u30de\u30a6\u30b9"," BS","7","8","9","TAB","4","5","6"," SP","1","2","3","ENT","0","\u5909\u63db",".","IME"],["\u7d42\u4e86","/","*","BS","7","8","9","-","4","5","6","+","1","2","3","Enter","0","",".","IME"],["\u3063","\u3083\u3085\u3087","\u201d \xb0 \u5c0f"," BS","\u3042\u884c","\u304b\u884c","\u3055\u884c","TAB","\u305f\u884c","\u306a\u884c","\u306f\u884c"," SP","\u307e\u884c","\u3084\u884c","\u3089\u884c","ENT","\u308f\u884c","\u5909\u63db","\u8a18\u53f7","IME"],["____","____","____","____","____","\u3046\u6bb5","____","____","\u3044\u6bb5","\u3042\u6bb5","\u3048\u6bb5","____","____","\u304a\u6bb5","____","____","____","____","____","____"],["____","Caps\nLock","A/a","BS","@ - _ \\","abc","def","TAB","ghi","jkl","mno"," SP","pqrs","tuv","wxyz","ENT","' \" : ;","\u5909\u63db",". , ? !","IME"],["____","____","____","____","","\u2462","","____","\u2461","\u2460","\u2463","____","","","","____","____","____","____","____"],["____","____","____","____","'","<",">","____",'"',"(",")","____",":","\u300c","\u300d","____",";","{","}","____"],["____","____","____","____","+","_","*","____","-","@","\u30fb","____","&","|","%","____","\uffe5","____","\u8a18\u53f7","____"],["____","____","____","____","`","?","^","____","\u3002","\u3001","!","____","$","\u2026","#","____","~","____","=\n\u8a18\u53f7","____"],["____","____","____","____","\u8a18\u53f7","_","","____","-","@","/","____","","\xb0","","____","","","","____"],["____","____","____","____","",":","","____",'"',"'",";","____","","","","____","\u8a18\u53f7","","","____"],["\u30db\u30fc\u30eb\u30c9","Redo","Del","ESC","Home"," \u2191 ","PgUp","S(Tab)"," \u2190 ","Start\n(Copy)","\u2192","S(SP)","End","\u2193","PgDn","ENT","Ins","Paste","History","Undo"],["Win+C(\u2190)","\u30db\u30fc\u30eb\u30c9","Win+C(\u2192)","ESC","Alt+S(Tab)","Win(\u2191)","Alt+Tab","S(Tab)","Win(\u2190)","Win","Win(\u2192)","S(SP)","Win+S(T)","Win(\u2193)","Win+T","ENT","Alt(F4)","Win+D","Win+X","Shift+F10"],["","","\u30db\u30fc\u30eb\u30c9","ESC","Ctl+S(Tab)","Ctl+W","Ctl+Tab","S(Tab)","Ctl+L","Ctl+T","Ctl+S(T)","S(SP)","","","","ENT","\u30c6\u30f3\u30ad\u30fc","\u691c\u7d22","\u66f4\u65b0","\u5c65\u6b74"],["____","____","____","","\u5de6Click"," \u2191 ","\u53f3Click",""," \u2190 ","WHEEL"," \u2192 ","",""," \u2193 ","","","","Topmost","",""],["____","____","____","Ctl",""," \u2191 ","",""," \u2190 ","MOUSE"," \u2192 ","",""," \u2193 ","","","","","",""]]},left:{layers:[["BS","\u30de\u30a6\u30b9","\u82f1\u5b57","\u304b\u306a","TAB","7","8","9","SP","4","5","6","ENT","1","2","3","IME","\u5909\u63db",".","0"],["\u7d42\u4e86","/","*","BS","7","8","9","-","4","5","6","+","1","2","3","Enter","0","",".","IME"],[" BS","\u201d \xb0 \u5c0f","\u3083\u3085\u3087","\u3063","TAB","\u3042\u884c","\u304b\u884c","\u3055\u884c"," SP","\u305f\u884c","\u306a\u884c","\u306f\u884c","ENT","\u307e\u884c","\u3084\u884c","\u3089\u884c","IME","\u5909\u63db","\u8a18\u53f7","\u308f\u884c"],["____","____","____","____","____","____","\u3046\u6bb5","____","____","\u3044\u6bb5","\u3042\u6bb5","\u3048\u6bb5","____","____","\u304a\u6bb5","____","____","____","____","____"],[" BS","A/a","Caps\nLock","____","TAB","@ - _ \\","abc","def"," SP","ghi","jkl","mno","ENT","pqrs","tuv","wxyz","IME","\u5909\u63db",". , ? !","' \" : ;"],["____","____","____","____","____","","\u2462","","____","\u2461","\u2460","\u2463","____","","","","____","____","____","____"],["____","____","____","____","____","'","<",">","____",'"',"(",")","____",":","\u300c","\u300d","____",";","{","}"],["____","____","____","____","____","+","_","*","____","-","@","\u30fb","____","&","|","%","____","____","\u8a18\u53f7","\uffe5"],["____","____","____","____","____","`","?","^","____","\u3002","\u3001","!","____","$","\u2026","#","____","____","=\n\u8a18\u53f7","~"],["____","____","____","____","____","\u8a18\u53f7","_","","____","-","@","/","____","","\xb0","","____","","",""],["____","____","____","____","____","",":","","____",'"',"'",";","____","","","","____","","","\u8a18\u53f7"],["ESC","Del","Redo","\u30db\u30fc\u30eb\u30c9","S(Tab)","Home"," \u2191 ","PgUp","S(SP)"," \u2190 ","Start\n(Copy)","\u2192","ENT","End","\u2193","PgDn","Undo","Ins","Paste","History"],["ESC","Win+C(\u2190)","\u30db\u30fc\u30eb\u30c9","Win+C(\u2192)","S(Tab)","Alt+S(Tab)","Win(\u2191)","Alt+Tab","S(SP)","Win(\u2190)","Win","Win(\u2192)","ENT","Win+S(T)","Win(\u2193)","Win+T","Shift+F10","Alt(F4)","Win+D","Win+X"],["ESC","\u30db\u30fc\u30eb\u30c9","","","S(Tab)","Ctl+S(Tab)","Ctl+W","Ctl+Tab","S(SP)","Ctl+L","Ctl+T","Ctl+S(T)","ENT","","","","\u5c65\u6b74","\u691c\u7d22","\u66f4\u65b0","\u30c6\u30f3\u30ad\u30fc"],["","____","____","____","","\u5de6Click"," \u2191 ","\u53f3Click",""," \u2190 ","WHEEL"," \u2192 ","",""," \u2193 ","","","","Topmost",""],["Ctl","____","____","____","",""," \u2191 ","",""," \u2190 ","MOUSE"," \u2192 ","",""," \u2193 ","","","","",""]]}}},j=["\u57fa\u672c\u30ec\u30a4\u30a2\u30a6\u30c8","\u30c6\u30f3\u30ad\u30fc\u30e2\u30fc\u30c9","\u304b\u306a\u30e2\u30fc\u30c9\uff08\u30b9\u30bf\u30fc\u30c8\uff09","\u304b\u306a\u30e2\u30fc\u30c9\uff08\u30a8\u30f3\u30c9\uff09","\u82f1\u5b57\u30e2\u30fc\u30c9\uff08\u30b9\u30bf\u30fc\u30c8\uff09","\u82f1\u5b57\u30e2\u30fc\u30c9\uff08\u30a8\u30f3\u30c9\uff09","\u8a18\u53f7\u30fb\u9577\u62bc\u3057","\u8a18\u53f7\u30fb\u5f8c\u62bc\u3057","\u8a18\u53f7\u30fb\u5148\u62bc\u3057","\u82f1\u5b57\u30e2\u30fc\u30c9\u8a18\u53f71","\u82f1\u5b57\u30e2\u30fc\u30c9\u8a18\u53f72","\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c81","\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c82","\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c83","\u30de\u30a6\u30b9\u30e2\u30fc\u30c9","\u30db\u30a4\u30fc\u30eb\u30e2\u30fc\u30c9"],H={"\u3042\u884c":"\uff0b","\u304b\u884c":"\uff3f","\u3055\u884c":"\uff0a","\u305f\u884c":"\u30fc","\u306a\u884c":"\uff20","\u306f\u884c":"\u30fb","\u307e\u884c":"\uff06","\u3084\u884c":"\uff5c","\u3089\u884c":"\uff05","\u308f\u884c":"\uffe5"},V={0:"`",1:"\uff5e",2:"!",3:"@",4:"#",5:"$",6:"%",7:"^",8:"&",9:"*",10:"(",11:")",12:"-",13:"_",14:"=",15:"+",16:"[",17:"]",18:"\uff1d\n\u8a18\u53f7",19:"|"},B={"tw-20h":{right:{0:"IME",1:"\u3063",2:"\u3083\u3085\u3087",3:"\u201d \xb0 \u5c0f",4:"BS",5:"\u5909\u63db",9:"TAB",14:"SP",19:"ENT"},left:{0:"BS",1:"\u3063",2:"\u3083\u3085\u3087",3:"\u201d \xb0 \u5c0f",4:"IME",5:"TAB",9:"\u5909\u63db",10:"SP",15:"ENT"}},"tw-20v":{right:{0:"\u3063",1:"\u3083\u3085\u3087",2:"\u201d \xb0 \u5c0f",3:"BS",7:"TAB",11:"SP",15:"ENT",17:"\u5909\u63db",18:"\u8a18\u53f7",19:"IME"},left:{0:"BS",1:"\u201d \xb0 \u5c0f",2:"\u3083\u3085\u3087",3:"\u3063",4:"TAB",8:"SP",12:"ENT",16:"IME",17:"\u5909\u63db",18:"\u8a18\u53f7"}}},U=["\u304d\u3087\u3046\u306f\u3044\u3044\u3066\u3093\u304d\u3067\u3059\u306d\u3002","\u308f\u305f\u3057\u306e\u306a\u307e\u3048\u306f\u3055\u3068\u3046\u3067\u3059\u3002","\u3053\u308c\u306f\u307a\u3093\u3067\u3059\u3002","\u3064\u304f\u3048\u306e\u3046\u3048\u306b\u308a\u3093\u3054\u304c\u3042\u308a\u307e\u3059\u3002","\u304d\u306e\u3046\u3001\u3068\u3082\u3060\u3061\u3068\u3048\u3044\u304c\u3092\u307f\u307e\u3057\u305f\u3002","\u3071\u305d\u3053\u3093\u306e\u3061\u3087\u3046\u3057\u304c\u308f\u308b\u3044\u3002","\u3082\u3063\u3068\u3086\u3063\u304f\u308a\u306f\u306a\u3057\u3066\u304f\u3060\u3055\u3044\u3002","\u3067\u3093\u3057\u3083\u304c\u304a\u304f\u308c\u3066\u3044\u307e\u3059\u3002","\u3057\u3085\u304f\u3060\u3044\u3092\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002","\u304e\u3085\u3046\u306b\u3085\u3046\u3092\u304b\u3063\u3066\u304d\u3066\u304f\u3060\u3055\u3044\u3002","\u3042\u3055\u3054\u306f\u3093\u3092\u305f\u3079\u307e\u3057\u305f\u3002","\u306d\u3053\u304c\u306b\u308f\u3067\u3042\u305d\u3093\u3067\u3044\u308b\u3002","\u304d\u3087\u3046\u306f\u3044\u3044\u3066\u3093\u304d\u3067\u3059\u3002","\u3068\u3082\u3060\u3061\u3068\u3048\u3044\u304c\u3092\u307f\u305f\u3002","\u307b\u3093\u3092\u3088\u3080\u306e\u304c\u3059\u304d\u3067\u3059\u3002","\u3046\u307f\u3078\u3044\u3063\u3066\u3059\u306a\u3042\u305d\u3073\u3002","\u3055\u304f\u3089\u304c\u304d\u308c\u3044\u306b\u3055\u304d\u307e\u3057\u305f\u3002","\u304f\u3064\u3092\u305d\u308d\u3048\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002","\u3067\u3093\u3057\u3083\u306b\u306e\u3063\u3066\u304c\u3063\u3053\u3046\u3078\u3002","\u308a\u3093\u3054\u3092\u3072\u3068\u3064\u305f\u3079\u307e\u3057\u305f\u3002","\u3042\u3081\u304c\u3075\u3063\u3066\u3044\u308b\u306e\u3067\u304b\u3055\u3092\u3082\u3064\u3002","\u3044\u306c\u3068\u3055\u3093\u307d\u306b\u3067\u304b\u3051\u305f\u3002","\u304b\u305e\u304f\u3068\u3044\u3063\u3057\u3087\u306b\u3054\u306f\u3093\u3002","\u3066\u304c\u307f\u3092\u304b\u3044\u3066\u3068\u3082\u3060\u3061\u306b\u304a\u304f\u308b\u3002","\u305b\u3093\u305b\u3044\u306e\u306f\u306a\u3057\u3092\u3088\u304f\u304d\u304f\u3002","\u304f\u3046\u3053\u3046\u307e\u3067\u3067\u3093\u3057\u3083\u3067\u3044\u304d\u307e\u3059\u3002","\u3053\u3069\u3082\u305f\u3061\u304c\u3053\u3046\u3048\u3093\u3067\u3042\u305d\u3076\u3002","\u307f\u305a\u3092\u306e\u3093\u3067\u306e\u3069\u3092\u3046\u308b\u304a\u3059\u3002","\u3072\u308b\u3084\u3059\u307f\u306b\u307b\u3093\u3092\u3088\u3093\u3060\u3002","\u3048\u3093\u3074\u3064\u3092\u3064\u304b\u3063\u3066\u304b\u304d\u307e\u3057\u305f\u3002","\u3046\u307f\u306e\u3044\u308d\u306f\u3042\u304a\u3044\u3067\u3059\u3002","\u305d\u3089\u306b\u3068\u308a\u304c\u3068\u3093\u3067\u3044\u308b\u3002","\u304a\u3061\u3083\u3092\u306e\u307f\u306a\u304c\u3089\u306f\u306a\u3057\u3092\u3059\u308b\u3002","\u304b\u3055\u3092\u308f\u3059\u308c\u305f\u306e\u3067\u306c\u308c\u305f\u3002","\u3044\u3048\u306e\u307e\u3048\u306b\u304d\u308c\u3044\u306a\u306f\u306a\u304c\u3055\u304f\u3002","\u305b\u3093\u305f\u304f\u3082\u306e\u304c\u304b\u308f\u304d\u307e\u3057\u305f\u3002","\u3058\u3066\u3093\u3057\u3083\u306b\u306e\u3063\u3066\u3055\u3093\u307d\u3059\u308b\u3002","\u304d\u306e\u3057\u305f\u3067\u3084\u3059\u3093\u3067\u3044\u307e\u3059\u3002","\u3053\u3044\u306c\u304c\u304b\u308f\u3044\u3044\u3053\u3048\u3067\u306a\u304f\u3002","\u307e\u3069\u3092\u3042\u3051\u3066\u304b\u305c\u3092\u3044\u308c\u308b\u3002","\u304b\u305e\u304f\u3067\u3048\u3044\u304c\u304b\u3093\u3078\u3044\u304d\u307e\u3057\u305f\u3002","\u3072\u3053\u3046\u304d\u304c\u305d\u3089\u3092\u3068\u3093\u3067\u3044\u308b\u3002","\u304b\u308c\u306f\u3084\u3055\u3057\u3044\u305b\u3093\u305b\u3044\u3067\u3059\u3002","\u307e\u3044\u306b\u3061\u3079\u3093\u304d\u3087\u3046\u3092\u304c\u3093\u3070\u308b\u3002","\u3059\u3044\u304b\u3092\u305f\u3079\u3066\u3042\u3058\u3092\u305f\u306e\u3057\u3080\u3002","\u3072\u308b\u3054\u306f\u3093\u306f\u304a\u306b\u304e\u308a\u3067\u3057\u305f\u3002","\u304d\u3087\u3046\u306f\u306b\u3061\u3088\u3046\u3073\u3067\u3084\u3059\u307f\u3002","\u3055\u304b\u306a\u3064\u308a\u306b\u3044\u304d\u305f\u3044\u3067\u3059\u3002","\u3067\u3093\u308f\u3067\u3068\u3082\u3060\u3061\u3068\u306f\u306a\u3057\u305f\u3002","\u3048\u304c\u304a\u3067\u3042\u3044\u3055\u3064\u3057\u307e\u3057\u3087\u3046\u3002","\u3042\u3055\u306e\u3055\u3093\u307d\u306f\u304d\u3082\u3061\u3044\u3044\u3002","\u3053\u3069\u3082\u304c\u306b\u3053\u306b\u3053\u308f\u3089\u3063\u3066\u3044\u308b\u3002","\u304d\u3087\u3046\u306f\u3042\u3064\u3044\u306e\u3067\u307f\u305a\u3092\u306e\u3080\u3002","\u307b\u3093\u3060\u306a\u306b\u305f\u304f\u3055\u3093\u306e\u307b\u3093\u304c\u3042\u308b\u3002","\u3057\u308d\u3044\u304f\u3082\u304c\u305d\u3089\u306b\u3046\u304b\u3076\u3002","\u304b\u3044\u3082\u306e\u306b\u3044\u3063\u3066\u304f\u3060\u3082\u306e\u3092\u304b\u3063\u305f\u3002","\u3067\u3093\u304d\u304c\u304d\u3048\u3066\u307e\u3063\u304f\u3089\u306b\u306a\u3063\u305f\u3002","\u3044\u306c\u304c\u3057\u3063\u307d\u3092\u3075\u3063\u3066\u3088\u308d\u3053\u3076\u3002","\u307e\u3069\u304b\u3089\u305d\u3068\u3092\u307f\u3066\u3044\u308b\u3002","\u307f\u3093\u306a\u3067\u3044\u3063\u3057\u3087\u306b\u3046\u305f\u3092\u3046\u305f\u3046\u3002","\u304d\u3087\u3046\u306f\u306f\u308c\u3067\u3055\u3093\u307d\u306b\u3074\u3063\u305f\u308a\u3002","\u304b\u3055\u3092\u3055\u3057\u3066\u3042\u308b\u3044\u3066\u3044\u304f\u3002","\u3053\u3069\u3082\u305f\u3061\u304c\u3053\u3046\u3048\u3093\u3067\u3055\u308f\u3050\u3002","\u307e\u3044\u3042\u3055\u3053\u3046\u3061\u3083\u3092\u306e\u307f\u307e\u3059\u3002","\u3072\u3053\u3046\u304d\u304c\u306f\u3084\u304f\u305d\u3089\u3092\u306f\u3057\u308b\u3002","\u305b\u3093\u305b\u3044\u304c\u3084\u3055\u3057\u304f\u304a\u3057\u3048\u3066\u304f\u308c\u308b\u3002","\u307f\u305a\u3046\u307f\u3067\u307c\u30fc\u3068\u306b\u306e\u3063\u305f\u3002","\u304d\u3087\u3046\u306f\u306b\u3093\u3058\u3093\u3092\u305f\u3079\u307e\u3057\u305f\u3002","\u306d\u3053\u304c\u3072\u308b\u306d\u3092\u3057\u3066\u3044\u308b\u3002","\u308a\u3093\u3054\u306e\u3042\u3058\u306f\u3042\u307e\u304f\u3066\u304a\u3044\u3057\u3044\u3002","\u307e\u3069\u3092\u3057\u3081\u3066\u3078\u3084\u3092\u3042\u305f\u305f\u3081\u308b\u3002","\u304f\u3064\u3057\u305f\u3092\u306f\u3044\u3066\u3055\u3093\u307d\u3059\u308b\u3002","\u3053\u3046\u3048\u3093\u3067\u3044\u306c\u3068\u3042\u305d\u3076\u3002","\u3057\u305c\u3093\u306e\u306a\u304b\u3067\u304d\u3082\u3061\u3088\u304f\u3059\u3054\u3059\u3002","\u3053\u3069\u3082\u305f\u3061\u306f\u3052\u3093\u304d\u306b\u3042\u305d\u3076\u3002","\u304d\u3087\u3046\u306f\u3059\u3053\u3057\u3055\u3080\u3044\u3067\u3059\u3002","\u307b\u3093\u3092\u3088\u3093\u3067\u3057\u3089\u3079\u3082\u306e\u3092\u3059\u308b\u3002","\u3048\u3093\u3074\u3064\u3067\u3048\u3092\u304b\u304f\u306e\u304c\u3059\u304d\u3002","\u307e\u3044\u306b\u3061\u304c\u3093\u3070\u3063\u3066\u3079\u3093\u304d\u3087\u3046\u3059\u308b\u3002","\u305d\u3089\u306f\u3042\u304a\u304f\u3066\u304d\u308c\u3044\u3067\u3059\u3002","\u304b\u305e\u304f\u3067\u3074\u304f\u306b\u3063\u304f\u306b\u3044\u304d\u307e\u3057\u305f\u3002","\u3046\u307f\u306e\u305d\u3070\u3067\u304a\u3088\u304e\u307e\u3057\u305f\u3002","\u306d\u3053\u304c\u3042\u305f\u3089\u3057\u3044\u304a\u3082\u3061\u3083\u3067\u3042\u305d\u3076\u3002","\u304d\u3087\u3046\u306f\u306b\u304f\u3058\u3083\u304c\u3092\u3064\u304f\u308a\u307e\u3057\u305f\u3002","\u3067\u3093\u3057\u3083\u306b\u306e\u3063\u3066\u3068\u3082\u3060\u3061\u306b\u3042\u3046\u3002","\u307e\u3069\u304b\u3089\u307f\u3048\u308b\u306f\u306a\u3073\u3089\u304c\u3086\u308c\u3066\u3044\u308b\u3002","\u3053\u3069\u3082\u304c\u3046\u308c\u3057\u305d\u3046\u306b\u308f\u3089\u3046\u3002","\u3072\u308b\u3084\u3059\u307f\u306b\u304a\u306b\u304e\u308a\u3092\u305f\u3079\u308b\u3002","\u304d\u3087\u3046\u306f\u306f\u308c\u305f\u306e\u3067\u3055\u3093\u307d\u3057\u305f\u3002","\u304b\u3055\u3092\u3082\u3063\u3066\u3067\u304b\u3051\u307e\u3057\u305f\u3002","\u305b\u3093\u305b\u3044\u304c\u3084\u3055\u3057\u304f\u3053\u305f\u3048\u3066\u304f\u308c\u305f\u3002","\u307f\u305a\u3092\u305f\u304f\u3055\u3093\u306e\u3093\u3067\u306e\u3069\u3092\u3046\u308b\u304a\u3059\u3002","\u307b\u3093\u3060\u306a\u304b\u3089\u307b\u3093\u3092\u3068\u3063\u3066\u3088\u3080\u3002","\u306d\u3053\u304c\u3042\u3055\u3072\u3092\u3042\u3073\u3066\u3044\u308b\u3002","\u304d\u3087\u3046\u306f\u306b\u3061\u3088\u3046\u3073\u3067\u3084\u3059\u307f\u3067\u3059\u3002","\u3053\u3069\u3082\u305f\u3061\u304c\u306b\u304e\u3084\u304b\u306b\u3042\u305d\u3076\u3002","\u307e\u3044\u306b\u3061\u3059\u3053\u3057\u305a\u3064\u308c\u3093\u3057\u3085\u3046\u3059\u308b\u3002","\u305d\u3089\u306b\u304f\u3082\u304c\u3046\u3064\u304f\u3057\u304f\u3046\u304b\u3076\u3002","\u3048\u304c\u304a\u3067\u3042\u3044\u3055\u3064\u3092\u304b\u308f\u3059\u3002","\u304d\u3087\u3046\u306f\u3059\u305a\u3057\u3044\u306e\u3067\u3055\u3093\u307d\u306b\u3067\u308b\u3002","\u304b\u305e\u304f\u3067\u3044\u3063\u3057\u3087\u306b\u3054\u306f\u3093\u3092\u305f\u3079\u308b\u3002","\u306d\u3053\u304c\u3075\u308f\u3075\u308f\u306e\u307e\u304f\u3089\u3067\u306d\u3080\u308b\u3002","\u304d\u3087\u3046\u306f\u3042\u3081\u304c\u3075\u3063\u3066\u3044\u308b\u3002","\u3068\u3082\u3060\u3061\u3068\u3044\u3063\u3057\u3087\u306b\u3048\u3044\u304c\u3092\u307f\u305f\u3002","\u307b\u3093\u3092\u3088\u3080\u306e\u304c\u305f\u306e\u3057\u3044\u3067\u3059\u3002","\u3046\u307f\u3078\u3044\u3063\u3066\u3059\u306a\u3042\u305d\u3073\u3092\u3057\u305f\u3002","\u3055\u304f\u3089\u306e\u306f\u306a\u304c\u304d\u308c\u3044\u306b\u3055\u304f\u3002","\u304f\u3064\u3092\u305d\u308d\u3048\u3066\u304a\u304f\u3068\u304d\u3082\u3061\u3044\u3044\u3002","\u3067\u3093\u3057\u3083\u306b\u306e\u3063\u3066\u304c\u3063\u3053\u3046\u3078\u3044\u304f\u3002","\u308a\u3093\u3054\u3092\u3072\u3068\u3064\u304a\u3044\u3057\u304f\u305f\u3079\u305f\u3002"],G=["The weather is nice today, isn't it?","My name is Sato.","This is a pen.","There is an apple on the desk.","Yesterday I watched 2 movies with my friend.","My computer is acting up.","Please speak more slowly.","The train is delayed by 10 minutes.","I have to do 3 homework assignments.","Please buy 2 liters of milk.","I ate breakfast at 7:00.","The cat is playing in the yard.","It's 25\xb0C and nice weather today.","I watched a movie with my friend.","I like reading books.","I went to the beach and built 2 sandcastles.","The cherry blossoms have bloomed beautifully.","Let's line up our shoes neatly.","I took the train to school at 8:15.","I ate one apple.","It's raining, so I'll bring 1 umbrella.","I went for a 5-kilometer walk with the dog.","I had dinner with 4 family members.","I wrote a letter and sent it to my friend.","I listen carefully to the teacher.","I'll go to the airport by train in 30 minutes.","Children are playing in the park.","I drank 500 ml of water to moisten my throat.","I read 20 pages of a book during lunch break.","I wrote with a pencil.","The sea is 30 meters deep here.","A bird is flying in the sky.","We talk while drinking tea.","I forgot my umbrella and got soaked after 2 blocks.","Beautiful flowers bloom in front of the house.","The laundry dried in 1 hour.","I rode my bicycle for a 10-minute stroll.","I'm resting under the tree.","The puppy cries in a cute voice.","I opened 2 windows to let in some air.","My family went to the cinema.","An airplane is flying at 9000 m in the sky.","He is a kind teacher.","I study hard for 3 hours every day.","I ate watermelon and enjoyed the taste.","Lunch was 2 rice balls.","Today is Sunday and it's a day off.","I want to catch 6 fish.","I talked with my friend on the phone.","Let's greet each other with a smile.","A morning walk feels good.","The child is smiling happily.","It's 32\xb0C today, so I'll drink water.","There are 120 books on the bookshelf.","White clouds are floating in the sky.","I went shopping and bought 3 kinds of fruit.","The lights went out for 5 seconds and it became pitch-dark.","The dog wags its tail happily.","I'm looking outside from the window.","We all sang 2 songs together.","It's sunny today\u2014perfect for a walk.","I walk with an umbrella.","About 15 children are making noise in the park.","I drink black tea every morning.","The airplane covered 500 km quickly.","The teacher kindly teaches me.","I rode a boat on the lake.","Today I ate 3 carrots.","The cat is taking a nap.","The apple tastes sweet and delicious.","I closed the window for 30 minutes to warm the room.","I put on socks and went for a walk.","I played with a dog in the park.","I feel good in nature.","The children are playing energetically.","It's only 12\xb0C and a little cold today.","I read a book to look something up.","I like drawing pictures with a pencil.","I study 5 new words every day.","The sky is blue and beautiful.","My family went on a picnic.","I swam near the sea.","The cat plays with its 3 new toys.","I made nikujaga today.","I took the train to meet a friend.","The petals I can see from the window are swaying.","The child laughs happily.","I ate rice balls during lunch break.","It was sunny today, so I took a walk.","I went out with an umbrella.","The teacher kindly answered me.","I drank plenty of water to moisten my throat.","I took a book from the shelf and read it.","The cat is basking in the morning sun.","I have 2 days off because today is Sunday.","Children are playing cheerfully.","I practice a little every day.","Beautiful clouds drift in the sky.","We exchange greetings with smiles.","It's cool today, so I'll go for a walk."];function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function W(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z(t)?t:t+""}function Y(e,t,n){return(t=W(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q,X;const Z=e=>e?e.replace(/[\uff01-\uff5e]/g,(e=>String.fromCharCode(e.charCodeAt(0)-65248))).replace(/\u3000/g," "):"",J={1:"IME",21:"IME",2:"\u3063",22:"\u3063",3:"\u3083\u3085\u3087",23:"\u3083\u3085\u3087",4:"\u201d \xb0 \u5c0f",24:"\u201d \xb0 \u5c0f",5:"BS",25:"BS",6:"\u5909\u63db",26:"\u5909\u63db",7:"\u3042\u884c",27:"\u3042\u884c",8:"\u304b\u884c",28:"\u304b\u884c",9:"\u3055\u884c",29:"\u3055\u884c",10:"TAB",30:"TAB",11:"\u8a18\u53f7",31:"\u8a18\u53f7",12:"\u305f\u884c",32:"\u305f\u884c",13:"\u306a\u884c",33:"\u306a\u884c",14:"\u306f\u884c",34:"\u306f\u884c",15:"SP",35:"SP",16:"\u308f\u884c",36:"\u308f\u884c",17:"\u307e\u884c",37:"\u307e\u884c",18:"\u3084\u884c",38:"\u3084\u884c",19:"\u3089\u884c",39:"\u3089\u884c",20:"ENT",40:"ENT"},ee={6:"{",7:"}",8:"<",9:">",11:"'",12:'"',13:"(",14:")",16:":",17:";",18:"\u300c",19:"\u300d"},te={8:"\u3046\u6bb5",28:"\u3046\u6bb5",12:"\u3044\u6bb5",32:"\u3044\u6bb5",13:"\u3042\u6bb5",33:"\u3042\u6bb5",14:"\u3048\u6bb5",34:"\u3048\u6bb5",18:"\u304a\u6bb5",38:"\u304a\u6bb5"},ne={1:"BS",21:"BS",2:"\u3063",22:"\u3063",3:"\u3083\u3085\u3087",23:"\u3083\u3085\u3087",4:"\u201d \xb0 \u5c0f",24:"\u201d \xb0 \u5c0f",5:"IME",25:"IME",6:"TAB",26:"TAB",7:"\u3042\u884c",27:"\u3042\u884c",8:"\u304b\u884c",28:"\u304b\u884c",9:"\u3055\u884c",29:"\u3055\u884c",10:"\u5909\u63db",30:"\u5909\u63db",11:"SP",31:"SP",12:"\u305f\u884c",32:"\u305f\u884c",13:"\u306a\u884c",33:"\u306a\u884c",14:"\u306f\u884c",34:"\u306f\u884c",15:"\u8a18\u53f7",35:"\u8a18\u53f7",16:"ENT",36:"ENT",17:"\u307e\u884c",37:"\u307e\u884c",18:"\u3084\u884c",38:"\u3084\u884c",19:"\u3089\u884c",39:"\u3089\u884c",20:"\u308f\u884c",40:"\u308f\u884c"},re={19:"{",20:"}",7:"<",8:">",6:"'",10:'"',11:"(",12:")",14:":",18:";",15:"\u300c",16:"\u300d"},oe={8:"\u3046\u6bb5",28:"\u3046\u6bb5",12:"\u3044\u6bb5",32:"\u3044\u6bb5",13:"\u3042\u6bb5",33:"\u3042\u6bb5",14:"\u3048\u6bb5",34:"\u3048\u6bb5",18:"\u304a\u6bb5",38:"\u304a\u6bb5"},ae={1:"\u3063",21:"\u3063",2:"\u3083\u3085\u3087",22:"\u3083\u3085\u3087",3:"\u201d \xb0 \u5c0f",23:"\u201d \xb0 \u5c0f",4:"BS",24:"BS",5:"\u3042\u884c",25:"\u3042\u884c",6:"\u304b\u884c",26:"\u304b\u884c",7:"\u3055\u884c",27:"\u3055\u884c",8:"TAB",28:"TAB",9:"\u305f\u884c",29:"\u305f\u884c",10:"\u306a\u884c",30:"\u306a\u884c",11:"\u306f\u884c",31:"\u306f\u884c",12:"SP",32:"SP",13:"\u307e\u884c",33:"\u307e\u884c",14:"\u3084\u884c",34:"\u3084\u884c",15:"\u3089\u884c",35:"\u3089\u884c",16:"ENT",36:"ENT",17:"\u308f\u884c",37:"\u308f\u884c",18:"\u5909\u63db",38:"\u5909\u63db",19:"\u8a18\u53f7",39:"\u8a18\u53f7",20:"IME",40:"IME"},ie={6:"\u3046\u6bb5",26:"\u3046\u6bb5",9:"\u3044\u6bb5",29:"\u3044\u6bb5",10:"\u3042\u6bb5",30:"\u3042\u6bb5",11:"\u3048\u6bb5",31:"\u3048\u6bb5",14:"\u304a\u6bb5",34:"\u304a\u6bb5"},le={19:"}",6:"<",7:">",5:"'",9:'"',10:"(",11:")",18:"{",17:";",14:"\u300c",15:"\u300d",13:":"},se={1:"BS",21:"BS",2:"\u201d \xb0 \u5c0f",22:"\u201d \xb0 \u5c0f",3:"\u3083\u3085\u3087",23:"\u3083\u3085\u3087",4:"\u3063",24:"\u3063",5:"TAB",25:"TAB",6:"\u3042\u884c",26:"\u3042\u884c",7:"\u304b\u884c",27:"\u304b\u884c",8:"\u3055\u884c",28:"\u3055\u884c",9:"SP",29:"SP",10:"\u305f\u884c",30:"\u305f\u884c",11:"\u306a\u884c",31:"\u306a\u884c",12:"\u306f\u884c",32:"\u306f\u884c",13:"ENT",33:"ENT",14:"\u307e\u884c",34:"\u307e\u884c",15:"\u3084\u884c",35:"\u3084\u884c",16:"\u3089\u884c",36:"\u3089\u884c",17:"IME",37:"IME",18:"\u5909\u63db",38:"\u5909\u63db",19:"\u8a18\u53f7",39:"\u8a18\u53f7",20:"\u308f\u884c",40:"\u308f\u884c"},ue={7:"\u3046\u6bb5",27:"\u3046\u6bb5",10:"\u3044\u6bb5",30:"\u3044\u6bb5",11:"\u3042\u6bb5",31:"\u3042\u6bb5",12:"\u3048\u6bb5",32:"\u3048\u6bb5",15:"\u304a\u6bb5",35:"\u304a\u6bb5"},ce={19:"{",20:"}",7:"<",8:">",6:"'",10:'"',11:"(",12:")",14:":",18:";",15:"\u300c",16:"\u300d"},de=a.flatMap((e=>{var t,n;return null!==(t=null===(n=l[e])||void 0===n?void 0:n.map(((t,n)=>{var r;const o=null===(r=s[e])||void 0===r?void 0:r[n];let a;return"\u3084\u884c"===e?0===n?a="\u3042\u6bb5":1===n?a="\u3046\u6bb5":2===n&&(a="\u304a\u6bb5"):a=i[n],a&&o?{type:"seion",char:o,gyouKey:e,danKey:a}:null})).filter((e=>null!==e)))&&void 0!==t?t:[]})),he=u.flatMap((e=>{var t,n;return null!==(t=null===(n=d[e])||void 0===n?void 0:n.map(((t,n)=>{var r,o;return{type:"youon",char:null!==(r=null===(o=c[e])||void 0===o?void 0:o[n])&&void 0!==r?r:"?",gyouKey:e,danKey:t}})).filter((e=>"?"!==e.char)))&&void 0!==t?t:[]})),fe=h.flatMap((e=>{var t,n;return null!==(t=null===(n=p[e])||void 0===n?void 0:n.map(((t,n)=>{var r,o;return{type:"dakuon",char:null!==(r=null===(o=f[e])||void 0===o?void 0:o[n])&&void 0!==r?r:"?",gyouKey:e,danKey:t}})).filter((e=>"?"!==e.char)))&&void 0!==t?t:[]})),pe=null!==(Q=null===(X=m["\u306f\u884c"])||void 0===X?void 0:X.map(((e,t)=>{var n,r;return{type:"handakuon",char:null!==(n=null===(r=y["\u306f\u884c"])||void 0===r?void 0:r[t])&&void 0!==n?n:"?",gyouKey:"\u306f\u884c",danKey:e}})).filter((e=>"?"!==e.char)))&&void 0!==Q?Q:[],ge=v.flatMap((e=>e.chars.map(((t,n)=>{const r=e.inputs[n],o="\u3063"===t;return{type:"sokuonKomoji",char:t,isTsu:o,gyouKey:o||null===r||void 0===r?void 0:r.gyouKey,middleKey:o||null===r||void 0===r?void 0:r.middleKey,danKey:o||null===r||void 0===r?void 0:r.danKey}})))),ye=b.flatMap((e=>e.chars.map(((t,n)=>({type:"kigo1",char:t,keyName:e.inputs[n].keyName}))))),me=x.flatMap((e=>e.chars.map(((t,n)=>({type:"kigo2",char:t,gyouKey:e.inputs[n].gyouKey}))))),ve=C.flatMap((e=>e.chars.map(((t,n)=>{const r="="===t;return{type:"kigo3",char:t,isEqualSign:r,gyouKey:r?void 0:e.inputs[n].gyouKey}})))),be=F.flatMap((e=>e.targets.map((e=>({type:"gairaigo",char:e.char,keys:e.keys,actualSecondKey:e.actualSecondKey}))))),xe=T.flatMap((e=>e.chars.map(((t,n)=>({type:"youhandakuon",char:t,inputDef:e.inputs[n]}))))),Ce=k.flatMap((e=>e.chars.map(((t,n)=>({type:"youdakuon",char:t,inputDef:e.inputs[n]}))))),ke=(M.flatMap((e=>e.inputs.filter((e=>null!==e)).map((e=>({type:"youonKakucho",char:e.char,inputDef:e}))))),["@","-","_","/","\xb0"].map((e=>({type:"alphaSymbol1",char:e,layerIndex:9})))),Se=["'",'"',":",";"].map((e=>({type:"alphaSymbol2",char:e,layerIndex:10}))),we=(e,t,n,r)=>{var o,a;if(!e)return[];const i=[],l=null!==(o=null===(a=B[n])||void 0===a?void 0:a[r])&&void 0!==o?o:{};return t.forEach(((t,n)=>{t.forEach(((t,n)=>{var r;const o=(null!==t&&void 0!==t?t:"").trim(),a=n+1,s=null!==(r=l[n])&&void 0!==r?r:o;("\u3083\u3085\u3087"===e&&"\u3083\u3085\u3087"===s||s===e)&&i.push(a)}))})),Array.from(new Set(i))},_e=(e,t,n)=>"tw-20v"===t?"right"===n?ae[e]:se[e]:"right"===n?J[e]:ne[e],Ie=(e,t,n)=>"tw-20v"===t?"right"===n?ie[e]:ue[e]:"right"===n?te[e]:oe[e],Te=e=>{let{gIdx:t,dIdx:n,isActive:o,side:u,kb:c,isRandomMode:d}=e;const[h,f]=(0,r.useState)(t),[p,g]=(0,r.useState)(n),[y,m]=(0,r.useState)(null),[v,b]=(0,r.useState)("gyouInput"),[x,C]=(0,r.useState)(null),[k,S]=(0,r.useState)(null),w=(0,r.useRef)(h),_=(0,r.useRef)(p),I=(0,r.useRef)(!0),T=(0,r.useRef)(o),E=(0,r.useRef)(d),N=(0,r.useMemo)((()=>{var e;return o?d?null!==(e=null===x||void 0===x?void 0:x.gyouKey)&&void 0!==e?e:null:h<0||h>=a.length?null:a[h]:null}),[o,d,x,h]),P=(0,r.useMemo)((()=>{var e;if(!o)return null;if(d)return null!==(e=null===x||void 0===x?void 0:x.danKey)&&void 0!==e?e:null;if(h<0||h>=a.length)return null;const t=a[h];if("\u3084\u884c"===t)return 0===p?"\u3042\u6bb5":1===p?"\u3046\u6bb5":2===p?"\u304a\u6bb5":null;const n=s[t];if(!n||p<0||p>=n.length)return null;const r=n[p],u=l[t];if(!u)return null;const c=u.indexOf(r);return-1===c||c>=i.length?null:i[c]}),[o,d,x,h,p]),A=(0,r.useCallback)((()=>{if(!o)return m(null),C(null),void b("gyouInput");if(d){const e=[];if(a.forEach((t=>{const n=s[t];n&&n.forEach((n=>{let r=null;if("\u3084\u884c"===t)"\u3084"===n?r="\u3042\u6bb5":"\u3086"===n?r="\u3046\u6bb5":"\u3088"===n&&(r="\u304a\u6bb5");else{const e=l[t];if(e){const t=e.indexOf(n);-1!==t&&t<i.length&&(r=i[t])}}r&&e.push({char:n,gyouKey:t,danKey:r})}))})),e.length>0){const t=Math.floor(Math.random()*e.length),n=e[t];C(n),m(n.char)}else console.error("[Seion Random] No seion characters found for random mode."),C(null),m(null)}else{if(h<0||h>=a.length)return m(null),void C(null);const e=a[h],t=s[e];if(!t||p<0||p>=t.length)return m(null),void C(null);const n=t[p];m(n),C(null)}b("gyouInput")}),[o,h,p,d]);(0,r.useEffect)((()=>{t!==h&&f(t),n!==p&&g(n)}),[t,n,h,p]),(0,r.useEffect)((()=>{if(o){const e=!T.current;e&&(I.current=!0);const t=h!==w.current||p!==_.current,n=d!==E.current;let r=!1;d?(n||I.current||!x)&&(r=!0):(n||I.current||t)&&(r=!0),r&&(A(),S(null)),(r||e)&&(I.current=!1),w.current=h,_.current=p}else T.current&&(m(null),b("gyouInput"),C(null),S(null),w.current=-1,_.current=-1,I.current=!0);T.current=o,E.current=d}),[o,h,p,d,x,A]);const L=(0,r.useCallback)((e=>{if(!o||!y||!N||!P||"release"!==e.type)return S(null),{isExpected:!1,shouldGoToNext:void 0,errorLayer:null};const{pressCode:r}=e;let i,l=!1,h=null;const f=_e(r+1,c,u),p=Ie(r+1,c,u);if("gyouInput"===v)f===N?(l=!0,b("danInput"),S(null)):(l=!1,S(2),h=2);else if("danInput"===v)if(p===P)if(l=!0,b("gyouInput"),S(null),d)A(),i=!1;else{const e=a[t],r=s[e];i=!!(r&&n>=r.length-1)}else l=!1,S(3),b("gyouInput"),h=3;return{isExpected:l,shouldGoToNext:i,errorLayer:h}}),[o,y,v,N,P,c,u,d,A,t,n,b,S]),K=(0,r.useCallback)((()=>{b("gyouInput"),S(null)}),[b,S]),M=(0,r.useMemo)((()=>{var e;if(!o)return[];if(d)return y?[y]:[];if(h<0||h>=a.length)return[];const t=a[h];return null!==(e=s[t])&&void 0!==e?e:[]}),[o,d,y,h]),F=(0,r.useCallback)(((e,t,n)=>{const r={className:null,overrideKey:null};if(!o||!y||k===t)return r;if("gyouInput"===v){if(e===N&&2===t)return{className:"bg-blue-100",overrideKey:null}}else if("danInput"===v&&e===P&&3===t)return{className:"bg-blue-100",overrideKey:null};return r}),[o,y,v,N,P,k]),R=(0,r.useCallback)(((e,t,n)=>!(!o||null===k)&&(k===t&&n===e)),[o,k]),D=(0,r.useCallback)((()=>{S(null)}),[S]);return(0,r.useMemo)((()=>{let e=[2,3];if(null!==k){const t=new Set([2,3]);t.add(k),e=Array.from(t)}return{headingChars:M,handleInput:L,getHighlightClassName:(e,t,n)=>F(e,t,n),reset:K,isInvalidInputTarget:R,targetChar:null!==y&&void 0!==y?y:void 0,targetLayerIndices:e,errorHighlightLayer:k,clearErrorState:D,stage:v}}),[M,L,F,K,R,y,v,k,D])};const Ee=e=>{let{gIdx:t,dIdx:n,isActive:o,side:a,kb:i,layers:l,isRandomMode:s}=e;(0,r.useMemo)((()=>"tw-20v"===i?"left"===a?ce:le:"left"===a?re:ee),[a,i]),(0,r.useMemo)((()=>{var e,t;return null!==(e=null===(t=B[i])||void 0===t?void 0:t[a])&&void 0!==e?e:{}}),[i,a]);const u=(0,r.useRef)(t),c=(0,r.useRef)(n),d=(0,r.useRef)(!0),h=(0,r.useRef)(o),f=(0,r.useRef)(s),[p,g]=(0,r.useState)("idle"),[y,m]=(0,r.useState)(null),v=(0,r.useRef)(null),x=(0,r.useRef)(null),[C,k]=(0,r.useState)(null),S=(0,r.useCallback)((()=>{null!==x.current&&(clearTimeout(x.current),x.current=null)}),[]),w=(0,r.useCallback)((()=>{if(ye.length>0){const e=Math.floor(Math.random()*ye.length),t=ye[e];k(t),v.current=null,S(),m(null)}else k(null)}),[k,S]),_=(0,r.useCallback)((()=>{u.current=-1,c.current=-1,d.current=!0,k(null),v.current=null,S(),g("idle"),m(null),f.current=!1}),[k,S]);(0,r.useEffect)((()=>{if(!o&&h.current&&(g("idle"),console.log("[Kigo1 useEffect] Resetting state because isActive became false."),_()),o){o&&!h.current&&(d.current=!0);const e=t!==u.current||n!==c.current,r=s&&!f.current;!s&&f.current||!s&&(d.current||e)?(v.current=null,S(),k(null),m(null),u.current=t,c.current=n,d.current=!1,o&&g("waiting")):s&&(r||d.current||!C)&&(console.log("[Kigo1 useEffect] Random mode. randomModeChangedToTrue=".concat(r,", isInitialMount=").concat(d.current,", !randomTarget=").concat(!C)),w(),v.current=null,S(),m(null),d.current=!1,u.current=t,c.current=n,o&&g("waiting"))}return h.current=o,f.current=s,()=>{S()}}),[o,s,t,n,C,_,w,m,S]);const I=(0,r.useMemo)((()=>s||!o||t<0||t>=b.length?null:b[t]),[o,s,t]),T=(0,r.useMemo)((()=>s||null===I||void 0===I||!I.inputs||n<0||n>=I.inputs.length?null:I.inputs[n]),[s,I,n]),E=(0,r.useMemo)((()=>{var e,t;return s?null!==(e=null===C||void 0===C?void 0:C.keyName)&&void 0!==e?e:null:null!==(t=null===T||void 0===T?void 0:T.keyName)&&void 0!==t?t:null}),[s,C,T]),N=(0,r.useMemo)((()=>{return o?s?null!==(e=null===C||void 0===C?void 0:C.char)&&void 0!==e?e:null:null!==(t=null===I||void 0===I?void 0:I.chars[n])&&void 0!==t?t:null:null;var e,t}),[o,s,C,I,n]),P=(0,r.useMemo)((()=>{if(o){if(s)return C?[{char:C.char,isPracticeTarget:!0}]:[];{if(null===I||void 0===I||!I.chars)return[];const e=I.chars.map(((e,t)=>({char:e,isPracticeTarget:t===n})));return e.length<=1?e:e.flatMap(((t,n)=>n<e.length-1?[t,{char:"\xa0",isPracticeTarget:!1}]:[t]))}}return[]}),[o,s,C,I,n]),A=(0,r.useCallback)((e=>{var t,n,r;const a=e.pressCode,i=null!==(t=null===(n=l[6])||void 0===n||null===(r=n[e.pressCode])||void 0===r?void 0:r.trim())&&void 0!==t?t:null,u=e.timestamp;if(console.log("[Kigo1 handleInput ENTRY #".concat(u,"] pressCode: 0x").concat(a.toString(16)," (dec: ").concat(a,"), type: ").concat(e.type,', targetSymbolKeyName: "').concat(E,'", pressedKeyNameOnLayer').concat(6,': "').concat(i,'"')),console.log("[Kigo1 handleInput INFO #".concat(u,"] isActive: ").concat(o,", current status: ").concat(p,", pressInfoRef: ").concat(JSON.stringify(v.current))),!o||!E)return console.log("[Kigo1 handleInput] Not active or no targetSymbolKeyName. Returning."),m(null),{isExpected:!1,shouldGoToNext:!1,errorLayer:null};let c=!1,d=!1,h=null;if("press"===e.type){var f,b,C;(v.current||x.current)&&S();const t=null!==(f=null===(b=l[6])||void 0===b||null===(C=b[e.pressCode])||void 0===C?void 0:C.trim())&&void 0!==f?f:null;console.log("[Kigo1 handleInput PRESS #".concat(u,'] pressedKeyOnPress: "').concat(t,'", targetSymbolKeyName: "').concat(E,'"')),t===E?(console.log("[Kigo1 handleInput PRESS #".concat(u,"] Match! Setting pressInfoRef to {code: ").concat(e.pressCode,", timestamp: ").concat(e.timestamp,"} and starting long press timer.")),v.current={code:e.pressCode,timestamp:e.timestamp},x.current=window.setTimeout((()=>{x.current=null,console.log("[Kigo1 handleInput PRESS] Long press timer fired (no action).")}),300)):(console.log("[Kigo1 handleInput PRESS #".concat(u,"] No match. Clearing pressInfoRef.")),v.current=null)}else{if("release"!==e.type)return console.log("[Kigo1 handleInput] Unexpected input type. Returning."),{isExpected:!1,shouldGoToNext:!1,errorLayer:y};if(S(),console.log("[Kigo1 handleInput RELEASE #".concat(u,"] pressInfoRef.current: ").concat(JSON.stringify(v.current),", inputInfo.pressCode: ").concat(e.pressCode,', pressedKeyName: "').concat(i,'", targetSymbolKeyName: "').concat(E,'"')),v.current&&v.current.code===e.pressCode&&i===E){console.log("[Kigo1 handleInput RELEASE #".concat(u,"] Conditions met for duration check."));const t=v.current.timestamp,n=e.timestamp-t;console.log("[Kigo1 handleInput RELEASE #".concat(u,"] Duration: ").concat(n,"ms, LONG_PRESS_DURATION: ").concat(300,"ms")),n>=300?(console.log("[Kigo1 handleInput RELEASE #".concat(u,"] Symbol key long press SUCCESS. Duration: ").concat(n,"ms")),c=!0,m(null),g("correct"),s?(w(),d=!1):d=!0):(console.log("[Kigo1 handleInput RELEASE #".concat(u,"] Symbol key press too short. Duration: ").concat(n,"ms")),c=!1,m(6),h=6,g("incorrect"))}else{var k;console.log("[Kigo1 handleInput RELEASE #".concat(u,"] Symbol key release FAILED. pressInfoRef.current: ").concat(!!v.current,", code match: ").concat((null===(k=v.current)||void 0===k?void 0:k.code)===e.pressCode,", name match: ").concat(i===E)),c=!1,m(6),h=6,g("incorrect")}v.current=null}return console.log("[Kigo1 handleInput] End of logic. isExpected=".concat(c,", shouldGoToNext=").concat(d,", errorLayer=").concat(h)),{isExpected:c,shouldGoToNext:d,errorLayer:h}}),[o,E,l,S,s,w,m,g,t,n,p]),L=(0,r.useCallback)(((e,t,n)=>{var r;const a={className:null,overrideKey:null};return o&&E?y===t?a:6===t&&n===(null===(r=l[6])||void 0===r?void 0:r.findIndex((e=>e.trim()===E)))&&null!==E?{className:"bg-blue-100",overrideKey:null}:a:a}),[o,E,y]),K=(0,r.useCallback)(((e,t,n)=>!!o&&(y===t&&6===t&&n===e||y===t&&n===e)),[o,y]),M=(0,r.useCallback)((()=>{m(null)}),[m]);return{headingChars:P,handleInput:A,getHighlightClassName:L,reset:_,isInvalidInputTarget:K,status:p,targetChar:null!==N&&void 0!==N?N:void 0,errorHighlightLayer:y,clearErrorState:M,targetLayerIndices:(0,r.useMemo)((()=>{let e=[6];if(null!==y){const t=new Set(e);t.add(y),e=Array.from(t)}return e}),[y])}},Ne=e=>{let{gIdx:t,dIdx:n,isActive:o,side:a,kb:i,layers:l,isRandomMode:s}=e;const[u,c]=(0,r.useState)("idle"),[d,h]=(0,r.useState)("gyouInput"),f=(0,r.useRef)(t),p=(0,r.useRef)(n),g=(0,r.useRef)(!0),y=(0,r.useRef)(o),m=(0,r.useRef)(s),[v,b]=(0,r.useState)(null),C=(0,r.useMemo)((()=>s||!o||t<0||t>=x.length?null:x[t]),[o,s,t]),k=((0,r.useMemo)((()=>s||null===C||void 0===C||!C.inputs||n<0||n>=C.inputs.length?null:C.inputs[n]),[s,C,n]),(0,r.useMemo)((()=>{var e,t;return s?null!==(e=null===v||void 0===v?void 0:v.char)&&void 0!==e?e:null:null!==(t=null===C||void 0===C?void 0:C.chars[n])&&void 0!==t?t:null}),[s,v,C,n])),S=((0,r.useMemo)((()=>{var e,t;return null!==(e=null===(t=B[i])||void 0===t?void 0:t[a])&&void 0!==e?e:{}}),[i,a]),(0,r.useMemo)((()=>{let e=[];if(o)if(s)e=v?[v.char]:[];else{var t;e=null!==(t=null===C||void 0===C?void 0:C.chars)&&void 0!==t?t:[]}else e=[];return e.length<=1?e:e.flatMap(((t,n)=>n<e.length-1?[t," "]:[t]))}),[o,s,v,C])),w=(0,r.useCallback)((()=>{if(me.length>0){const e=Math.floor(Math.random()*me.length),t=me[e];b(t),h("gyouInput")}else c("finished"),b(null)}),[b,h]),_=(0,r.useCallback)((()=>{h("gyouInput"),c("idle"),b(null),f.current=-1,p.current=-1,g.current=!0,m.current=!1}),[h,b]);(0,r.useEffect)((()=>{if(!o&&y.current&&_(),o){c("waiting"),o&&!y.current&&(g.current=!0);const e=t!==f.current||n!==p.current,r=s&&!m.current;!s&&m.current||!s&&(g.current||e)?(h("gyouInput"),b(null),f.current=t,p.current=n,g.current=!1,c("waiting")):s&&(r||g.current||!v)&&(w(),g.current=!1,f.current=t,p.current=n)}y.current=o,m.current=s}),[o,s,t,n,v,_,w]);const I=(0,r.useCallback)((e=>{var t;if(!o)return{isExpected:!1,shouldGoToNext:void 0,errorLayer:null};if(!k)return{isExpected:!1,shouldGoToNext:void 0,errorLayer:null};if("release"!==e.type)return{isExpected:!1,shouldGoToNext:void 0,errorLayer:null};const n=e.pressCode;let r,a=!1,i=d,u="waiting",f=null;const p=null!==(t=l[7])&&void 0!==t?t:[];switch(d){case"gyouInput":const e=p.findIndex((e=>Z(e.trim())===k));-1!==e&&n===e?(a=!0,i="kigoInput",u="waiting",r=void 0,f=null):(a=!1,r=void 0,u="incorrect",f=7);break;case"kigoInput":const t=p.findIndex((e=>"\u8a18\u53f7"===e));i="gyouInput",-1!==t&&n===t?(a=!0,s?(u="correct",w(),r=!1):(r=!0,u="correct",f=null)):(a=!1,u="incorrect",f=7)}return i!==d?h(i):a||"gyouInput"===d||(h("gyouInput"),u="incorrect"),c(u),{isExpected:a,shouldGoToNext:r,errorLayer:f}}),[o,d,l,k,c,s,w,h,t,n]),T=(0,r.useCallback)(((e,r,a)=>{const i={className:null,overrideKey:null};if(!o)return i;let l=null;switch(!s&&(t!==f.current||n!==p.current)?"gyouInput":d){case"gyouInput":l=k;break;case"kigoInput":l="\u8a18\u53f7"}return null!==l&&7===r&&Z(e.trim())===l.trim()?{className:"bg-blue-100",overrideKey:null}:i}),[o,d,k,s,t,n]),E=(0,r.useCallback)(((e,t,n)=>{if(!o)return!1;return 7===t&&n===e-1}),[o]);return{headingChars:S,handleInput:I,getHighlightClassName:T,reset:_,status:u,targetChar:null!==k&&void 0!==k?k:void 0,errorHighlightLayer:"incorrect"===u?7:null,isInvalidInputTarget:E}},Pe=e=>{let{gIdx:t,dIdx:n,isActive:o,side:a,kb:i,isRandomMode:l,layers:s}=e;const[u,c]=(0,r.useState)("idle"),[d,h]=(0,r.useState)("kigoInput"),[f,p]=(0,r.useState)(!0),g=(0,r.useRef)(!1),y=(0,r.useRef)(null),m=(0,r.useRef)(t),v=(0,r.useRef)(n),b=(0,r.useRef)(!0),x=(0,r.useRef)(o),k=(0,r.useRef)(l),[S,w]=(0,r.useState)(null),_=(0,r.useMemo)((()=>l||!o||t<0||t>=C.length?null:C[t]),[o,l,t]),I=(0,r.useMemo)((()=>l||null===_||void 0===_||!_.inputs||n<0||n>=_.inputs.length?null:_.inputs[n]),[l,_,n]),T=(0,r.useMemo)((()=>l?"\uff1d"===(null===S||void 0===S?void 0:S.char):!!I&&!I.gyouKey),[l,S,I]),E=(0,r.useMemo)((()=>{var e;return l?null!==(e=null===S||void 0===S?void 0:S.char)&&void 0!==e?e:null:null===_||void 0===_||!_.chars||n<0||n>=_.chars.length?null:_.chars[n]}),[l,S,_,n]),N=(0,r.useMemo)((()=>{var e,t;return T?null:l?null!==(e=null===S||void 0===S?void 0:S.gyouKey)&&void 0!==e?e:null:null!==(t=null===I||void 0===I?void 0:I.gyouKey)&&void 0!==t?t:null}),[l,S,I,T]),A=(0,r.useMemo)((()=>{if(!o)return[];if(l)return S?[{char:S.char,isPracticeTarget:!0}]:[];{if(null===_||void 0===_||!_.chars)return[];const e=_.chars.map(((e,t)=>{let r=e;return","===e?r="\u3002":"."===e&&(r="\u3001"),{char:r,isPracticeTarget:t===n}}));return e.length<=1?e:e.flatMap(((t,n)=>n<e.length-1?[t,{char:"\xa0",isPracticeTarget:!1}]:[t]))}}),[o,l,S,_,n]),L=(0,r.useCallback)((()=>{if(ve.length>0){const e=Math.floor(Math.random()*ve.length),t=ve[e];w(t),h("kigoInput"),g.current=!1,p(!0)}else w(null)}),[w,h]),K=(0,r.useCallback)((()=>{h("kigoInput"),g.current=!1,p(!0),null!==y.current&&(clearTimeout(y.current),y.current=null),w(null),m.current=-1,v.current=-1,b.current=!0,k.current=!1,c("idle")}),[h,w]);(0,r.useEffect)((()=>{if(!o&&x.current&&K(),o){o&&!x.current&&(b.current=!0);const e=t!==m.current||n!==v.current,r=l&&!k.current;!l&&k.current||!l&&(b.current||e)?(c("waiting"),h("kigoInput"),g.current=!1,p(!0),null!==y.current&&(clearTimeout(y.current),y.current=null),w(null),m.current=t,v.current=n,b.current=!1):l&&(r||b.current||!S)&&(c("waiting"),L(),b.current=!1,m.current=t,v.current=n)}return x.current=o,k.current=l,o&&(m.current=t,v.current=n),()=>{null!==y.current&&(clearTimeout(y.current),y.current=null)}}),[o,l,t,n,S,K,L]);const M=(0,r.useCallback)((e=>{var t;if("release"!==e.type)return{isExpected:!0,shouldGoToNext:void 0};const{pressCode:r,layerIndex:o}=e;console.log("[Kigo3 handleInput] Received release input: pressCode=".concat(r,", layerIndex=").concat(o,", stage: ").concat(d));let a,i=!1,u=d;const f=null!==(t=s[8])&&void 0!==t?t:[],m=f.findIndex((e=>e.trim()===P.trim()));if("kigoInput"===d)8===o&&r===m&&-1!==m?(i=!0,T?(u="waitingForSecondKigo",g.current=!0,null!==y.current&&clearTimeout(y.current),p(!1),y.current=window.setTimeout((()=>{p(!0),y.current=null}),300),a=void 0):(u="gyouInput",g.current=!1,p(!1),c("waiting"),a=void 0)):(c("incorrect"),i=!1,u="kigoInput",a=!1);else if("gyouInput"===d)if(8===o){const e=f[r];let t=!1;if(e&&N){const n=e.split("\n")[0].trim(),r=Z(n),o=Z(N.trim());console.log('[Kigo3 handleInput] Stage gyouInput. NormalizedPressed: "'.concat(r,'", NormalizedTargetGyouKey (internal): "').concat(o,'"')),(","===o&&"\u3002"===r||"."===o&&"\u3001"===r||r===o)&&(t=!0)}if(t){if(c("correct"),i=!0,u="kigoInput",l)L(),a=void 0;else{var v;const e=null!==(v=null===_||void 0===_?void 0:_.chars)&&void 0!==v?v:[];a=n>=e.length-1}g.current=!1,p(!1)}else c("incorrect"),i=!1,u="kigoInput",a=!1,g.current=!1,p(!1)}else c("incorrect"),i=!1,u="kigoInput",a=!1,g.current=!1,p(!1);else if("waitingForSecondKigo"===d)if(8===o&&r===m&&-1!==m)if(c("correct"),i=!0,u="kigoInput",g.current=!1,p(!1),l)L(),a=void 0;else{var b;const e=null!==(b=null===_||void 0===_?void 0:_.chars)&&void 0!==b?b:[];a=n>=e.length-1}else c("incorrect"),i=!1,u="kigoInput",g.current=!1,p(!1),a=!1;return u!==d&&(h(u),console.log("[Kigo3 handleInput] Stage changed from ".concat(d," to ").concat(u))),console.log("[Kigo3 handleInput] Returning: isExpected=".concat(i,", shouldGoToNext=").concat(a)),{isExpected:i,shouldGoToNext:a}}),[d,s,T,N,_,n,l,L,c,h,p,g,y]),F=(0,r.useCallback)(((e,t,n)=>{var r;const o=u,a=(null!==e&&void 0!==e?e:"").trim(),i=null!==(r=s[8])&&void 0!==r?r:[];let l=null;if("correct"===o)return{className:null,overrideKey:a};const c=i.findIndex((e=>e.trim()===P.trim()));if("kigoInput"===d)8===t&&n===c&&-1!==c&&(console.log("[Kigo3 getHighlightClassName] Stage kigoInput. Highlighting ".concat(a," (keyIndex ").concat(n,")")),l="bg-blue-100 dark:bg-blue-800");else if("gyouInput"===d){const e=N?Z(N.trim()):null,r=e?i.findIndex((t=>{const n=t.split("\n")[0].trim(),r=Z(n);return","===e&&"\u3002"===r||("."===e&&"\u3001"===r||(!(!E||r!==Z(E.trim()))||r===e))})):-1;console.log('[Kigo3 getHighlightClassName] Stage gyouInput. targetGyouKey: "'.concat(N,'" (normalized: "').concat(e,'"), found keyIndexForTargetGyou: ').concat(r)),8===t&&n===r&&-1!==r&&(l="bg-blue-100 dark:bg-blue-800")}else"waitingForSecondKigo"===d&&8===t&&n===c&&-1!==c&&(console.log("[Kigo3 getHighlightClassName] Stage waitingForSecondKigo. Highlighting ".concat(a," (keyIndex ").concat(n,") with delay.")),l=f?"bg-blue-100 dark:bg-blue-800":null);if(8===t&&"incorrect"!==u){let e=-1;if("gyouInput"===d&&N){const t=Z(N.trim());e=i.findIndex((e=>{const n=e.split("\n")[0].trim();return","===t&&"\u3002"===Z(n)||("."===t&&"\u3001"===Z(n)||Z(n)===t)}))}null!==l||("kigoInput"===d||"waitingForSecondKigo"===d)&&n===c||"gyouInput"===d&&n===e||(l="text-gray-700 dark:text-gray-300")}return{className:l?l.trim():null,overrideKey:a}}),[u,d,s,N,f,l,_,E]);(0,r.useMemo)((()=>!s||s.length<=8?s:s.map(((e,t)=>8===t?e.map((e=>{const t=e.trim();return"\u3002"===t?",":"\u3001"===t?".":e})):e))),[s]);return{headingChars:A,handleInput:M,getHighlightClassName:F,reset:K,status:u,stage:d,targetChar:E,currentTarget:I?{type:"kigo3",char:I.char,isEqualSign:!I.gyouKey,gyouKey:I.gyouKey}:void 0,isInvalidInputTarget:()=>!1,targetLayerIndex:8,targetLayerIndices:[8],displayLayers:s,errorHighlightLayer:null}},Ae=e=>{var t,n;let{gIdx:o,dIdx:a,isActive:i,side:l,kb:s,layers:u,isRandomMode:c}=e;const[d,h]=(0,r.useState)("gyouInput"),[f,p]=(0,r.useState)(null),g=(0,r.useRef)(o),y=(0,r.useRef)(a),m=(0,r.useRef)(!0),v=(0,r.useRef)(i),b=(0,r.useRef)(c),[x,C]=(0,r.useState)(null),S=(0,r.useMemo)((()=>"tw-20v"===s?"left"===l?se:ae:"left"===l?ne:J),[s,l]),w=(0,r.useMemo)((()=>"tw-20v"===s?"left"===l?ue:ie:"left"===l?oe:te),[s,l]),_=(0,r.useMemo)((()=>{var e,t;return null!==(e=null===(t=B[s])||void 0===t?void 0:t[l])&&void 0!==e?e:{}}),[s,l]),I=(0,r.useCallback)((()=>{if(Ce.length>0){const e=Math.floor(Math.random()*Ce.length);p(Ce[e]),h("gyouInput"),C(null)}else p(null)}),[p,h,C]),T=(0,r.useCallback)((()=>{h("gyouInput"),p(null),g.current=-1,y.current=-1,m.current=!0,b.current=!1,C(null)}),[h,p,C]);(0,r.useEffect)((()=>{if(!i&&v.current&&T(),i){i&&!v.current&&(m.current=!0);const e=o!==g.current||a!==y.current,t=c&&!b.current;!c&&b.current||!c&&(m.current||e)?(h("gyouInput"),p(null),C(null),g.current=o,y.current=a,m.current=!1):c&&(t||m.current||!f)&&(I(),m.current=!1,g.current=o,y.current=a)}v.current=i,b.current=c}),[i,c,o,a,f,T,I,h,C]);const E=(0,r.useMemo)((()=>{var e;if(c)return null!==(e=null===f||void 0===f?void 0:f.inputDef)&&void 0!==e?e:null;if(!i||o<0||o>=k.length)return null;const t=k[o];return!t||!t.inputs||a<0||a>=t.inputs.length?null:t.inputs[a]}),[i,c,f,o,a]),N=(0,r.useMemo)((()=>{return i?c?f?[f.char]:[]:o<0||o>=k.length?[]:null!==(e=null===(t=k[o])||void 0===t?void 0:t.chars)&&void 0!==e?e:[]:[];var e,t}),[i,c,f,o]),P=(0,r.useCallback)((e=>{if(!i||!E)return C(null),{isExpected:!1,shouldGoToNext:void 0,errorLayer:null};if("release"!==e.type)return{isExpected:!1,shouldGoToNext:void 0,errorLayer:x};const t=e.pressCode;let n,r=!1,l=d,s=null;const u=Object.entries(_).find((e=>{let[t,n]=e;return"\u3083\u3085\u3087"===n})),f=Object.entries(_).find((e=>{let[t,n]=e;return"\u201d \xb0 \u5c0f"===n})),p=u?parseInt(u[0])+1:-1,g=f?parseInt(f[0])+1:-1;if(-1===p||-1===g)return console.error("useYoudakuonPractice: Could not find key codes for '\u3083\u3085\u3087' or '\u201d \xb0 \u5c0f'."),C(null),{isExpected:!1,shouldGoToNext:void 0,errorLayer:null};switch(d){case"gyouInput":Object.entries(S).filter((e=>{let[t,n]=e;return n===E.gyouKey})).map((e=>{let[t,n]=e;return parseInt(t)})).includes(t+1)?(r=!0,l="youonInput",n=void 0,C(null),s=null):(l="gyouInput",n=void 0,C(2),s=2);break;case"youonInput":t+1===p?(r=!0,l="dakuonInput",n=void 0,C(null),s=null):(l="gyouInput",n=void 0,C(2),s=2);break;case"dakuonInput":t+1===g?(r=!0,l="danInput",n=void 0,C(null),s=null):(l="gyouInput",n=void 0,C(2),s=2);break;case"danInput":if(l="gyouInput",Object.entries(w).filter((e=>{let[t,n]=e;return n===E.dan})).map((e=>{let[t,n]=e;return parseInt(t)})).includes(t+1))if(r=!0,C(null),s=null,c)I(),n=!1;else{var y,m;const e=null!==(y=null===(m=k[o])||void 0===m?void 0:m.chars)&&void 0!==y?y:[];n=a>=e.length-1}else n=void 0,C(3),s=3}return l!==d?h(l):r||"gyouInput"===d||h("gyouInput"),{isExpected:r,shouldGoToNext:n,errorLayer:s}}),[i,d,E,S,w,_,c,h,I,o,a,C]),A=(0,r.useCallback)(((e,t)=>{const n={className:null,overrideKey:null};if(!i||!E)return n;if(x===t)return n;const r=!c&&(o!==g.current||a!==y.current)?"gyouInput":d;let l=null,s=null;const u=Object.entries(_).find((e=>{let[t,n]=e;return"\u3083\u3085\u3087"===n})),h=Object.entries(_).find((e=>{let[t,n]=e;return"\u201d \xb0 \u5c0f"===n})),f=u?_[parseInt(u[0])]:"\u3083\u3085\u3087",p=h?_[parseInt(h[0])]:"\u201d \xb0 \u5c0f";switch(r){case"gyouInput":l=E.gyouKey,s=2;break;case"youonInput":l=f,s=2;break;case"dakuonInput":l=p,s=2;break;case"danInput":l=E.dan,s=3}return null!==l&&t===s&&e===l?{className:"bg-blue-100",overrideKey:null}:n}),[i,d,E,_,c,o,a,x]),L=(0,r.useCallback)(((e,t,n)=>!!i&&(x===t&&n===e)),[i,x]),K=(0,r.useCallback)((()=>{C(null)}),[C]);return{headingChars:N,handleInput:P,getHighlightClassName:(e,t,n)=>A(e,t),reset:T,isInvalidInputTarget:L,currentTarget:c?null!==f&&void 0!==f?f:void 0:E?{type:"youdakuon",char:null!==(t=null===(n=k[o])||void 0===n?void 0:n.chars[a])&&void 0!==t?t:"",inputDef:E}:void 0,errorHighlightLayer:x,clearErrorState:K,targetLayerIndices:(0,r.useMemo)((()=>{let e=[2,3];if(null!==x){const t=new Set([2,3]);t.add(x),e=Array.from(t)}return e}),[x]),stage:d}},Le=(e,t,n)=>{var r;return null===(r=e.layers[t])||void 0===r?void 0:r[n]},Ke=e=>{let{practice:t,gIdx:n,dIdx:o,isActive:a,isRandomMode:i,onAdvance:l,layers:s}=e;const[c,d]=(0,r.useState)("waiting"),[h,f]=(0,r.useState)(null),[p,g]=(0,r.useState)(2),[y,m]=(0,r.useState)([2,3]),[v,b]=(0,r.useState)(null),[x,C]=(0,r.useState)("initial"),k=(0,r.useRef)(null),S=(0,r.useRef)(null),w=(0,r.useRef)(null),[_,I]=(0,r.useState)(!1),E=(0,r.useRef)(null),N=(0,r.useRef)(a),P=(0,r.useRef)(i),A=(0,r.useRef)(n),L=(0,r.useRef)(o),K=(0,r.useRef)(!0),[M,F]=(0,r.useState)(null),R=(0,r.useCallback)((()=>{const e=T[0];if(!e||o<0||o>=e.inputs.length)return null;const t=e.inputs[o];return{char:e.chars[o],inputDef:t,currentGyou:"\u3071\u884c"}}),[o]),D=(e,t)=>"\u201d \xb0 \u5c0f"===Le({layers:s},t,e),O=(e,t)=>{const n=Le({layers:s},t,e);return"BS"===n||"ENT"===n},j=e=>"waitingForDanKey"===x&&e!==y[1]?y[1]:e,H=(0,r.useCallback)((()=>{C("initial"),k.current=null,S.current=null,w.current=null,d("waiting"),g(2),m([2,3]),b(null),I(!1),null!==E.current&&(clearTimeout(E.current),E.current=null)}),[I]),V=(0,r.useCallback)((()=>{if(xe.length>0){const e=Math.floor(Math.random()*xe.length),t=xe[e];F(t),H()}else F(null),H()}),[F,H]),B=(0,r.useMemo)((()=>{var e,t,n;return i?null!==(n=null===M||void 0===M?void 0:M.inputDef)&&void 0!==n?n:null:null!==(e=null===(t=R())||void 0===t?void 0:t.inputDef)&&void 0!==e?e:null}),[i,M,R]),U=(0,r.useCallback)((()=>{H(),F(null),f(null),A.current=-1,L.current=-1,K.current=!0,P.current=i}),[H,F,i]);(0,r.useEffect)((()=>{const e=o!==L.current,t=a!==N.current,r=i!==P.current;if(t&&!a)U();else if(a){if(K.current||t&&a||r||!i&&e)if(H(),i)M&&!r||V(),f(null);else{var l;const e=R();f(null!==(l=null===e||void 0===e?void 0:e.char)&&void 0!==l?l:null),F(null)}}return N.current=a,P.current=i,A.current=n,L.current=o,K.current&&a&&(K.current=!1),()=>{null!==E.current&&(clearTimeout(E.current),E.current=null)}}),[a,i,n,o,U,R,V,M,H]),(0,r.useEffect)((()=>{i&&M&&H()}),[i,M,H]);const G=(0,r.useCallback)((e=>{if("release"!==e.type||!a||"stageCompleted"===x)return{isExpected:!1,shouldGoToNext:!1,errorLayer:null};if(b(null),!B)return{isExpected:!1,shouldGoToNext:!1,errorLayer:null};const t=B;let n=2;"waitingForDanKey"===x&&(n=3);const r=Le({layers:s},n,e.pressCode);if("initial"===x){if(((e,t)=>{const n=Le({layers:s},t,e);return u.includes(null!==n&&void 0!==n?n:"")})(e.pressCode,n)&&r===t.gyouKey)return k.current=null!==r&&void 0!==r?r:null,C("waitingForYouonKey"),{isExpected:!0,shouldGoToNext:!1};if(O(e.pressCode,e.layerIndex))return U(),{isExpected:!0,shouldGoToNext:!1}}else if("waitingForYouonKey"===x){if(o=e.pressCode,"\u3083\u3085\u3087"===Le({layers:s},n,o))return S.current=null!==r&&void 0!==r?r:null,C("waitingForFirstDakuonKey"),{isExpected:!0,shouldGoToNext:!1};if(O(e.pressCode,e.layerIndex))return C("initial"),S.current=null,{isExpected:!0,shouldGoToNext:!1}}else if("waitingForFirstDakuonKey"===x){if(D(e.pressCode,n))return C("waitingForSecondDakuonKey"),I(!0),E.current&&clearTimeout(E.current),E.current=window.setTimeout((()=>{I(!1),E.current=null}),300),{isExpected:!0,shouldGoToNext:!1};if(O(e.pressCode,e.layerIndex))return C("waitingForYouonKey"),I(!1),null!==E.current&&(clearTimeout(E.current),E.current=null),{isExpected:!0,shouldGoToNext:!1}}else if("waitingForSecondDakuonKey"===x){if(D(e.pressCode,n))return C("waitingForDanKey"),g(3),I(!1),E.current&&(clearTimeout(E.current),E.current=null),{isExpected:!0,shouldGoToNext:!1};if(O(e.pressCode,e.layerIndex))return C("waitingForFirstDakuonKey"),g(2),I(!1),null!==E.current&&(clearTimeout(E.current),E.current=null),{isExpected:!0,shouldGoToNext:!1}}else if("waitingForDanKey"===x){if(((e,t,n)=>Le({layers:s},t,e)===n)(e.pressCode,n,t.dan))return d("correct"),i?(V(),{isExpected:!0,shouldGoToNext:!1}):(d("correct"),C("stageCompleted"),{isExpected:!0,shouldGoToNext:!0});if(O(e.pressCode,e.layerIndex))return C("waitingForSecondDakuonKey"),g(2),I(!0),E.current&&clearTimeout(E.current),E.current=window.setTimeout((()=>{I(!1),E.current=null}),300),{isExpected:!0,shouldGoToNext:!1};if(D(e.pressCode,n))return{isExpected:!0,shouldGoToNext:!1}}var o;d("incorrect");const l=j(n);return b(l),C("initial"),k.current=null,S.current=null,g(2),m([2,3]),I(!1),null!==E.current&&(clearTimeout(E.current),E.current=null),{isExpected:!1,errorLayer:l,shouldGoToNext:!1}}),[a,s,H,l,y,B,i,V,x,C,d,b,g,m,j,U,I]),z=(0,r.useMemo)((()=>{var e;return i?null!==(e=null===M||void 0===M?void 0:M.char)&&void 0!==e?e:null:h}),[i,M,h]),W=(0,r.useMemo)((()=>{if(!a)return[];const e=T[0];if(!e)return[];return e.chars.map((e=>({char:e,isPracticeTarget:!1})))}),[a]),Y=(0,r.useCallback)(((e,t)=>{const n={className:null,overrideKey:null};if(!a||!B)return n;const r=B;let o=null,i=null,l=!0;switch(x){case"initial":o=r.gyouKey,i=2;break;case"waitingForYouonKey":o="\u3083\u3085\u3087",i=2;break;case"waitingForFirstDakuonKey":o="\u201d \xb0 \u5c0f",i=2;break;case"waitingForSecondDakuonKey":o="\u201d \xb0 \u5c0f",i=2,"\u201d \xb0 \u5c0f"===e&&_&&(l=!1);break;case"waitingForDanKey":o=r.dan,i=3;break;default:return n}return l&&e===o&&t===i?{className:"bg-blue-100 dark:bg-blue-800",overrideKey:null}:n}),[a,B,x,_]),$=(0,r.useCallback)(((e,t,n)=>!(!a||null===v)&&(t===v&&n===e)),[a,v]),q=(0,r.useCallback)((()=>{b(null),d("waiting")}),[b,d]);return{status:c,targetChar:z,currentTarget:B?{type:"youhandakuon",char:null!==z&&void 0!==z?z:"",inputDef:B}:void 0,headingChars:W,targetLayerIndex:p,targetLayerIndices:y,errorHighlightLayer:v,handleInput:G,getHighlightClassName:Y,reset:H,isInvalidInputTarget:$,countdownValue:void 0,challengeTimer:void 0,challengeTotalTime:void 0,challengeResults:null,capitalizedCharIndices:new Set,typedEndIndex:0,clearErrorState:q,stage:x}},Me=e=>{var t,n;let{gIdx:o,dIdx:a,isActive:i,side:l,layers:s,kb:c,isRandomMode:d,onAdvance:h}=e;const[f,p]=(0,r.useState)("line"),[g,y]=(0,r.useState)(null),m=(0,r.useRef)(o),v=(0,r.useRef)(a),b=(0,r.useRef)(!0),x=(0,r.useRef)(i),C=(0,r.useRef)(d),[k,S]=(0,r.useState)(null),w=(0,r.useMemo)((()=>"tw-20v"===c?"left"===l?se:ae:"left"===l?ne:J),[c,l]),_=(0,r.useMemo)((()=>"tw-20v"===c?"left"===l?ue:ie:"left"===l?oe:te),[c,l]),I=d?null!==(t=null===g||void 0===g?void 0:g.g)&&void 0!==t?t:0:o,T=d?null!==(n=null===g||void 0===g?void 0:g.d)&&void 0!==n?n:0:a,E=((0,r.useMemo)((()=>{var e;const t=M[I];if(t){const e=t.inputs.find((e=>null!==e));if(e)return e.gyouKey}return null!==(e=u[I])&&void 0!==e?e:u[0]}),[I]),(0,r.useMemo)((()=>{var e,t;if(!i)return[];console.log("[YouonKakucho headingChars CALC START] isActive: ".concat(i,", isRandomMode: ").concat(d,", gIdx(prop): ").concat(o,", dIdx(prop): ").concat(a,", randomTarget: ").concat(JSON.stringify(g)));const n=d?null!==(e=null===g||void 0===g?void 0:g.g)&&void 0!==e?e:0:o;if(console.log("  [YouonKakucho headingChars CALC] currentGIdxForHeading: ".concat(n)),d){var r;if(!g)return console.log("  [YouonKakucho headingChars CALC Random] randomTarget is null, returning empty."),[];const e=M[n];if(!e)return console.warn("  [YouonKakucho headingChars CALC Random] randomPracticeGroup is undefined for gIdx: ".concat(n)),[];const t=e.inputs[g.d];if(!t)return console.warn("  [YouonKakucho headingChars CALC Random] randomInputDef is null for gIdx: ".concat(n,", dIdx: ").concat(g.d)),[];const o=t.gyouKey;console.log('  [YouonKakucho headingChars CALC Random] displayGyouKey from inputDef: "'.concat(o,'"'));const a=o&&K[o]?K[o]:void 0;if(!a||0===a.length)return console.warn('  [YouonKakucho headingChars CALC Random] No displayStringArray for displayGyouKey: "'.concat(o,'"')),[];const i=null!==(r=a[0])&&void 0!==r?r:"";if(""===i)return console.warn('  [YouonKakucho headingChars CALC Random] displayString is empty for displayGyouKey: "'.concat(o,'"')),[];console.log('  [YouonKakucho headingChars CALC Random] displayString: "'.concat(i,'"'));const l=i.split(""),s=null===g||void 0===g?void 0:g.char,u=l.map(((e,t)=>{let n=!1;return s&&2===s.length&&(t%2===0&&t+1<l.length?e===s[0]&&l[t+1]===s[1]&&(n=!0):t%2!==0&&t>0&&e===s[1]&&l[t-1]===s[0]&&(n=!0)),{char:e,isPracticeTarget:n}}));return console.log("  [YouonKakucho headingChars CALC Random] Result (target chars):",JSON.stringify(u.filter((e=>e.isPracticeTarget)).map((e=>e.char)))),u}const l=M[n];if(!l)return[];const s=(null===(t=l.inputs.find((e=>null!==e)))||void 0===t?void 0:t.gyouKey)||u[n]||u[0],c=K[s];if(!c||0===c.length)return[];const h=c[0].split(""),f=l.inputs;return h.map(((e,t)=>{const n=Math.floor(t/2);return{char:e,isPracticeTarget:null!==(null===f||void 0===f?void 0:f[n])&&void 0!==(null===f||void 0===f?void 0:f[n])&&n===a}}))}),[i,d,o,a,g])),N=(0,r.useMemo)((()=>{var e,t,n,r;if(d)return g&&null!==(n=null===(r=M[g.g])||void 0===r?void 0:r.inputs[g.d])&&void 0!==n?n:null;if(I<0||I>=M.length||T<0)return null;const o=M[I];return!o||T>=o.inputs.length?null:null!==(e=null===(t=M[I])||void 0===t?void 0:t.inputs[T])&&void 0!==e?e:null}),[d,g,I,T]),P=(0,r.useMemo)((()=>{var e;return null!==(e=null===N||void 0===N?void 0:N.char)&&void 0!==e?e:""}),[N]),A=((0,r.useMemo)((()=>{var e;return null!==(e=null===N||void 0===N?void 0:N.dan)&&void 0!==e?e:""}),[N]),(0,r.useCallback)((()=>{var e,t,n;const r=Math.floor(Math.random()*M.length),o=null===(e=M[r])||void 0===e?void 0:e.inputs;if(!o||0===o.length)return void y(null);const a=[];if(o.forEach(((e,t)=>{null!==e&&a.push(t)})),0===a.length)return void y(null);const i=a[Math.floor(Math.random()*a.length)],l=null===(t=M[r])||void 0===t||null===(n=t.inputs[i])||void 0===n?void 0:n.char;if(!l)return console.error("[YouonKakucho generateRandomTarget] Could not find char for g:".concat(r,", d:").concat(i)),void y(null);y({g:r,d:i,char:l}),p("line"),S(null)}),[])),L=(0,r.useCallback)((()=>{A()}),[A]),F=(0,r.useMemo)((()=>{var e,t;return null!==(e=null===(t=B[c])||void 0===t?void 0:t[l])&&void 0!==e?e:{}}),[c,l]),R=(0,r.useCallback)((()=>{p("line"),y(null),m.current=-1,v.current=-1,b.current=!0,C.current=!1,S(null)}),[]);(0,r.useEffect)((()=>{if(!i&&x.current&&R(),i){const e=i&&!x.current,t=o!==m.current||a!==v.current,n=d!==C.current;e&&(b.current=!0),n?(console.log("[YouonKakucho useEffect] Random mode changed from ".concat(C.current," to ").concat(d,". Calling reset.")),R(),d?(console.log("[YouonKakucho useEffect] Switched to random mode. Selecting new random target."),L()):(p("line"),S(null))):e||!d&&t?(p("line"),S(null)):!d||!b.current&&g||(L(),S(null)),b.current=!1}x.current=i,C.current=d,m.current=o,v.current=a}),[i,d,o,a,g,R,L]);const D=(0,r.useCallback)((e=>{if("release"!==e.type||!i||!N)return{isExpected:!1,shouldGoToNext:void 0,errorLayer:k};const t=e.pressCode;let n,r=!1,o=f,a=null;const l=Object.entries(F).find((e=>{let[t,n]=e;return"\u3083\u3085\u3087"===n})),s=l?parseInt(l[0])+1:-1;if(-1===s)return console.error("useYouonKakuchoPractice: Could not find key code for '\u3083\u3085\u3087'."),{isExpected:!1,shouldGoToNext:void 0,errorLayer:null};switch(f){case"line":Object.entries(w).filter((e=>{let[t,n]=e;return n===N.gyouKey})).map((e=>{let[t,n]=e;return parseInt(t)})).includes(t+1)?(r=!0,o="youon",a=null):a=2;break;case"youon":t+1===s?(r=!0,o="dan",a=null):(o="line",a=2);break;case"dan":o="line",Object.entries(_).filter((e=>{let[t,n]=e;return n===N.dan})).map((e=>{let[t,n]=e;return parseInt(t)})).includes(t+1)?(r=!0,a=null,d?(L(),n=!1):3===T?n=!0:1===T?(null===h||void 0===h||h(),n=void 0):n=!0):a=3}return S(a),o!==f?p(o):r||"line"===f||p("line"),{isExpected:r,shouldGoToNext:n,errorLayer:a}}),[i,f,N,w,_,F,d,p,L,T,h,k]),O=(0,r.useCallback)(((e,t)=>{var n;const r={className:null,overrideKey:null};if(!i||k===t)return r;const o=d?null!==(n=null===g||void 0===g?void 0:g.d)&&void 0!==n?n:-1:T;if(!d&&1!==o&&3!==o)return r;if(!N)return r;const a=f;let l=null,s=null;const u=Object.entries(F).find((e=>{let[t,n]=e;return"\u3083\u3085\u3087"===n})),c=u?F[parseInt(u[0])]:"\u3083\u3085\u3087";switch(a){case"line":l=N.gyouKey,s=2;break;case"youon":l=c,s=2;break;case"dan":l=N.dan,s=3}return null!==l&&t===s&&e.trim()===l.trim()?{className:"bg-blue-100",overrideKey:null}:r}),[i,f,N,F,d,k,T,g]),j=(0,r.useCallback)(((e,t,n)=>i&&k===t&&n===e),[i,k]),H=(0,r.useCallback)((()=>{S(null)}),[]),V=(0,r.useMemo)((()=>{if(N)return{type:"youonKakucho",char:N.char,inputDef:N}}),[N]),U=(0,r.useMemo)((()=>i?"line"===f?"waiting":"running":"idle"),[i,f]);return{headingChars:E,handleInput:D,getHighlightClassName:(e,t,n)=>O(e,t),reset:R,isInvalidInputTarget:j,currentTarget:V,errorHighlightLayer:k,status:U,targetChar:P,clearErrorState:H,targetLayerIndices:(0,r.useMemo)((()=>{const e=new Set([2,3]);return null!==k&&e.add(k),Array.from(e)}),[k]),stage:f}},Fe=e=>{var t;let{gIdx:n,dIdx:o,isActive:a,side:i,layers:l,kb:s,isRandomMode:u}=e;const[c,d]=(0,r.useState)("key1"),[h,f]=(0,r.useState)(new Map),[p,g]=(0,r.useState)(null),y=(0,r.useRef)(n),m=(0,r.useRef)(o),v=(0,r.useRef)(!0),b=(0,r.useRef)(u),x=(0,r.useRef)(a),[C,k]=(0,r.useState)(null),[S,w]=(0,r.useState)("waiting"),_=(0,r.useCallback)((()=>{if(be.length>0){const e=Math.floor(Math.random()*be.length),t=be[e];console.log("[Gairaigo selectNextRandomTarget] New random target: ".concat(t.char)),g(t),d("key1"),f(new Map),k(null)}else g(null)}),[g,d,f]),I=(0,r.useCallback)((()=>{d("key1"),f(new Map),g(null),y.current=-1,m.current=-1,v.current=!0,b.current=!1,k(null),w("waiting")}),[d,f,g]),T=(0,r.useCallback)(((e,t,n)=>{if(!n||e<0||e>=F.length)return null;const r=F[e];if(!r||!r.targets||t<0||t>=r.targets.length)return null;const o=r.targets[t];return o?q(q({},o),{},{type:"gairaigo"}):null}),[]),E=(0,r.useMemo)((()=>u?p:T(n,o,a)),[u,p,n,o,a,T]);(0,r.useEffect)((()=>{if(!a&&x.current)I();else if(a){const e=y.current!==n,t=m.current!==o,r=b.current!==u,i=!x.current&&a;r?(I(),u&&_()):i?(u?p||_():(d("key1"),f(new Map),w("waiting"),k(null)),v.current=!1):u||!e&&!t?!u||p||v.current||_():(d("key1"),f(new Map),w("waiting"),k(null))}x.current=a,y.current=n,m.current=o,b.current=u}),[a,n,o,u,I,_,p,y,m]);const N=(0,r.useMemo)((()=>E?we(E.keys[0],l,s,i):[]),[E,l,s,i]),P=(0,r.useMemo)((()=>E?we(E.actualSecondKey,l,s,i):[]),[E,l,s,i]),A=(0,r.useMemo)((()=>{var e;if(!E)return[];const t=null!==(e=E.actualThirdKey)&&void 0!==e?e:E.keys[2];return we(t,l,s,i)}),[E,l,s,i]),L=(0,r.useMemo)((()=>E&&E.keys.length>3&&E.keys[3]?we(E.keys[3],l,s,i):[]),[E,l,s,i]),K=(0,r.useCallback)((e=>{if(!a||!E)return k(null),{isExpected:!1,shouldGoToNext:void 0,errorLayer:null};let t,r=!1;const{type:i,pressCode:l}=e;let s,h,p=null;if("press"===i)return f((e=>new Map(e).set(l,Date.now()))),{isExpected:!1,shouldGoToNext:void 0,errorLayer:E?C:null};let g=c;if("key1"===c)N.includes(l+1)?(g="key2",r=!0,p=null):(console.log("[Gairaigo handleInput key1] Key1 NO MATCH."),g="key1",s=l,h=2,p=2);else if("key2"===c)P.includes(l+1)?(r=!0,p=null,E.keys.length>2?g="key3":(g="key1",u?(_(),t=!1):t=!0)):(g="key1",s=l,h=2,p=2);else if("key3"===c)if(A.includes(l+1))r=!0,p=null,E.keys.length>3?g="key4":(g="key1",u?(_(),t=!1):t=!0);else{var y;g="key1",s=l;const e=null!==(y=E.actualThirdKey)&&void 0!==y?y:E.keys[2];h="\u201d \xb0 \u5c0f"===e?2:e.endsWith("\u6bb5")?3:2,p=h}else if("key4"===c)if(L.includes(l+1))if(r=!0,p=null,g="key1",u)_(),t=!1;else{const e=F[n];t=!!e&&o===e.targets.length-1}else g="key1",s=l,h=3,p=3;return k(p),w(r?"correct":"incorrect"),g!==c?d(g):r||"key1"===c||d("key1"),{isExpected:r,shouldGoToNext:t,errorPressCode:s,errorExpectedLayer:h,errorLayer:p}}),[a,c,E,N,P,A,L,d,u,_,n,o,k,w,C]),M=(0,r.useMemo)((()=>{if(!a)return[];const e=null===E||void 0===E?void 0:E.char;if(u)return e?e.split("").map(((e,t)=>({char:e,isPracticeTarget:!0}))):[];{var t;const r=null!==(t=F[n])&&void 0!==t?t:null;return r&&r.headerChars?r.headerChars.map((t=>({char:t,isPracticeTarget:t===e}))):[]}}),[a,u,p,n,o,E,c]),R=(0,r.useCallback)(((e,t)=>{const n={className:null,overrideKey:null};if(!a||!E)return n;if(C===t)return n;const r=c;let o="",i="",l=null;var s;if("key1"===r)o=E.keys[0],i=null!==(s=E.keys[0])&&void 0!==s?s:"",l=2;else if("key2"===r)o=E.actualSecondKey,i=E.keys[1],l=2;else if("key3"===r){var u;o=null!==(u=E.actualThirdKey)&&void 0!==u?u:E.keys[2],i=E.keys[2],l="\u201d \xb0 \u5c0f"===E.actualThirdKey||!E.actualThirdKey&&"\u201d \xb0 \u5c0f"===E.keys[2]?2:E.actualThirdKey&&E.actualThirdKey.endsWith("\u6bb5")||!E.actualThirdKey&&E.keys[2].endsWith("\u6bb5")?3:2}else if("key4"===r){const e=E.keys.length>3?E.keys[3]:void 0;o="string"===typeof e?e:"",i=o,l=3}return null===o||void 0===o?n:t===l&&e===o?{className:"bg-blue-100",overrideKey:i}:n}),[c,E,a,C]),D=(0,r.useCallback)(((e,t,n)=>!(!a||!E)&&(C===t&&n===e)),[a,E,C]),O=(0,r.useCallback)((()=>{k(null),w("waiting")}),[k,w]);return{handleInput:K,headingChars:M,getHighlightClassName:R,reset:I,isInvalidInputTarget:D,currentTarget:null!==E&&void 0!==E?E:void 0,targetChar:null!==(t=null===E||void 0===E?void 0:E.char)&&void 0!==t?t:void 0,stage:c,errorHighlightLayer:C,clearErrorState:O,status:S,targetLayerIndex:(0,r.useMemo)((()=>"key1"!==c&&"key2"!==c&&("key3"!==c||"\u201d \xb0 \u5c0f"!==(null===E||void 0===E?void 0:E.actualThirdKey)&&(null!==E&&void 0!==E&&E.actualThirdKey||"\u201d \xb0 \u5c0f"!==(null===E||void 0===E?void 0:E.keys[2])))?"key4"===c||"key3"===c&&(null!==E&&void 0!==E&&E.actualThirdKey&&E.actualThirdKey.endsWith("\u6bb5")||(null===E||void 0===E||!E.actualThirdKey)&&null!==E&&void 0!==E&&E.keys[2].endsWith("\u6bb5"))?3:void 0:2),[c,E]),targetLayerIndices:(0,r.useMemo)((()=>{const e=[2,3];if(null!==C){const t=new Set(e);return t.add(C),Array.from(t)}return e}),[C])}},Re=6e4,De=e=>{let{isActive:t,side:n,kb:o,layers:a}=e;const[i,l]=(0,r.useState)("idle"),[s,u]=(0,r.useState)(5),[c,d]=(0,r.useState)(Re),[h,f]=(0,r.useState)(null),[p,g]=(0,r.useState)("gyouInput"),[y,m]=(0,r.useState)([]),[v,b]=(0,r.useState)(!1),x=(0,r.useRef)(null),C=(0,r.useRef)(null),k=(0,r.useRef)(null),S=(0,r.useRef)(0),w=(0,r.useRef)(0),_=(0,r.useRef)(0),I=(0,r.useRef)(0),T=(0,r.useRef)(0),E=(0,r.useRef)(0),[N,P]=(0,r.useState)(null),A=(0,r.useRef)(t),L=(0,r.useMemo)((()=>{var e,t;return null!==(e=null===(t=B[o])||void 0===t?void 0:t[n])&&void 0!==e?e:{}}),[o,n]),K=(0,r.useMemo)((()=>{const e=ge.filter((e=>e.isTsu));return[...de,...he,...fe,...e]}),[]),M=(0,r.useCallback)((()=>{if(K.length>0){const e=Math.floor(Math.random()*K.length),t=K[e];f(t),"sokuonKomoji"===t.type&&t.isTsu?g("tsuInput"):g("gyouInput")}else f(null)}),[K]);(0,r.useEffect)((()=>(t&&"countdown"===i&&(s>0?x.current=window.setTimeout((()=>{u((e=>e-1))}),1e3):(l("running"),d(Re),k.current=Date.now(),S.current=0,w.current=0,_.current=0,I.current=0,T.current=0,E.current=0,M())),()=>{null!==x.current&&clearTimeout(x.current)})),[t,i,s,M]),(0,r.useEffect)((()=>(t&&"running"===i?C.current=window.setInterval((()=>{var e;const t=Date.now()-(null!==(e=k.current)&&void 0!==e?e:Date.now()),n=Math.max(0,Re-t);if(d(n),0===n){l("finished"),b(!0),C.current&&clearInterval(C.current);const e=S.current,t=w.current,n=_.current,r=1,o=r>0?Math.round(I.current/r):0,a=n>0?Math.max(0,(n-t)/n):0,i={totalQuestions:e,totalCharsTyped:n,correctCharsCount:I.current,correctCount:e,missCount:t,accuracy:a,score:0,cpm:o,maxConsecutiveCorrectChars:E.current,rankMessage:""};P(i),m([])}}),100):"finished"===i&&C.current&&clearInterval(C.current),()=>{null!==C.current&&clearInterval(C.current)})),[t,i,v]),(0,r.useEffect)((()=>{"countdown"===i?m(["".concat(s,"\u79d2")]):"running"===i&&h?m([h.char]):"finished"===i?m(["\u7d42\u4e86\uff01"]):"idle"===i&&m([])}),[i,s,h]);const F=(0,r.useCallback)((()=>{l("idle"),b(!1),u(5),d(Re),f(null),g("gyouInput"),m([]),P(null),k.current=null,S.current=0,w.current=0,_.current=0,I.current=0,T.current=0,E.current=0,null!==x.current&&clearTimeout(x.current),null!==C.current&&clearInterval(C.current)}),[P,m]);(0,r.useEffect)((()=>{!t&&A.current?F():t&&"idle"===i&&(l("countdown"),u(5)),A.current=t}),[t,i,F]);const R=(0,r.useCallback)((e=>{if("running"!==i||!h||v)return{isExpected:!1,shouldGoToNext:!1};if("release"!==e.type)return{isExpected:!1,shouldGoToNext:!1};_.current+=1;const t=e.pressCode;let r=!1,a=null,l=null,s=!1;if("seion"===h.type){const e=h.gyouKey,i=h.danKey,u=_e(t+1,o,n),c=Ie(t+1,o,n);"gyouInput"===p?u===e?(r=!0,a="danInput",l=null):(a="gyouInput",l=2):"danInput"===p&&(c===i?(r=!0,S.current+=1,s=!0,I.current+=h.char.length,M(),a=null,l=null):(w.current+=1,a="gyouInput",s=!1,l=3))}else if("youon"===h.type){const e=h.gyouKey,i=h.danKey,u=_e(t+1,o,n),c=Ie(t+1,o,n),d=Object.entries(L).find((e=>{let[t,n]=e;return"\u3083\u3085\u3087"===n})),f=d?parseInt(d[0])+1:-1;"gyouInput"===p?u===e?(r=!0,a="youonInput",l=null):(a="gyouInput",l=2):"youonInput"===p?t+1===f?(r=!0,a="danInput",l=null):(w.current+=1,s=!1,l=2,a="gyouInput"):"danInput"===p&&(c===i?(r=!0,S.current+=1,s=!0,I.current+=h.char.length,M(),l=null,a=null):(w.current+=1,l=3,s=!1,a="gyouInput"))}else if("dakuon"===h.type){const e=h.gyouKey,i=h.danKey,u=_e(t+1,o,n),c=Ie(t+1,o,n),d=Object.entries(L).find((e=>{let[t,n]=e;return"\u201d \xb0 \u5c0f"===n})),f=d?parseInt(d[0])+1:-1;"gyouInput"===p?u===e?(r=!0,a="dakuonInput",l=null):(a="gyouInput",l=2):"dakuonInput"===p?t+1===f?(r=!0,a="danInput",l=null):(w.current+=1,s=!1,l=2,a="gyouInput"):"danInput"===p&&(c===i?(r=!0,S.current+=1,s=!0,I.current+=h.char.length,M(),l=null,a=null):(w.current+=1,l=3,s=!1,a="gyouInput"))}else if("sokuonKomoji"===h.type&&h.isTsu){const e=Object.entries(L).find((e=>{let[t,n]=e;return"\u3063"===n})),n=e?parseInt(e[0])+1:-1;"tsuInput"===p&&(t+1===n?(r=!0,S.current+=1,s=!0,I.current+=h.char.length,M(),l=null,a=null):(w.current+=1,l=2,s=!1,a="tsuInput"))}let u=!1;return("seion"===h.type&&"danInput"===p||"youon"===h.type&&"danInput"===p||"dakuon"===h.type&&"danInput"===p||"sokuonKomoji"===h.type&&h.isTsu&&"tsuInput"===p)&&(u=!0),u&&(s?(T.current+=1,E.current=Math.max(E.current,T.current)):T.current=0),a&&a!==p?g(a):r||"gyouInput"===p||"tsuInput"===p||null===a||g("gyouInput"),{isExpected:r,shouldGoToNext:!1,errorLayer:l}}),[i,h,p,o,n,M,L,v,g]),D=(0,r.useCallback)(((e,t)=>{const n={className:null,overrideKey:null};if("running"!==i||!h||v)return n;let r=null,o=null;if("seion"===h.type||"dakuon"===h.type)if("gyouInput"===p)r=h.gyouKey,o=2;else if("dakuonInput"===p){const e=Object.entries(L).find((e=>{let[t,n]=e;return"\u201d \xb0 \u5c0f"===n}));r=e?L[parseInt(e[0])]:"\u201d \xb0 \u5c0f",o=2}else"danInput"===p&&(r=h.danKey,o=3);else if("youon"===h.type){const e=Object.entries(L).find((e=>{let[t,n]=e;return"\u3083\u3085\u3087"===n})),t=e?L[parseInt(e[0])]:"\u3083\u3085\u3087";"gyouInput"===p?(r=h.gyouKey,o=2):"youonInput"===p?(r=t,o=2):"danInput"===p&&(r=h.danKey,o=3)}else if("sokuonKomoji"===h.type&&h.isTsu&&"tsuInput"===p){const e=Object.entries(L).find((e=>{let[t,n]=e;return"\u3063"===n}));r=e?L[parseInt(e[0])]:"\u3063",o=2}return null!==r&&t===o&&e===r?{className:"bg-blue-100",overrideKey:null}:n}),[i,h,p,L,v]),O=(0,r.useCallback)(((e,t,n,r)=>!("running"!==i||!h||v)&&(void 0!==r&&(t===r&&n===e))),[i,h,v]);return(0,r.useMemo)((()=>({currentTarget:null!==h&&void 0!==h?h:void 0,getHighlight:()=>({start:null,end:null}),headingChars:y,handleInput:R,getHighlightClassName:D,reset:F,isInvalidInputTarget:O,challengeResults:N,status:i,countdownValue:s,challengeTimer:c,challengeTotalTime:Re})),[h,y,R,D,F,O,N,i,s,c])},Oe={targetChar:null,targetGyouKey:null,targetType:null,isEqualSign:!1,currentStep:0,remainingTime:6e4,status:"idle",targetLayerIndex:6,countdownValue:3,startTime:null,endTime:null,totalQuestions:0,correctAnswers:0,totalCharsTyped:0,totalKeyPresses:0,incorrectKeyPresses:0,currentConsecutiveCorrect:0,maxConsecutiveCorrect:0,challengeResults:null,isLongPressSuccess:!1,showHighlightForEqualSign:!1,currentInputErrorLayer:null},je=e=>{var t;const{isActive:n,side:o,layers:a,kb:i}=e,[l,s]=(0,r.useState)(Oe),u=(0,r.useRef)(l),c=(0,r.useRef)(null),d=(0,r.useRef)(null),h=(0,r.useRef)(null),f=(0,r.useRef)(n);(0,r.useEffect)((()=>{u.current=l}),[l]);const p=(0,r.useRef)([]).current;(0,r.useEffect)((()=>{0===p.length&&(b.forEach((e=>{e.chars.forEach(((t,n)=>{var r,o;const a=null!==(r=null===(o=e.inputs[n])||void 0===o?void 0:o.keyName)&&void 0!==r?r:null;p.push({char:t,gyouKey:a,layerIndex:6,type:"kigo1",isEqualSign:!1})}))})),x.forEach((e=>{e.chars.forEach(((t,n)=>{var r,o;const a=null!==(r=null===(o=e.inputs[n])||void 0===o?void 0:o.gyouKey)&&void 0!==r?r:null;p.push({char:t,gyouKey:a,layerIndex:7,type:"kigo2",isEqualSign:!1})}))})),C.forEach((e=>{e.chars.forEach(((t,n)=>{var r,o;const a="\uff1d"===t,i=a?null:null!==(r=null===(o=e.inputs[n])||void 0===o?void 0:o.gyouKey)&&void 0!==r?r:null;p.push({char:t,gyouKey:i,layerIndex:8,type:"kigo3",isEqualSign:a})}))})))}),[p]);const g=(0,r.useCallback)((()=>{null!==d.current&&(clearTimeout(d.current),d.current=null)}),[]),y=(0,r.useCallback)((()=>{if(0===p.length)return void console.warn("[KigoChallenge] allKigoChars is empty, cannot select next target.");const e=Math.floor(Math.random()*p.length),t=p[e];s((e=>q(q({},e),{},{targetChar:t.char,targetGyouKey:t.gyouKey,targetLayerIndex:t.layerIndex,targetType:t.type,isEqualSign:t.isEqualSign,currentStep:0,isLongPressSuccess:!1,showHighlightForEqualSign:!1,currentInputErrorLayer:null}))),c.current=null,g(),h.current&&(clearTimeout(h.current),h.current=null)}),[p,g]),m=(0,r.useCallback)((()=>{s(q(q({},Oe),{},{status:"countdown",remainingTime:6e4,countdownValue:3,startTime:Date.now(),endTime:null,challengeResults:null,isLongPressSuccess:!1,showHighlightForEqualSign:!1,currentConsecutiveCorrect:0,maxConsecutiveCorrect:0,currentInputErrorLayer:null})),c.current=null,g()}),[g]);(0,r.useEffect)((()=>{if(n&&"countdown"===l.status){if(l.countdownValue>0){const e=setTimeout((()=>{s((e=>q(q({},e),{},{countdownValue:e.countdownValue-1})))}),1e3);return()=>clearTimeout(e)}s((e=>q(q({},e),{},{status:"running",remainingTime:6e4,startTime:Date.now(),currentInputErrorLayer:null})))}}),[n,l.status,l.countdownValue]),(0,r.useEffect)((()=>{"running"!==l.status||l.targetChar||y()}),[l.status,y,l.targetChar]);const v=(0,r.useCallback)((()=>{const e=Date.now(),{startTime:t,totalQuestions:n,correctAnswers:r,totalCharsTyped:o,totalKeyPresses:a,incorrectKeyPresses:i,maxConsecutiveCorrect:l}=u.current,c=(t?(e-t)/1e3:0)/60,d={totalQuestions:n,totalCharsTyped:a,correctCharsCount:r,correctCount:r,missCount:i,accuracy:a>0?(a-i)/a:0,score:0,cpm:c>0?Math.round(r/c):0,rankMessage:"",maxConsecutiveCorrectChars:l};s((t=>q(q({},t),{},{endTime:e,status:"finished",challengeResults:d,targetChar:null,targetGyouKey:null,targetLayerIndex:null,showHighlightForEqualSign:!1,currentInputErrorLayer:null}))),g(),h.current&&(clearTimeout(h.current),h.current=null)}),[g]);(0,r.useEffect)((()=>{let e=null;return n&&"running"===l.status?e=setInterval((()=>{s((e=>{const t=Math.max(0,e.remainingTime-100);return 0===t&&"running"===e.status?q(q({},e),{},{remainingTime:0,status:"finished"}):q(q({},e),{},{remainingTime:t,showHighlightForEqualSign:e.showHighlightForEqualSign})}))}),100):e&&clearInterval(e),()=>{e&&clearInterval(e)}}),[n,l.status]),(0,r.useEffect)((()=>{"finished"!==l.status||l.endTime||v()}),[l.status,l.endTime,v]),(0,r.useEffect)((()=>{!n&&f.current?(s(Oe),c.current=null,g(),h.current&&(clearTimeout(h.current),h.current=null)):n&&"idle"===l.status&&m(),f.current=n}),[n,l.status,m,g]);const k=(0,r.useCallback)((e=>{const{targetChar:t,targetGyouKey:n,targetLayerIndex:r,isEqualSign:o,currentStep:i,targetType:l}=u.current,{isLongPressSuccess:f}=u.current,p=(e,t)=>{if(!e)return-1;const n=null!==t&&void 0!==t?t:-1;if(-1===n||!a[n])return console.log("[findKeyCode] Invalid layer. keyName: ".concat(e,", layerIdx: ").concat(t,", expectedLayer: ").concat(n,", layers[expectedLayer] exists: ").concat(!!a[n])),-1;const r=a[n],o=e.trim();console.log('[findKeyCode] Searching for "'.concat(o,'" in layer ').concat(n,":"),r.map((e=>e.trim())));for(let a=0;a<r.length;a++)if(r[a]&&r[a].trim()===o)return console.log('[findKeyCode] Found "'.concat(o,'" at index ').concat(a," (keyCode ").concat(a+1,")")),a+1;return console.log('[findKeyCode] "'.concat(o,'" NOT FOUND in layer ').concat(n)),-1},m=()=>p(n,6),v=()=>p(P,8);if("press"===e.type){const t=e.pressCode,{targetType:n}=u.current;if("`"===u.current.targetChar){console.log("[KigoChallenge DEBUG ` target PRESS] info:",JSON.stringify(e)),console.log("  stateRef.current (press):",JSON.stringify(u.current));const t=v(),n=p("`",8);console.log("  expectedFirstKeyCodeDbg (=\\n\u8a18\u53f7): ".concat(t,", expectedSecondKeyCodeDbg (`): ").concat(n))}if("kigo1"===n){const n=m();t+1===n&&(c.current={code:t,timestamp:e.timestamp},g(),d.current=window.setTimeout((()=>{c.current&&c.current.code===t&&s((e=>q(q({},e),{},{isLongPressSuccess:!0}))),d.current=null}),300))}return{isExpected:!1,shouldGoToNext:!1,errorLayer:null}}const b=u.current.targetChar;if("`"===b||"?"===b){console.log("[KigoChallenge DEBUG ".concat(b," target RELEASE] info:"),JSON.stringify(e)),console.log("  stateRef.current (release):",JSON.stringify(u.current));const t=v(),n=b,r=p(n,8);console.log("  expectedFirstKeyCodeDbg (=\\n\u8a18\u53f7): ".concat(t,", expectedSecondKeyCodeDbg (").concat(n,"): ").concat(r))}if("running"!==u.current.status||!t)return{isExpected:!1,shouldGoToNext:!1,errorLayer:null};s((e=>q(q({},e),{},{totalKeyPresses:e.totalKeyPresses+1})));let x=-1,C=-1,k=!1,S=!1,w=i,_=!1,I=null;if(0===i)if("kigo1"===l){if(x=m(),c.current&&c.current.code+1===x){const t=c.current.timestamp,n=e.timestamp-t;g(),n>=300&&f?(k=!0,w=1,_=!0,S=!0,I=null):(k=!1,I=6,S=!0)}else k=!1,I=6,S=!0;c.current=null,s((e=>q(q({},e),{},{isLongPressSuccess:!1})))}else"kigo2"===l?(x=p(t,7),e.pressCode+1===x?(k=!0,w=1,I=null,S=!1):(k=!1,I=7,S=!0)):"kigo3"===l&&(x=v(),console.log('[KigoChallenge DEBUG kigo3 step0 !isEqualSign] targetChar: "'.concat(t,'", pressCode+1: ').concat(e.pressCode+1,", expectedFirstKeyCode (=\\n\u8a18\u53f7): ").concat(x)),e.pressCode+1===x?(console.log("[KigoChallenge DEBUG kigo3 step0 !isEqualSign] MATCH!"),k=!0,o&&(h.current&&clearTimeout(h.current),s((e=>q(q({},e),{},{showHighlightForEqualSign:!1}))),h.current=window.setTimeout((()=>{"\uff1d"===u.current.targetChar&&1===u.current.currentStep&&s((e=>q(q({},e),{},{showHighlightForEqualSign:!0}))),h.current=null}),300)),w=1,I=null,S=!1):(console.log("[KigoChallenge DEBUG kigo3 step0 !isEqualSign] NO MATCH."),k=!1,I=8,S=!0));else if(1===i)if("kigo2"===l)C=p("\u8a18\u53f7",7),e.pressCode+1===C?(k=!0,w=2,_=!0,S=!0,I=null):(k=!1,I=7,S=!0);else if("kigo3"===l){C=(()=>{const e=u.current.targetChar,t=u.current.targetGyouKey,n=u.current.isEqualSign;if(console.log("[getExpectedKeyCodeForKigo3Layer8] currentTargetCharFromState: '".concat(e,"', currentTargetGyouKeyFromState: '").concat(t,"', currentIsEqualSignFromState: ").concat(n)),n)return p(P,8);if("\u2026"===e){const e=p("\u2026",8);return console.log("[getExpectedKeyCodeForKigo3Layer8] For '\u2026', found keycode: ".concat(e)),e}const r=p(t,8);return console.log("[getExpectedKeyCodeForKigo3Layer8] For '".concat(t,"' (target char '").concat(e,"'), found keycode: ").concat(r)),r})();let n=C;-1===n?(console.error("[KigoChallenge handleInput] Target char '".concat(t,"' not found in layer 8 keymap!")),k=!1,I=8,S=!0):e.pressCode+1===n?(k=!0,w=2,_=!0,S=!0,I=null):(k=!1,I=8,S=!0)}else k=!1,S=!0;return S&&s(k?e=>q(q({},e),{},{currentConsecutiveCorrect:e.currentConsecutiveCorrect+1,maxConsecutiveCorrect:Math.max(e.maxConsecutiveCorrect,e.currentConsecutiveCorrect+1)}):e=>q(q({},e),{},{currentConsecutiveCorrect:0})),k?(s((e=>{var n;return q(q({},e),{},{currentStep:w,totalCharsTyped:e.totalCharsTyped+(null!==(n=null===t||void 0===t?void 0:t.length)&&void 0!==n?n:0),currentInputErrorLayer:null})})),_&&(s((e=>q(q({},e),{},{totalQuestions:e.totalQuestions+1,correctAnswers:e.correctAnswers+1}))),y()),{isExpected:!0,shouldGoToNext:!1,errorLayer:null}):(s((e=>q(q({},e),{},{currentStep:0,incorrectKeyPresses:e.incorrectKeyPresses+1,currentInputErrorLayer:I}))),o&&1===i&&(h.current&&clearTimeout(h.current),s((e=>q(q({},e),{},{showHighlightForEqualSign:!1})))),{isExpected:!1,shouldGoToNext:!1,errorLayer:I})}),[a,y,g,u]),S=(0,r.useCallback)((()=>{s(Oe),c.current=null,g(),h.current&&(clearTimeout(h.current),h.current=null)}),[g]),w=(0,r.useMemo)((()=>"countdown"===l.status?["".concat(l.countdownValue,"\u79d2")]:"finished"===l.status&&l.challengeResults?["\u7d42\u4e86\uff01"]:"running"===l.status&&l.targetChar?[l.targetChar]:["\u8aad\u307f\u8fbc\u307f\u4e2d..."]),[l.status,l.countdownValue,l.targetChar,l.challengeResults]),_=(0,r.useCallback)(((e,t)=>{const n={className:null,overrideKey:null},{status:r,targetGyouKey:o,targetLayerIndex:a,isEqualSign:i,currentStep:s,targetType:u,targetChar:c,showHighlightForEqualSign:d,currentInputErrorLayer:h}=l;if("running"!==r||null===a)return n;if(null!==h&&t===h)return n;let f=null,p=null;var g;if("kigo1"===u){if(f=o,p=6,t===p&&e.trim()===(null===(g=f)||void 0===g?void 0:g.trim()))return{className:l.isLongPressSuccess?"bg-green-200":"bg-blue-100",overrideKey:null}}else if("kigo2"===u){var y;if(p=7,0===s?f=l.targetChar:1===s&&(f="\u8a18\u53f7"),t===p&&e.trim()===(null===(y=f)||void 0===y?void 0:y.trim()))return{className:"bg-blue-100",overrideKey:null}}else if("kigo3"===u){var m;if(p=8,0===s?f=P:1===s&&(f=i?P:c),i&&1===s&&!d)return n;if(t===p&&e.trim()===(null===(m=f)||void 0===m?void 0:m.trim()))return{className:"bg-blue-100",overrideKey:null}}return n}),[l]),I=(0,r.useCallback)(((e,t,n)=>{const{status:r,targetLayerIndex:o,currentInputErrorLayer:a}=u.current;return"running"===r&&null!==o&&(null!==a&&t===a&&n===e)}),[u]),T=(0,r.useCallback)((()=>({start:null,end:null})),[]),E=(0,r.useCallback)((()=>{s((e=>q(q({},e),{},{currentInputErrorLayer:null})))}),[s]),N=(0,r.useMemo)((()=>{if("kigo3"===l.targetType){return a.map(((e,t)=>8===t?e.map((e=>{const t=e.trim();return"\u3002"===t?",":"\u3001"===t?".":e})):e))}return a}),[l.targetType,a]);return{handleInput:k,reset:S,headingChars:w,getHighlightClassName:_,isInvalidInputTarget:I,getHighlight:T,targetLayerIndex:l.targetLayerIndex,displayLayers:N,challengeResults:l.challengeResults,status:l.status,countdownValue:l.countdownValue,targetChar:null!==(t=l.targetChar)&&void 0!==t?t:void 0,challengeTimer:l.remainingTime,challengeTotalTime:6e4,errorHighlightLayer:l.currentInputErrorLayer,clearErrorState:E}},He={gyouKey:null,hasYouon:!1,hasDakuon:!1,hasHandakuon:!1},Ve=1500,Be=18e4,Ue="PUNCTUATION_STEP_1",Ge=(e,t)=>{var n;if(console.log("[TanbunChallenge getCurrentKanaTargetInfo] Called with char: '".concat(e,"'")),!e)return console.log("[TanbunChallenge getCurrentKanaTargetInfo] Char is null or empty, returning null."),null;const r=Ce.find((t=>t.char===e));if(r)return console.log("[TanbunChallenge getCurrentKanaTargetInfo] Found Youdakuon (from allYoudakuonCharInfos):",r),r;const o=xe.find((t=>t.char===e));if(o)return console.log("[TanbunChallenge getCurrentKanaTargetInfo] Found Youhandakuon (from allYouhandakuonCharInfos):",o),o;for(const a of u){var l;if(null!==(l=c[a])&&void 0!==l&&l.includes(e)){var h;const t=null===(h=c[a])||void 0===h?void 0:h.indexOf(e);if(-1!==t&&void 0!==t){var g,v;const n={type:"youon",char:e,gyouKey:a,danKey:null!==(g=null===(v=d[a])||void 0===v?void 0:v[t])&&void 0!==g?g:""};return console.log("[TanbunChallenge getCurrentKanaTargetInfo] Found Youon:",n),n}}}for(const a of Object.keys(f)){var b;if(null!==(b=f[a])&&void 0!==b&&b.includes(e)){var x;const t=null===(x=f[a])||void 0===x?void 0:x.indexOf(e);if(-1!==t&&void 0!==t){var C,k;const n={type:"dakuon",char:e,gyouKey:a,danKey:null!==(C=null===(k=p[a])||void 0===k?void 0:k[t])&&void 0!==C?C:""};return console.log("[TanbunChallenge getCurrentKanaTargetInfo] Found Dakuon:",n),n}}}if(null!==(n=y["\u306f\u884c"])&&void 0!==n&&n.includes(e)){var S;const t="\u306f\u884c",n=null===(S=y[t])||void 0===S?void 0:S.indexOf(e);if(-1!==n&&void 0!==n){var w,_;const r={type:"handakuon",char:e,gyouKey:t,danKey:null!==(w=null===(_=m[t])||void 0===_?void 0:_[n])&&void 0!==w?w:""};return console.log("[TanbunChallenge getCurrentKanaTargetInfo] Found Handakuon:",r),r}}for(const u of a){var I;if(null!==(I=s[u])&&void 0!==I&&I.includes(e)){var T;const t=null===(T=s[u])||void 0===T?void 0:T.indexOf(e);if(-1!==t&&void 0!==t){let n="";var E;if("\u3084\u884c"===u)"\u3084"===e?n="\u3042\u6bb5":"\u3086"===e?n="\u3046\u6bb5":"\u3088"===e&&(n="\u304a\u6bb5");else n=null!==(E=i[t])&&void 0!==E?E:"";if(n){const t={type:"seion",char:e,gyouKey:u,danKey:n};return console.log("[TanbunChallenge getCurrentKanaTargetInfo] Found Seion:",t),t}}}}if("\u3063"===e){const t={type:"sokuonKomoji",char:e,isTsu:!0};return console.log("[TanbunChallenge getCurrentKanaTargetInfo] Found Sokuon '\u3063':",t),t}if("\u30fc"===e){const t={type:"kigo",char:e,keyName:"\u30fc",layerIndex:0};return console.log("[TanbunChallenge getCurrentKanaTargetInfo] Found Kigo '\u30fc':",t),t}const N=t[8];if(N&&N.includes(e)){const t={type:"kigo",char:e,keyName:e,layerIndex:8};return console.log("[TanbunChallenge getCurrentKanaTargetInfo] Found Kigo '".concat(e,"' on layer 8:"),t),t}if("\u3002"===e){const t={type:"kigo",char:e,keyName:"\u3002",layerIndex:8};return console.log("[TanbunChallenge getCurrentKanaTargetInfo] Found Kigo '\u3002':",t),t}if("\u3001"===e){const t={type:"kigo",char:e,keyName:"\u3001",layerIndex:8};return console.log("[TanbunChallenge getCurrentKanaTargetInfo] Found Kigo '\u3001':",t),t}return console.log("[TanbunChallenge getCurrentKanaTargetInfo] Char '".concat(e,"' not matched by specific types, returning as 'unknown'.")),{type:"unknown",char:e}},ze=(e,t,n)=>{if(!e||t>=e.length)return{char:"",info:null};const r=e[t];let o=r,a=Ge(r,n);if(t+1<e.length){const i=r+e[t+1],l=Ge(i,n);!l||"youon"!==l.type&&"youdakuon"!==l.type&&"youhandakuon"!==l.type||(o=i,a=l)}return{char:o,info:a}},We=e=>{let{isActive:t,kb:n,side:o,layers:a,showKeyLabels:l}=e;const[u,h]=(0,r.useState)("idle"),[g,v]=(0,r.useState)(5),[b,x]=(0,r.useState)(Be),[C,k]=(0,r.useState)(""),[T,E]=(0,r.useState)(0),[N,A]=(0,r.useState)([]),[L,K]=(0,r.useState)(He),[M,F]=(0,r.useState)({typedEndIndex:0}),[R,D]=(0,r.useState)(null),O=(0,r.useRef)(null),j=(0,r.useRef)(null),G=(0,r.useRef)(null),z=(0,r.useRef)(0),W=(0,r.useRef)(0),Y=(0,r.useRef)(0),$=(0,r.useRef)(0),Q=(0,r.useRef)(0),[X,Z]=(0,r.useState)(null),J=(0,r.useRef)(null),ee=(0,r.useRef)(t),te=(0,r.useRef)("");console.log("[TanbunChallenge RENDER] isActive: ".concat(t,", status: ").concat(u,", currentIndex: ").concat(T,", currentTargetChar: ").concat(R,", inputState:"),JSON.parse(JSON.stringify(L)));const ne=(0,r.useMemo)((()=>{var e,t;const r=null!==(e=null===(t=B[n])||void 0===t?void 0:t[o])&&void 0!==e?e:{},a=e=>{const t=Object.entries(r).find((t=>{let[n,r]=t;return r===e}));return t?parseInt(t[0])+1:null};return{youon:a("\u3083\u3085\u3087"),dakuon:a("\u201d \xb0 \u5c0f"),handakuon:a("\u534a\u6fc1\u97f3"),sokuon:a("\u3063"),kigo:a("\u8a18\u53f7")}}),[n,o]),re=(0,r.useMemo)((()=>{const e={},t=["\u3002","\u3001","\u30fc","\uff5e","\uff01","\uff1f","\uff03","\uff04","\uff05","\uff06","\uff5c","\uff1d","\uff3e","\u2026","\uff0e","\uff0c"],n=a[0];n&&t.forEach((t=>{const r=n.indexOf(t);-1!==r&&(e[t]=r)}));const r=a[8];r&&r.length>0&&t.forEach((t=>{const n="\uff1d"===t?P:t,o=r.indexOf(n);-1!==o&&(e[t]=o)}));const o=a[7];return o&&o.length>0&&t.forEach((t=>{const n=o.indexOf(t);-1!==n&&(e[t]=n)})),console.log("[TanbunChallenge singleCharKeyCodes calculated]",e),e}),[n,o,a]),oe=(0,r.useCallback)((()=>{null!==J.current&&(console.log("[TanbunChallenge clearInputTimeout] Clearing timeout ID: ".concat(J.current)),clearTimeout(J.current),J.current=null)}),[]),ae=(0,r.useCallback)((()=>{console.log("[TanbunChallenge resetInputStateAndClearTimeout] Resetting inputState to initial and clearing timeout."),K(He),oe()}),[oe]),ie=(0,r.useCallback)((()=>{if(console.log("[TanbunChallenge selectNextSentence] Called. Remaining sentences: ".concat(N.length)),N.length>0){const e=Math.floor(Math.random()*N.length),t=N[e];console.log('[TanbunChallenge selectNextSentence] Selected new sentence: "'.concat(t,'"')),k(t),te.current=t,E(0),D(t[0]),F({typedEndIndex:0}),A((t=>{const n=t.filter(((t,n)=>n!==e));return n}))}else console.log('[TanbunChallenge selectNextSentence] No more sentences. Setting to "\u5168\u3066\u306e\u77ed\u6587\u304c\u7d42\u4e86\u3057\u307e\u3057\u305f\uff01"'),k("\u5168\u3066\u306e\u77ed\u6587\u304c\u7d42\u4e86\u3057\u307e\u3057\u305f\uff01"),E(0),D(null);oe()}),[N,oe,D]);(0,r.useEffect)((()=>(console.log("[TanbunChallenge useEffect Countdown] isActive: ".concat(t,", status: ").concat(u,", countdownValue: ").concat(g)),t&&"countdown"===u&&(g>0?O.current=window.setTimeout((()=>{v((e=>e-1))}),1e3):(console.log("[TanbunChallenge useEffect Countdown] Countdown finished. Setting status to 'running'."),h("running"),x(Be),G.current=Date.now(),A([...U]))),()=>{null!==O.current&&clearTimeout(O.current)})),[t,u,g]),(0,r.useEffect)((()=>{console.log("[TanbunChallenge useEffect SelectFirstSentence] status: ".concat(u,", remainingSentences.length: ").concat(N.length,', currentSentence: "').concat(C,'"')),"running"===u&&N.length>0&&!C&&(console.log("[TanbunChallenge useEffect SelectFirstSentence] Conditions met, calling selectNextSentence."),ie())}),[u,N,C,ie]),(0,r.useEffect)((()=>(console.log("[TanbunChallenge useEffect TrainingTimer] isActive: ".concat(t,", status: ").concat(u)),t&&"running"===u?j.current=window.setInterval((()=>{var e;const t=Date.now()-(null!==(e=G.current)&&void 0!==e?e:Date.now()),n=Math.max(0,Be-t);if(x(n),0===n){console.log("[TanbunChallenge useEffect TrainingTimer] Time's up! Setting status to 'finished'."),h("finished"),j.current&&clearInterval(j.current);const e=$.current,t=W.current,n=Y.current,r=n>0?Math.max(0,(n-t)/n):0,o=3,a=o>0?Math.round(e/o):0,i={totalQuestions:Q.current,totalCharsTyped:n,correctCharsCount:e,correctCount:e,missCount:t,accuracy:r,score:0,cpm:a,rankMessage:""};console.log("[TanbunChallenge useEffect TrainingTimer] Challenge finished. Results:",i),Z(i)}}),100):"finished"===u&&j.current&&clearInterval(j.current),()=>{null!==j.current&&clearInterval(j.current)})),[t,u]);const le=(0,r.useCallback)((()=>{console.log("[TanbunChallenge reset] Called."),h("idle"),v(5),x(Be),k(""),te.current="",E(0),D(null),A([]),F({typedEndIndex:0}),Z(null),G.current=null,K(He),z.current=0,W.current=0,Y.current=0,$.current=0,Q.current=0,null!==O.current&&clearTimeout(O.current),null!==j.current&&clearInterval(j.current),oe()}),[oe,D]);(0,r.useEffect)((()=>{console.log("[TanbunChallenge useEffect ActiveState] isActive: ".concat(t,", prevIsActiveRef.current: ").concat(ee.current,", status: ").concat(u)),!t&&ee.current?(console.log("[TanbunChallenge useEffect ActiveState] Resetting state because isActive became false."),le()):t&&"idle"===u&&(console.log("[TanbunChallenge useEffect ActiveState] Practice is active and status is idle. Setting status to 'countdown'."),h("countdown")),ee.current=t}),[t,u,le,oe]);const se=(0,r.useCallback)((e=>{var t,r,l;if(console.log("[TanbunChallenge handleInput ENTRY] inputInfo:",e,"status: ".concat(u,', currentSentence: "').concat(te.current,'", currentIndex: ').concat(T,", inputState:"),JSON.parse(JSON.stringify(L))),"running"!==u||!te.current||"release"!==e.type)return console.log("[TanbunChallenge handleInput] Bailing out. status: ".concat(u,', currentSentence: "').concat(te.current,'", inputType: ').concat(e.type)),{isExpected:!1,shouldGoToNext:!1};const h=e.pressCode;Y.current+=1;let g=null,v=!1;const{char:b,info:x}=ze(te.current,T,a),C=b,k=x,N=re[C];if(console.log("[TanbunChallenge handleInput] Target char: '".concat(C,"', expectedSingleCharPressCode: ").concat(N,", actual pressCode: ").concat(h)),("\u3002"===C||"\u3001"===C)&&L.gyouKey!==Ue){const t=a[8],n=null===t||void 0===t?void 0:t.indexOf(P),r=null===t||void 0===t?void 0:t.indexOf("\u3002"),o=null===t||void 0===t?void 0:t.indexOf("\u3001");if(null===L.gyouKey)return-1!==n&&h===n&&8===e.layerIndex?(oe(),K(q(q({},He),{},{gyouKey:Ue})),J.current=window.setTimeout(ae,Ve),console.log('[TanbunChallenge handleInput] Punctuation step 1: "'.concat(P,'" pressed. Waiting for punctuation key.')),{isExpected:!0,shouldGoToNext:!1}):(W.current+=1,ae(),{isExpected:!1,shouldGoToNext:!1});if(L.gyouKey===Ue)if("\u3002"===C&&-1!==r&&h===r&&8===e.layerIndex)g="\u3002",console.log("[TanbunChallenge handleInput] '\u3002' step 2: \"\u3002\" pressed. Typed char: '".concat(g,"'."));else{if("\u3001"!==C||-1===o||h!==o||8!==e.layerIndex)return W.current+=1,ae(),console.log("[TanbunChallenge handleInput] Punctuation step 2: Incorrect key 0x".concat(h.toString(16)," on layer ").concat(e.layerIndex,". Expected '").concat(C,"' (code ").concat("\u3002"===C?r:o,") on layer 8.")),{isExpected:!1,shouldGoToNext:!1};g="\u3001",console.log("[TanbunChallenge handleInput] '\u3001' step 2: \"\u3001\" pressed. Typed char: '".concat(g,"'."))}else if(L.gyouKey===Ue&&"\u3002"!==C&&"\u3001"!==C)return W.current+=1,ae(),{isExpected:!1,shouldGoToNext:!1}}if(null===g&&"kigo"===(null===k||void 0===k?void 0:k.type)&&void 0!==N&&null!==N&&h===N)void 0!==k.layerIndex&&e.layerIndex===k.layerIndex&&(g=C,console.log("[TanbunChallenge handleInput] Single char direct match: '".concat(g,"'. Resetting inputState.")),K(He),oe());else if(null===g){var A,M,R;const e=_e(h+1,n,o),a=Ie(h+1,n,o),u=null!==(A=null===(M=B[n])||void 0===M?void 0:M[o])&&void 0!==A?A:{},v=null===(R=Object.entries(u).find((e=>{let[t,n]=e;return parseInt(t)===h})))||void 0===R?void 0:R[1];if(console.log("[TanbunChallenge handleInput KANA_LOGIC] pressCode: 0x".concat(h.toString(16),", currentGyouKey: ").concat(e,", currentDanKey: ").concat(a,", funcKeyName: ").concat(v,", inputState:"),JSON.parse(JSON.stringify(L))),null===L.gyouKey){if("\u3063"!==v){if(e){let n=null;if(k)switch(k.type){case"seion":case"youon":case"dakuon":case"handakuon":case"sokuonKomoji":case"kigo":n=k.gyouKey;break;case"youdakuon":case"youhandakuon":n=k.inputDef.gyouKey;break;case"youonKakucho":n=null===(t=k.inputDef)||void 0===t?void 0:t.gyouKey}return k&&n===e?(oe(),K(q(q({},He),{},{gyouKey:e})),J.current=window.setTimeout(ae,Ve),{isExpected:!0,shouldGoToNext:!1}):k&&"kigo"===k.type&&"\u8a18\u53f7"===e&&"\u8a18\u53f7"===k.keyName?(oe(),K(q(q({},He),{},{gyouKey:"\u8a18\u53f7"})),J.current=window.setTimeout(ae,Ve),{isExpected:!0,shouldGoToNext:!1}):(W.current+=1,ae(),{isExpected:!1,shouldGoToNext:!1})}return"\u8a18\u53f7"===v&&k&&"kigo"===k.type&&"\u8a18\u53f7"===k.keyName?(oe(),K(q(q({},He),{},{gyouKey:"\u8a18\u53f7"})),J.current=window.setTimeout(ae,Ve),{isExpected:!0,shouldGoToNext:!1}):(W.current+=1,ae(),{isExpected:!1,shouldGoToNext:!1})}if("sokuonKomoji"!==(null===k||void 0===k?void 0:k.type)||!k.isTsu)return W.current+=1,ae(),{isExpected:!1,shouldGoToNext:!1};g="\u3063"}else if(L.gyouKey){if("\u3083\u3085\u3087"===v){let e=null;if(k)switch(k.type){case"seion":case"youon":case"dakuon":case"handakuon":e=k.gyouKey;break;case"youdakuon":case"youhandakuon":e=k.inputDef.gyouKey;break;case"youonKakucho":e=null===(r=k.inputDef)||void 0===r?void 0:r.gyouKey}return L.gyouKey!==e||"youon"!==(null===k||void 0===k?void 0:k.type)&&"youdakuon"!==(null===k||void 0===k?void 0:k.type)&&"youhandakuon"!==(null===k||void 0===k?void 0:k.type)?(W.current+=1,ae(),{isExpected:!1,shouldGoToNext:!1}):(oe(),K((e=>q(q({},e),{},{hasYouon:!0}))),J.current=window.setTimeout(ae,Ve),{isExpected:!0,shouldGoToNext:!1})}if("\u201d \xb0 \u5c0f"===v){let e=null;if(k)switch(k.type){case"seion":case"youon":case"dakuon":case"handakuon":e=k.gyouKey;break;case"youdakuon":case"youhandakuon":e=k.inputDef.gyouKey;break;case"youonKakucho":e=null===(l=k.inputDef)||void 0===l?void 0:l.gyouKey}if(L.gyouKey===e&&("dakuon"===(null===k||void 0===k?void 0:k.type)||"youdakuon"===(null===k||void 0===k?void 0:k.type)||"handakuon"===(null===k||void 0===k?void 0:k.type)&&"\u306f\u884c"===L.gyouKey||"youhandakuon"===(null===k||void 0===k?void 0:k.type)&&"\u306f\u884c"===L.gyouKey)){if(oe(),"\u306f\u884c"===L.gyouKey&&L.hasDakuon&&!L.hasHandakuon){if("handakuon"!==k.type&&"youhandakuon"!==k.type)return W.current+=1,ae(),{isExpected:!1,shouldGoToNext:!1};K((e=>q(q({},e),{},{gyouKey:e.gyouKey,hasYouon:e.hasYouon,hasDakuon:!1,hasHandakuon:!0})))}else{if(L.hasDakuon||L.hasHandakuon)return W.current+=1,ae(),{isExpected:!1,shouldGoToNext:!1};K((e=>q(q({},e),{},{gyouKey:e.gyouKey,hasYouon:e.hasYouon,hasDakuon:!0,hasHandakuon:!1})))}return J.current=window.setTimeout(ae,Ve),{isExpected:!0,shouldGoToNext:!1}}return W.current+=1,ae(),{isExpected:!1,shouldGoToNext:!1}}if("\u534a\u6fc1\u97f3"===v){let e=null;if(k)switch(k.type){case"handakuon":e=k.gyouKey;break;case"youhandakuon":e=k.inputDef.gyouKey}return"\u306f\u884c"!==L.gyouKey||L.gyouKey!==e||"handakuon"!==(null===k||void 0===k?void 0:k.type)&&"youhandakuon"!==(null===k||void 0===k?void 0:k.type)?(W.current+=1,ae(),{isExpected:!1,shouldGoToNext:!1}):(oe(),K((e=>q(q({},e),{},{gyouKey:e.gyouKey,hasYouon:e.hasYouon,hasDakuon:!1,hasHandakuon:!0}))),J.current=window.setTimeout(ae,Ve),{isExpected:!0,shouldGoToNext:!1})}if("\u8a18\u53f7"===v){if("\u8a18\u53f7"===L.gyouKey||!H[L.gyouKey])return W.current+=1,ae(),{isExpected:!1,shouldGoToNext:!1};g=H[L.gyouKey]}else{if(!a&&"\u8a18\u53f7"!==L.gyouKey)return W.current+=1,ae(),{isExpected:!1,shouldGoToNext:!1};{oe();const e=L.gyouKey;if("\u8a18\u53f7"===e){const e=V[h];if(!e)return W.current+=1,ae(),{isExpected:!1,shouldGoToNext:!1};g=e.split("\n")[0]}else if(a){const t=i.indexOf(a);if(L.hasYouon&&L.hasDakuon){var O;const t=null===(O=w[e])||void 0===O?void 0:O.indexOf(a);var j,U;if(-1!==t&&void 0!==t)g=null!==(j=null===(U=S[e])||void 0===U?void 0:U[t])&&void 0!==j?j:null}else if(L.hasYouon&&L.hasHandakuon){var G;const t=null===(G=I[e])||void 0===G?void 0:G.indexOf(a);var z,X;if(-1!==t&&void 0!==t)g=null!==(z=null===(X=_[e])||void 0===X?void 0:X[t])&&void 0!==z?z:null}else if(L.hasYouon){var Z;const t=null===(Z=d[e])||void 0===Z?void 0:Z.indexOf(a);var ee,ne;if(-1!==t&&void 0!==t)g=null!==(ee=null===(ne=c[e])||void 0===ne?void 0:ne[t])&&void 0!==ee?ee:null}else if(L.hasDakuon){var le;const t=null===(le=p[e])||void 0===le?void 0:le.indexOf(a);var se,ue;if(-1!==t&&void 0!==t)g=null!==(se=null===(ue=f[e])||void 0===ue?void 0:ue[t])&&void 0!==se?se:null}else if(L.hasHandakuon){if("\u306f\u884c"===e){var ce;const t=null===(ce=m[e])||void 0===ce?void 0:ce.indexOf(a);var de,he;if(-1!==t&&void 0!==t)g=null!==(de=null===(he=y[e])||void 0===he?void 0:he[t])&&void 0!==de?de:null}}else{var fe,pe,ge,ye,me,ve;if("\u3084\u884c"===e)"\u3042\u6bb5"===a?g=null!==(fe=null===(pe=s[e])||void 0===pe?void 0:pe[0])&&void 0!==fe?fe:null:"\u3046\u6bb5"===a?g=null!==(ge=null===(ye=s[e])||void 0===ye?void 0:ye[1])&&void 0!==ge?ge:null:"\u304a\u6bb5"===a&&(g=null!==(me=null===(ve=s[e])||void 0===ve?void 0:ve[2])&&void 0!==me?me:null);else if(-1!==t){var be,xe;g=null!==(be=null===(xe=s[e])||void 0===xe?void 0:xe[t])&&void 0!==be?be:null}}if(console.log("[TanbunChallenge handleInput KANA_COMPOSED] Composed char: '".concat(g,"', gyou: ").concat(e,", dan: ").concat(a,", inputState:"),JSON.parse(JSON.stringify(L))),null===g)return W.current+=1,ae(),{isExpected:!1,shouldGoToNext:!1}}}}}}if(null!==g){if(console.log("[TanbunChallenge handleInput CHAR_COMPARISON] typedChar='".concat(g,"', expectedChar='").concat(C,"'")),g===C){v=!0,$.current+=C.length;const e=T+C.length;return console.log("[TanbunChallenge handleInput CORRECT] nextIndex: ".concat(e,", sentenceLength: ").concat(te.current.length)),e>=te.current.length?(Q.current+=1,console.log("[TanbunChallenge handleInput CORRECT] Sentence completed. Calling selectNextSentence."),ie(),K(He)):(console.log("[TanbunChallenge handleInput CORRECT] Advancing to next char. New target: '".concat(te.current[e],"'")),E(e),F({typedEndIndex:e}),D(te.current[e]),K(He),oe()),{isExpected:!0,shouldGoToNext:!1}}return W.current+=1,console.log("[TanbunChallenge handleInput INCORRECT] Typed: '".concat(g,"', Expected: '").concat(C,"'. Miss count: ").concat(W.current)),K(He),oe(),{isExpected:!1,shouldGoToNext:!1}}return console.log("[TanbunChallenge handleInput] typedChar is null, returning based on previous logic (likely state change or invalid start)."),{isExpected:!1,shouldGoToNext:!1}}),[u,te,T,ie,n,o,ne,L,oe,ae,re,D,a]);(0,r.useEffect)((()=>{console.log("[TanbunChallenge useEffect currentIndex] currentIndex updated to: ".concat(T,", currentTargetChar is now: '").concat(R,"'"))}),[T,R]);const ue=(0,r.useCallback)(((e,t,n)=>{const r={className:null,overrideKey:null};if("running"!==u||!te.current||T>=te.current.length)return r;const{char:o,info:i}=ze(te.current,T,a),l=re[o];if("\u3002"===o||"\u3001"===o){const n=o;if(L.gyouKey===Ue){if(8===t&&e.trim()===n)return{className:"bg-blue-100",overrideKey:null}}else if(8===t&&e.trim()===P)return{className:"bg-blue-100",overrideKey:null};return r}if("kigo"===(null===i||void 0===i?void 0:i.type)&&void 0!==l&&null!==l){if(void 0!==i.layerIndex&&t===i.layerIndex&&n===l)return{className:"bg-blue-100",overrideKey:null}}if(!i)return r;let s=null,c=null;return null===L.gyouKey?("sokuonKomoji"===i.type&&i.isTsu?s="\u3063":"youdakuon"===i.type||"youhandakuon"===i.type?s=i.inputDef.gyouKey:"kigo"===i.type&&"gyouKey"in i&&i.gyouKey||"seion"===i.type||"youon"===i.type||"dakuon"===i.type||"handakuon"===i.type?s=i.gyouKey:"kigo"===i.type&&"\u8a18\u53f7"===i.keyName&&(s="\u8a18\u53f7"),c=2):"\u8a18\u53f7"===L.gyouKey?(s=o,c=8):"youon"===i.type&&!L.hasYouon||"youdakuon"===i.type&&!L.hasYouon||"youhandakuon"===i.type&&!L.hasYouon?(s="\u3083\u3085\u3087",c=2):"dakuon"===i.type&&!L.hasDakuon&&!L.hasHandakuon||"youdakuon"===i.type&&L.hasYouon&&!L.hasDakuon&&!L.hasHandakuon||"handakuon"===i.type&&"\u306f\u884c"===L.gyouKey&&!L.hasHandakuon||"youhandakuon"===i.type&&"\u306f\u884c"===L.gyouKey&&L.hasYouon&&!L.hasHandakuon?(s="\u201d \xb0 \u5c0f",c=2):(c=3,"sokuonKomoji"===i.type&&i.isTsu?s=null:L.gyouKey&&("seion"===i.type||"youon"===i.type&&L.hasYouon||"dakuon"===i.type&&L.hasDakuon||"handakuon"===i.type&&L.hasHandakuon||"youdakuon"===i.type&&L.hasYouon&&L.hasDakuon||"youhandakuon"===i.type&&L.hasYouon&&L.hasHandakuon)&&("youdakuon"===i.type||"youhandakuon"===i.type?s=i.inputDef.dan:"seion"!==i.type&&"youon"!==i.type&&"dakuon"!==i.type&&"handakuon"!==i.type||(s=i.danKey))),s&&t===c&&e===s?{className:"bg-blue-100",overrideKey:null}:r}),[u,te,T,L,re,a,n,o,ne]),ce=(0,r.useMemo)((()=>{console.log("[TanbunChallenge useMemo currentKanaTargetDetails] status: ".concat(u,', currentSentenceRef.current: "').concat(te.current,'", currentIndex: ').concat(T));const{info:e}=ze(te.current,T,a);return"running"===u?(console.log("[TanbunChallenge useMemo currentKanaTargetDetails] Details:",e),e):(console.log("[TanbunChallenge useMemo currentKanaTargetDetails] Status not running, returning null."),null)}),[u,te,T,a]);return(0,r.useMemo)((()=>{let e=[];const t="finished"===u?null:null!==R&&void 0!==R?R:void 0;console.log("[TanbunChallenge useMemo practiceResult] status: ".concat(u,", countdownValue: ").concat(g,', currentSentence: "').concat(C,'", currentTargetChar (state): "').concat(R,'", charToDisplay: "').concat(t,'"')),"countdown"===u?e=["".concat(g,"\u79d2")]:"finished"===u?e=["\u7d42\u4e86\uff01"]:"running"===u&&C&&(e=[C]);let n=l?[2,3]:[];return"\u3002"!==t&&"\u3001"!==t||(n=[8]),{headingChars:e,handleInput:se,getProgressInfo:()=>M,reset:le,challengeResults:X,targetLayerIndex:null,displayLayers:void 0,getHighlightClassName:ue,isInvalidInputTarget:()=>!1,typedEndIndex:M.typedEndIndex,status:u,targetChar:t,currentTarget:null!==ce&&void 0!==ce?ce:void 0,countdownValue:g,challengeTimer:b,challengeTotalTime:Be,targetLayerIndices:n}}),[u,g,C,R,se,ce,le,X,M,b,l,ue,a])},Ye=e=>{let{gIdx:t,dIdx:n,isActive:o,onAdvance:a,layers:i,isRandomMode:l}=e;const[s,u]=(0,r.useState)("waitingForGroupKey"),[c,d]=(0,r.useState)(""),[h,f]=(0,r.useState)("waiting"),[p,g]=(0,r.useState)(null),[y,m]=(0,r.useState)(null),v=(0,r.useRef)(o),b=(0,r.useRef)(t),x=(0,r.useRef)(n),C=(0,r.useRef)(l),k=(0,r.useRef)(!0),S=(0,r.useCallback)((()=>{const e=E.join("");if(e.length>0){const t=e[Math.floor(Math.random()*e.length)];m(t);const n=E.find((e=>e.includes(t.toLowerCase())));d(n||""),u("waitingForGroupKey"),f("waiting"),g(null),console.log("[AlphabetPractice selectNextRandomChar] New random target: ".concat(t,", Group: ").concat(n))}}),[]),w=(0,r.useCallback)((()=>{u("waitingForGroupKey"),d(""),f("waiting"),g(null),m(null),b.current=-1,x.current=-1,k.current=!0}),[u,d,f,g,m]);(0,r.useEffect)((()=>{console.log("[AlphabetPractice useEffect] START. isActive: ".concat(o,", gIdx: ").concat(t,", dIdx: ").concat(n,", prevGIdx: ").concat(b.current,", prevDIdx: ").concat(x.current,", internalStage: ").concat(s,', currentTargetGroup: "').concat(c,'", isRandomMode: ').concat(l));const e=o&&!v.current,r=l!==C.current;if(!o&&v.current)console.log("[AlphabetPractice useEffect] Practice became inactive. Calling reset()."),w();else if(o)if(r)console.log("[AlphabetPractice useEffect] Random mode changed to ".concat(l,". Resetting and selecting target if random.")),w(),l?S():t<E.length?d(E[t]):(d(""),u("finished"),f("finished"));else if(l)!e&&y||(console.log("[AlphabetPractice useEffect] Random mode, just activated or no target. Selecting next random char."),S());else if(t<E.length){const r=E[t];r!==c&&d(r),(e||t!==b.current||n!==x.current)&&(console.log("[AlphabetPractice useEffect] Normal mode, resetting to 'waitingForGroupKey'. Reason: justActivated=".concat(e,", gIdx changed=").concat(t!==b.current,", dIdx changed=").concat(n!==x.current)),u("waitingForGroupKey"),f("waiting"),g(null))}else"finished"!==s&&(console.log("[AlphabetPractice useEffect] Normal mode, all groups completed. Setting stage to finished."),u("finished"),f("finished"),g(null),d(""));v.current=o,b.current=t,x.current=n,C.current=l,o&&(k.current=!1),console.log('[AlphabetPractice useEffect] END. Updated refs. currentTargetGroup: "'.concat(c,'", internalStage: ').concat(s,", status: ").concat(h,", prevGIdx: ").concat(b.current,", prevDIdx: ").concat(x.current,", randomTargetChar: ").concat(y))}),[o,t,n,l,E,w,s,c,y,S,u,f,g]);const _=(0,r.useCallback)((e=>{var r;console.log("[AlphabetPractice handleInput] CALLED. isActive: ".concat(o,", internalStage: ").concat(s,', currentTargetGroup: "').concat(c,'", gIdx: ').concat(t,", dIdx: ").concat(n,', randomTargetChar: "').concat(y,'"')),console.log("[AlphabetPractice handleInput] Input details: type=".concat(e.type,", pressCode=0x").concat(e.pressCode.toString(16)));const a=l?E.find((e=>{var t;return e.includes(null!==(t=null===y||void 0===y?void 0:y.toLowerCase())&&void 0!==t?t:"")}))||"":c,d=l?a.indexOf(null!==(r=null===y||void 0===y?void 0:y.toLowerCase())&&void 0!==r?r:""):n;if(console.log('[AlphabetPractice handleInput] Effective Target Group: "'.concat(a,'", Effective dIdx: ').concat(d)),!o||"finished"===s||!a||!i)return console.log("[AlphabetPractice handleInput] PRE-CONDITION FAILED. isActive: ".concat(o,", internalStage: ").concat(s,', currentEffectiveTargetGroup: "').concat(a,'", layers: ').concat(!!i)),{isExpected:!1,shouldGoToNext:!1,errorLayer:null};if("release"!==e.type)return console.log("[AlphabetPractice handleInput] Not a 'release' event. Type: ".concat(e.type,". Skipping.")),{isExpected:!1,shouldGoToNext:!1,errorLayer:null};let h=null;var p;i[4]&&e.pressCode>=0&&e.pressCode<i[4].length&&(h=null===(p=i[4][e.pressCode])||void 0===p?void 0:p.trim(),console.log("[AlphabetPractice handleInput] Key Lookup Layer 4: input.pressCode=".concat(e.pressCode,", layers[4][").concat(e.pressCode,']="').concat(i[4][e.pressCode],'" -> pressedKeyNameOnLayer4="').concat(h,'"')));let m=null;var v;i[5]&&e.pressCode>=0&&e.pressCode<i[5].length&&(m=null===(v=i[5][e.pressCode])||void 0===v?void 0:v.trim(),console.log("[AlphabetPractice handleInput] Key Lookup Layer 5: input.pressCode=".concat(e.pressCode,", layers[5][").concat(e.pressCode,']="').concat(i[5][e.pressCode],'" -> pressedKeyNameOnLayer5="').concat(m,'"')));const b=["\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246a","\u246b","\u246c","\u246d","\u246e","\u246f","\u2470","\u2471","\u2472","\u2473"],x=-1!==d&&d<b.length&&d<a.length?b[d]:null;let C=!1,k=s,w=null;if("waitingForGroupKey"===s)console.log('[AlphabetPractice handleInput] Stage: waitingForGroupKey. Pressed Layer 4: "'.concat(h,'", Expected Group: "').concat(a,'"')),h&&h.toLowerCase()===a.toLowerCase()?(console.log("[AlphabetPractice handleInput] Group key MATCH. Transitioning to waitingForCharKey."),C=!0,k="waitingForCharKey",f("waiting"),w=null):(console.log("[AlphabetPractice handleInput] Group key NO MATCH."),C=!1,w=4);else if("waitingForCharKey"===s){if(console.log('[AlphabetPractice handleInput] Stage: waitingForCharKey. Pressed Layer 5: "'.concat(m,'", Expected Char Key: "').concat(x,'" (for char: ').concat(a[d],")")),x&&m&&m===x)return console.log("[AlphabetPractice handleInput] Char key MATCH."),C=!0,k="waitingForGroupKey",w=null,l?(S(),{isExpected:C,shouldGoToNext:!1,errorLayer:w}):{isExpected:C,shouldGoToNext:!0,errorLayer:w};console.log("[AlphabetPractice handleInput] Char key NO MATCH."),C=!1,w=5}return f(C?"correct":"incorrect"),g(w),k!==s&&(console.log("[AlphabetPractice handleInput] Stage changing from ".concat(s," to ").concat(k)),u(k)),{isExpected:C,shouldGoToNext:!1,errorLayer:w}}),[o,s,c,t,n,a,i,u,f,g,l,y,S]),I=(0,r.useCallback)(((e,t)=>{var r;if(!o||"finished"===s||"incorrect"===h)return{className:null,overrideKey:null};const a=l?E.find((e=>{var t;return e.includes(null!==(t=null===y||void 0===y?void 0:y.toLowerCase())&&void 0!==t?t:"")}))||"":c,i=l?a.indexOf(null!==(r=null===y||void 0===y?void 0:y.toLowerCase())&&void 0!==r?r:""):n;if(!a)return{className:null,overrideKey:null};const u=["\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246a","\u246b","\u246c","\u246d","\u246e","\u246f","\u2470","\u2471","\u2472","\u2473"],d=-1!==i&&i<u.length&&i<a.length?u[i]:null;if("waitingForGroupKey"===s){if(4===t&&e.trim().toLowerCase()===a.toLowerCase())return{className:"bg-blue-100 dark:bg-blue-800",overrideKey:null}}else if("waitingForCharKey"===s&&5===t&&d&&e.trim()===d)return{className:"bg-blue-100 dark:bg-blue-800",overrideKey:null};return{className:null,overrideKey:null}}),[o,s,c,n,h,l,y]),T=(0,r.useMemo)((()=>o?l?y?[y]:[]:t<E.length?E[t].split(""):[]:[]),[o,l,y,t,E]),N=(0,r.useCallback)(((e,t,n)=>!(!o||"incorrect"!==h||null===p)&&(t===p&&n===e)),[o,h,p]),P=(0,r.useCallback)((()=>{console.log("[AlphabetPractice clearErrorState] CALLED. Clearing error layer and setting status to waiting."),g(null),f("waiting")}),[g,f]),A=(0,r.useMemo)((()=>l?y:c&&n<c.length?c[n]:void 0),[l,y,c,n]);return{status:h,handleInput:_,getHighlightClassName:I,targetChar:A,reset:w,targetLayerIndex:null,headingChars:T,targetLayerIndices:[4,5],isInvalidInputTarget:N,errorLayer:p,clearErrorState:P}},$e="1234567890",qe=e=>e.replace(/[\uff10-\uff19]/g,(e=>String.fromCharCode(e.charCodeAt(0)-65248))),Qe=e=>{let{gIdx:t,isActive:n,onAdvance:o,isRandomMode:a,layers:i}=e;const[l,s]=(0,r.useState)("targetDigit"),[u,c]=(0,r.useState)("waiting"),[d,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(!0),g=(0,r.useRef)(null),[y,m]=(0,r.useState)(null),v=(0,r.useRef)(n),b=(0,r.useRef)(t),x=(0,r.useRef)(a),C=(0,r.useCallback)((()=>{console.log("[NumberPractice reset] Resetting states..."),s("targetDigit"),c("waiting"),h(null),m(null),p(!0),null!==g.current&&(clearTimeout(g.current),g.current=null)}),[s,c,p]),k=(0,r.useCallback)((()=>{const e=Math.floor(10*Math.random()).toString();m(e),s("targetDigit"),c("waiting"),h(null),p(!0),null!==g.current&&(clearTimeout(g.current),g.current=null),console.log("[NumberPractice selectNextRandomDigit] New random target: ".concat(e))}),[]);(0,r.useEffect)((()=>{console.log("[NumberPractice useEffect START] isActive: ".concat(n,", gIdx (prop): ").concat(t,", prevIsActive: ").concat(v.current,", prevGIdx: ").concat(b.current,", current internalStage: ").concat(l,", current status: ").concat(u));const e=a!==x.current;if(!n&&v.current)console.log("[NumberPractice useEffect] Practice became inactive. Calling reset()."),C();else if(n)if(e)if(C(),a)k();else{m(null),s("targetDigit"),c("waiting"),p(!0),null!==g.current&&(clearTimeout(g.current),g.current=null)}else if(a)(n&&!v.current||!y)&&k();else if(t!==b.current||n&&!v.current){const e=$e[t];console.log("[NumberPractice useEffect Normal Mode] gIdx changed (from ".concat(b.current," to ").concat(t,") or practice just activated. Target char: ").concat(e,". Setting internalStage to 'targetDigit'.")),s("targetDigit"),h(null),p(!0),null!==g.current&&(clearTimeout(g.current),g.current=null),c("waiting")}v.current=n,b.current=t,x.current=a,console.log("[NumberPractice useEffect END] Updated refs: prevIsActive=".concat(v.current,", prevGIdx=").concat(b.current,". Current internalStage: ").concat(l,", status: ").concat(u))}),[t,n,a,C,k,y]);const S=(0,r.useCallback)((e=>{if(console.log("[NumberPractice handleInput START] Input pressCode: 0x".concat(e.pressCode.toString(16),", type: ").concat(e.type,". Current state: isActive=").concat(n,", internalStage=").concat(l,", gIdx=").concat(t,", status=").concat(u,", isRandomMode=").concat(a,", randomTargetDigit=").concat(y)),!n||!i)return{isExpected:!1,shouldGoToNext:!1,errorLayer:null};if("release"!==e.type)return{isExpected:!1,shouldGoToNext:!1};const r=a?y:$e[t];if(!r)return{isExpected:!1,shouldGoToNext:!1,errorLayer:null};let o=null;"targetDigit"===l?o=r:"targetZero"===l&&(o="0");let d=null,f=null;var m,v;i[0]&&e.pressCode>=0&&e.pressCode<i[0].length&&(d=null!==(m=null===(v=i[0][e.pressCode])||void 0===v?void 0:v.trim())&&void 0!==m?m:null,d&&(f=qe(d)),console.log("[NumberPractice handleInput] Key Lookup: input.pressCode=".concat(e.pressCode,", layers[0][").concat(e.pressCode,']="').concat(i[0][e.pressCode],'". Original: "').concat(d,'", Normalized: "').concat(f,'", Expected: "').concat(o,'"')));if(console.log('[NumberPractice handleInput BEFORE COMPARISON] expectedKeyName: "'.concat(o,'", normalizedPressedKeyName: "').concat(f,'"')),o&&f&&f===o){if(c("correct"),h(null),"targetDigit"===l)return console.log('[NumberPractice handleInput] Target digit "'.concat(o,"\" (1st key) MATCH. Setting internalStage to 'targetZero'.")),null!==g.current&&(clearTimeout(g.current),g.current=null),s("targetZero"),"0"===o?(p(!1),g.current=window.setTimeout((()=>{p(!0),g.current=null,console.log("[NumberPractice handleInput] Highlight delay for second '0' ended.")}),300)):p(!0),{isExpected:!0,shouldGoToNext:!1,errorLayer:null};if("targetZero"===l)return console.log("[NumberPractice handleInput] Zero MATCH. Advancing practice."),p(!0),null!==g.current&&(clearTimeout(g.current),g.current=null),a?(k(),{isExpected:!0,shouldGoToNext:!1,errorLayer:null}):(s("targetDigit"),c("waiting"),{isExpected:!0,shouldGoToNext:!0,errorLayer:null})}return console.log('[NumberPractice handleInput AFTER COMPARISON / NO MATCH] Expected: "'.concat(o,'", Pressed (normalized): "').concat(f,"\". Setting status to 'incorrect'.")),c("incorrect"),p(!0),null!==g.current&&(clearTimeout(g.current),g.current=null),h(0),{isExpected:!1,shouldGoToNext:!1,errorLayer:0,errorPressCode:e.pressCode}}),[n,l,t,o,i,s,c,a,y,k]),w=(0,r.useCallback)(((e,r,o)=>{if(d===r)return{className:null,overrideKey:null};if(console.log('[NumberPractice getHighlightClassName START] keyName: "'.concat(e,'", layoutIndex: ').concat(r,", isActive: ").concat(n,", internalStage: ").concat(l,", gIdx: ").concat(t,", isRandomMode: ").concat(a,", randomTargetDigit: ").concat(y)),!n||0!==r)return{className:null,overrideKey:null};const i=a?y:$e[t];if(!i)return{className:null,overrideKey:null};let s=null;const u=qe(e.trim());return console.log('[NumberPractice getHighlightClassName] Normalized keyName: "'.concat(u,'" (original: "').concat(e.trim(),'"), currentTargetCharForHighlight: "').concat(i,'"')),"targetDigit"===l?s=i:"targetZero"===l&&f&&(s="0"),s&&u===s?(console.log('[NumberPractice getHighlightClassName] MATCH: Normalized key "'.concat(u,'" === Expected key "').concat(s,'". Returning highlight.')),{className:"bg-blue-100",overrideKey:null}):(console.log('[NumberPractice getHighlightClassName] NO MATCH: Normalized key "'.concat(u,'", Expected key to highlight: "').concat(s,'". Returning no highlight.')),{className:null,overrideKey:null})}),[n,l,t,a,y,d,f]),_=(0,r.useMemo)((()=>a?y?[y]:[]:$e.split("")),[a,y]),I=(0,r.useCallback)(((e,t,r,o)=>!(!n||"incorrect"!==u)&&(void 0!==o?t===o&&0===t&&r===e:0===t&&r===e)),[n,u]),T=(0,r.useCallback)((()=>{h(null),p(!0),null!==g.current&&(clearTimeout(g.current),g.current=null),c("waiting")}),[h,c,p]),E=a?y:$e[t];return{status:u,handleInput:S,getHighlightClassName:w,currentTarget:E||void 0,targetChar:E||void 0,reset:C,targetLayerIndex:null,headingChars:_,targetLayerIndices:[0],isInvalidInputTarget:I,errorHighlightLayer:d,clearErrorState:T}},Xe=e=>{var t;let{gIdx:n,dIdx:o,isActive:a,onAdvance:i,layers:l}=e;const[s,u]=(0,r.useState)("groupInput"),[c,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(!1),[p,g]=(0,r.useState)("waiting"),[y,m]=(0,r.useState)(null),v=(0,r.useRef)(a),b=(0,r.useRef)(n),x=(0,r.useRef)(o),C=(0,r.useCallback)((()=>{console.log("[CapsLockPractice reset]"),u("groupInput"),d(""),f(!1),g("waiting"),m(null),b.current=-1,x.current=-1}),[u,d,g,f,m]);(0,r.useEffect)((()=>{console.log("[CapsLockPractice useEffect] START. isActive: ".concat(a,", gIdx: ").concat(n,", dIdx: ").concat(o,", prevGIdx: ").concat(b.current,", prevDIdx: ").concat(x.current,", internalStage: ").concat(s,', currentTargetGroup: "').concat(c,'", isCapsLockOn: ').concat(h));const e=a&&!v.current;if(!a&&v.current)console.log("[CapsLockPractice useEffect] Practice became inactive. Calling reset()."),C();else if(a)if(n<E.length){const t=E[n];t!==c&&d(t),(e||n!==b.current||o!==x.current)&&(console.log("[CapsLockPractice useEffect] Resetting stage. Reason: justActivated=".concat(e,", gIdx changed from ").concat(b.current," to ").concat(n,", dIdx changed from ").concat(x.current," to ").concat(o,".")),u("groupInput"),g("waiting"),m(null))}else g("finished"),u("finished"),d("");v.current=a,b.current=n,x.current=o,console.log('[CapsLockPractice useEffect] END. Updated refs. currentTargetGroup: "'.concat(c,'", internalStage: ').concat(s,", isCapsLockOn: ").concat(h,", status: ").concat(p,", errorDetails:"),y)}),[a,n,o,E,C,c,s,y]);const k=(0,r.useCallback)((e=>{var t;if(console.log("[CapsLockPractice handleInput] CALLED. isActive: ".concat(a,", internalStage: ").concat(s,', currentTargetGroup: "').concat(c,'", gIdx: ').concat(n,", dIdx: ").concat(o,", isCapsLockOn: ").concat(h)),console.log("[CapsLockPractice handleInput] Input details: type=".concat(e.type,", pressCode=0x").concat(e.pressCode.toString(16))),!a||"finished"===s||!c||!l)return console.log("[CapsLockPractice handleInput] PRE-CONDITION FAILED."),{isExpected:!1,shouldGoToNext:!1};if("release"!==e.type)return{isExpected:!1,shouldGoToNext:!1};let r=null,d=null,p=s,y=null;var v;l[4]&&e.pressCode>=0&&e.pressCode<l[4].length&&(y=null===(v=l[4][e.pressCode])||void 0===v?void 0:v.trim(),console.log("[CapsLockPractice handleInput] Key on CAPS_LOCK_LAYER_INDEX (idx ".concat(4,", pressCode ").concat(e.pressCode,'): "').concat(y,'" (trimmed). Comparing with CAPS_LOCK_KEY_NAME: "').concat(N,'"')));if(y===N)return console.log("[CapsLockPractice handleInput] CAPS_LOCK_KEY_NAME MATCHED! Event type: ".concat(e.type)),"release"===e.type?(console.log("[CapsLockPractice handleInput] Toggling isCapsLockOn."),f((e=>!e)),{isExpected:!0,shouldGoToNext:!1,errorLayer:null,errorPressCode:void 0}):{isExpected:!0,shouldGoToNext:!1,errorLayer:null,errorPressCode:void 0};if("groupInput"===s){if(y&&y.toLowerCase()===c.toLowerCase())return console.log("[CapsLockPractice handleInput] Group key MATCH. Setting stage to charInput."),g("waiting"),p="charInput",m(null),u(p),{isExpected:!0,shouldGoToNext:!1,errorLayer:null,errorPressCode:void 0}}else if("charInput"===s){const t=["\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246a","\u246b","\u246c","\u246d","\u246e","\u246f","\u2470","\u2471","\u2472","\u2473"],n=o<t.length?t[o]:null;if(l[5]&&n){var b;if((null===(b=l[5][e.pressCode])||void 0===b?void 0:b.trim())===n)return console.log("[CapsLockPractice handleInput] Char key MATCH. Calling onAdvance."),g("correct"),null===i||void 0===i||i(),m(null),p="groupInput",u(p),{isExpected:!0,shouldGoToNext:!1,errorLayer:null,errorPressCode:void 0};console.log("[CapsLockPractice handleInput] Char key NO MATCH. Setting error and returning to groupInput."),r=5,d=e.pressCode,p="groupInput"}else console.log("[CapsLockPractice handleInput] Layer 5 or expectedCharKeyName missing. Setting error and returning to groupInput."),r=5,d=e.pressCode,p="groupInput"}return"groupInput"!==s||r||(r=4,d=e.pressCode),console.log("[CapsLockPractice handleInput] NO MATCH or error occurred."),g("incorrect"),m(null!==r&&null!==d?{layer:r,pressCode:d}:null),p!==s&&u(p),{isExpected:!1,shouldGoToNext:!1,errorLayer:r,errorPressCode:null!==(t=d)&&void 0!==t?t:void 0}}),[a,s,c,n,o,i,l,f,h,m,u,g]),S=(0,r.useCallback)(((e,t,n)=>{if(!a||"finished"===s||!c||y&&y.layer===t)return{className:null,overrideKey:null};const r=c;if("groupInput"===s){if(4===t&&e.trim().toLowerCase()===r.toLowerCase())return{className:"bg-blue-100",overrideKey:null}}else if("charInput"===s){const n=["\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246a","\u246b","\u246c","\u246d","\u246e","\u246f","\u2470","\u2471","\u2472","\u2473"],r=o<n.length?n[o]:null;if(5===t&&e.trim()===r)return{className:"bg-blue-100",overrideKey:null}}return{className:null,overrideKey:null}}),[a,s,c,o,h,y]),w=(0,r.useMemo)((()=>{if(n<E.length){const e=E[n];return h?[e.toUpperCase()]:[e.toLowerCase()]}return[]}),[n,E,h]),_=(0,r.useMemo)((()=>{if(c&&o<c.length){const e=c[o];return h?e.toUpperCase():e.toLowerCase()}}),[c,o,h]),I=(0,r.useCallback)((()=>{m(null),g("waiting")}),[m,g]);return{status:p,handleInput:k,getHighlightClassName:S,targetChar:_,reset:C,targetLayerIndex:4,headingChars:w,isCapsLockOn:h,targetLayerIndices:[4,5],isInvalidInputTarget:(e,t,n,r)=>!(!a||!y)&&(t===y.layer&&n===e),errorHighlightLayer:null!==(t=null===y||void 0===y?void 0:y.layer)&&void 0!==t?t:null,clearErrorState:I}},Ze=e=>{var t;let{gIdx:n,dIdx:o,isActive:a,onAdvance:i,layers:l}=e;const[s,u]=(0,r.useState)("waitingForGroupKey"),[c,d]=(0,r.useState)(""),[h,f]=(0,r.useState)("waiting"),[p,g]=(0,r.useState)(null),y=(0,r.useRef)(a),m=(0,r.useRef)(n),v=(0,r.useRef)(o),b=(0,r.useCallback)((()=>{u("waitingForGroupKey"),d(""),f("waiting"),g(null),m.current=-1,v.current=-1}),[u,d,f,g]);(0,r.useEffect)((()=>{if(!a&&y.current)b();else if(a){const e=n!==m.current,t=o!==v.current,r=a&&!y.current;if(n<E.length){const o=E[n];o!==c&&d(o),(r||e||t)&&(u("waitingForGroupKey"),f("waiting"),g(null))}else f("finished"),u("finished"),d(""),g(null)}y.current=a,m.current=n,v.current=o}),[n,o,a,b,E,d,f,u,g,c]);const x=(0,r.useCallback)((e=>{if(!a||"finished"===s||!c||!l)return{isExpected:!1,shouldGoToNext:!1,errorLayer:null,errorPressCode:void 0};if("release"!==e.type)return{isExpected:!1,shouldGoToNext:!1};let t,n=null;const r=["\u2460","\u2461","\u2462","\u2463"],i=o<r.length?r[o]:null;let d=null;if(l[4]&&e.pressCode>=0&&e.pressCode<l[4].length){var h;const t=l[4][e.pressCode];d=null!==(h=null===t||void 0===t?void 0:t.trim())&&void 0!==h?h:null}let p=null;if(l[5]&&e.pressCode>=0&&e.pressCode<l[5].length){var y;const t=l[5][e.pressCode];p=null!==(y=null===t||void 0===t?void 0:t.trim())&&void 0!==y?y:null}if("waitingForGroupKey"===s){if(d&&d.toLowerCase()===c.toLowerCase())return u("waitingForSmallCharKey"),f("waiting"),g(null),{isExpected:!0,shouldGoToNext:!1,errorLayer:null,errorPressCode:void 0};n=4,t=e.pressCode}else if("waitingForSmallCharKey"===s){if(i&&p&&p===i)return u("waitingForCorrectionKey"),f("waiting"),g(null),{isExpected:!0,shouldGoToNext:!1,errorLayer:null,errorPressCode:void 0};n=5,t=e.pressCode}else if("waitingForCorrectionKey"===s){if(d&&"A/a"===d)return f("correct"),g(null),{isExpected:!0,shouldGoToNext:!0,errorLayer:null,errorPressCode:void 0};n=4,t=e.pressCode}return f("incorrect"),u("waitingForGroupKey"),g(null!==n&&void 0!==t?{layer:n,pressCode:t}:null),{isExpected:!1,shouldGoToNext:!1,errorLayer:n,errorPressCode:t}}),[a,s,c,n,o,l,u,f,g,i]),C=(0,r.useCallback)(((e,t)=>{if(p&&p.layer===t)return{className:null,overrideKey:null};if(!a||"finished"===s||!c)return{className:null,overrideKey:null};const n=c,r=["\u2460","\u2461","\u2462","\u2463"],i=o<r.length?r[o]:null;return"waitingForGroupKey"===s&&4===t&&e.trim().toLowerCase()===n.toLowerCase()?{className:"bg-blue-100 dark:bg-blue-700",overrideKey:e.toLowerCase()}:"waitingForSmallCharKey"===s&&5===t&&i&&e.trim()===i||"waitingForCorrectionKey"===s&&4===t&&"A/a"===e.trim()?{className:"bg-blue-100 dark:bg-blue-700",overrideKey:null}:{className:null,overrideKey:null}}),[a,s,c,n,o,p]),k=(0,r.useMemo)((()=>{if(n<E.length){return E[n].split("").map((e=>"".concat(e.toLowerCase(),"-").concat(e.toUpperCase())))}return[]}),[n]),S=(0,r.useCallback)((()=>{g(null),f("waiting")}),[g,f]);return{status:h,handleInput:x,getHighlightClassName:C,targetChar:(0,r.useMemo)((()=>{if(c&&o<c.length){const e=c[o];return"waitingForCorrectionKey"===s?e.toUpperCase():e.toLowerCase()}}),[c,o,s]),reset:b,targetLayerIndex:null,headingChars:k,targetLayerIndices:[4,5],isInvalidInputTarget:(e,t,n)=>!(!a||!p)&&(t===p.layer&&n===e),errorHighlightLayer:null!==(t=null===p||void 0===p?void 0:p.layer)&&void 0!==t?t:null,clearErrorState:S}},Je=6e4,et=18e4,tt=4,nt=5,rt=9,ot=4,at=13,it=e=>{let{isActive:t,side:n,kb:o,layers:a,practiceName:i}=e;const[l,s]=(0,r.useState)("idle"),[u,c]=(0,r.useState)(5),[d,h]=(0,r.useState)("\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?Je:et),[f,p]=(0,r.useState)(null),[g,y]=(0,r.useState)("waitingForLayer4Key"),[m,v]=(0,r.useState)(""),[b,x]=(0,r.useState)(0),[C,k]=(0,r.useState)([]),[S,w]=(0,r.useState)(0),[_,I]=(0,r.useState)(0),[T,N]=(0,r.useState)(0),[P,A]=(0,r.useState)(null),L=(0,r.useRef)(null),K=(0,r.useRef)(null),M=(0,r.useRef)(null),F=(0,r.useRef)(""),R=(0,r.useRef)(0),D=(0,r.useRef)(0),O=(0,r.useRef)(0),j=(0,r.useRef)(0),H=(0,r.useRef)(0),V=(0,r.useRef)(0),[B,U]=(0,r.useState)(null),z=(0,r.useRef)(t),W=(0,r.useMemo)((()=>"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?[]:G),[i]),Y=(0,r.useCallback)((e=>{if(console.log("[DEBUG updateTargetGroupAndStageForAlphaNum ENTRY] practiceName: ".concat(i,', char: "').concat(e,'"')),"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"!==i||!e)return A(null),void y("waitingForLayer4Key");if(e.match(/^[a-zA-Z]$/)){const t=E.findIndex((t=>t.includes(e.toLowerCase())));A(-1!==t?t:null),y("waitingForLayer4Key")}else A(null),y("waitingForLayer4Key")}),[i]),$=(0,r.useCallback)((()=>{if("\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i){console.log("[AlphabetChallenge selectNextTarget] Selecting next char for \u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0");const e=(()=>{const e=E.join("");return e[Math.floor(Math.random()*e.length)]})();p(e),y("waitingForLayer4Key")}else if(W.length>0){const e=Math.floor(Math.random()*W.length),t=W[e];v(t),F.current=t;const n=t[0];p(n),x(0),k([]),N(0),Y(n)}}),[i,W,Y]);(0,r.useEffect)((()=>(t&&"countdown"===l&&(u>0?L.current=window.setTimeout((()=>{c((e=>e-1))}),1e3):(s("running"),h("\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?Je:et),M.current=Date.now(),"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?(R.current=0,D.current=0,O.current=0,H.current=0,j.current=0,V.current=0):(w(0),I(0),H.current=0,V.current=0),$())),()=>{null!==L.current&&clearTimeout(L.current)})),[t,l,u,$,i]),(0,r.useEffect)((()=>(t&&"running"===l?K.current=window.setInterval((()=>{var e;const t="\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?Je:et,n=Date.now()-(null!==(e=M.current)&&void 0!==e?e:Date.now()),r=Math.max(0,t-n);if(h(r),0===r){let e;if(s("finished"),K.current&&clearInterval(K.current),"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i){var o;const t=1,n=t>0?Math.round(R.current/t):0,r=D.current,a=r>0?(r-O.current)/r:0;console.log("[AlphabetChallenge DEBUG Results \u82f1\u5b57] correctChars: ".concat(R.current,", totalAttempted: ").concat(D.current,", errors: ").concat(O.current,", accuracyValue: ").concat(a,", cpm: ").concat(n));const i=10*R.current,s=Math.max(0,Math.pow(a,2)),c=5*Math.max(0,n-50),d=100*Math.log(1+(null!==(o=V.current)&&void 0!==o?o:0)),h=50*R.current,f=Math.round((i+c+d+h)*s),p=(u=100*a,(l=f)>=1e4&&u>=98?"Typing Master! \u9a5a\u7570\u7684\uff01":l>=7e3&&u>=95?"Excellent! \u7d20\u6674\u3089\u3057\u3044\uff01":l>=4e3&&u>=90?"Great! \u3068\u3066\u3082\u826f\u3044\u8abf\u5b50\uff01":l>=2e3&&u>=85?"Good! \u826f\u3044\u3067\u3059\u306d\uff01":l>=1e3?"Nice! \u305d\u306e\u8abf\u5b50\uff01":"Keep Trying! \u7df4\u7fd2\u3042\u308b\u306e\u307f\uff01");e={totalQuestions:R.current,totalCharsTyped:D.current,correctCharsCount:R.current,correctCount:R.current,missCount:O.current,accuracy:a,score:f,cpm:n,maxConsecutiveCorrectChars:V.current,rankMessage:p}}else{var a;const t=3,n=t>0?Math.round(S/t):0,r=S+_>0?Math.max(0,S/(S+_)):0;console.log("[AlphabetChallenge DEBUG Results \u82f1\u6570\u77ed\u6587] totalTypedCount: ".concat(S,", errorCount: ").concat(_,", accuracy: ").concat(r,", cpm: ").concat(n));const o=10*S,i=Math.max(0,Math.pow(r,2)),l=5*Math.max(0,n-50),s=100*Math.log(1+(null!==(a=V.current)&&void 0!==a?a:0)),u=50*S,c=Math.round((o+l+s+u)*i),d=((e,t)=>e>=2e4&&t>=98?"Typing God! \u9a5a\u7570\u7684\uff01":e>=15e3&&t>=97?"Pro Typer! \u30d7\u30ed\u7d1a\uff01":e>=1e4&&t>=95?"Excellent! \u7d20\u6674\u3089\u3057\u3044\uff01":e>=7e3&&t>=90?"Great! \u3068\u3066\u3082\u826f\u3044\u8abf\u5b50\uff01":e>=4e3&&t>=85?"Good! \u826f\u3044\u3067\u3059\u306d\uff01":e>=2e3?"Nice! \u305d\u306e\u8abf\u5b50\uff01":"Keep Trying! \u7df4\u7fd2\u3042\u308b\u306e\u307f\uff01")(c,100*r);e={totalQuestions:j.current,totalCharsTyped:S+_,correctCharsCount:S,correctCount:S,missCount:_,accuracy:r,score:c,cpm:n,maxConsecutiveCorrectChars:V.current,rankMessage:d}}U(e)}var l,u}),100):"finished"===l&&K.current&&clearInterval(K.current),()=>{null!==K.current&&clearInterval(K.current)})),[t,l,i,S,_]);const q=(0,r.useCallback)((()=>{console.log("[AlphabetChallengePractice reset] Called for practice: ".concat(i,".")),s("idle"),c(5),h("\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?Je:et),p(null),y("waitingForLayer4Key"),U(null),M.current=null,"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?(R.current=0,D.current=0,O.current=0,H.current=0,j.current=0,V.current=0):(v(""),F.current="",x(0),k([]),w(0),I(0),N(0),A(null),H.current=0,j.current=0,V.current=0),null!==L.current&&clearTimeout(L.current),null!==K.current&&clearInterval(K.current)}),[i]);(0,r.useEffect)((()=>{console.log("[AlphabetChallengePractice useEffect practiceName] practiceName changed to: ".concat(i,". Calling reset.")),q(),h("\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?Je:et),s("idle")}),[i,q]),(0,r.useEffect)((()=>{!t&&z.current?(console.log("[AlphabetChallengePractice useEffect isActive] Practice became inactive. Calling reset. Current status: ".concat(l)),q()):t&&"idle"===l&&(console.log("[AlphabetChallengePractice useEffect isActive] Practice is active and status is idle. Setting status to 'countdown'."),s("countdown")),console.log("[AlphabetChallengePractice useEffect isActive] End of effect. isActive: ".concat(t,", status: ").concat(l,", prevIsActive: ").concat(z.current)),z.current=t}),[t,l,q]);const Q=(0,r.useCallback)((e=>{if("running"!==l||!f||!a)return{isExpected:!1,shouldGoToNext:!1,errorLayer:null};if("release"!==e.type)return{isExpected:!1,shouldGoToNext:!1,errorLayer:null};const t=e.pressCode,n=e.layerIndex;let r=!1,o=null;if("\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i){const e=E.find((e=>e.includes(f.toLowerCase())));if(!e)return{isExpected:!1,shouldGoToNext:!1,errorLayer:null};if("waitingForLayer4Key"===g){var s,u;D.current+=1;const n=null===(s=a[4])||void 0===s||null===(u=s[t])||void 0===u?void 0:u.trim().toLowerCase();n&&n===e?(r=!0,y("waitingForLayer5Key")):(O.current+=1,o=4,H.current=0)}else if("waitingForLayer5Key"===g){var c,d;D.current+=1;const n=e.indexOf(f.toLowerCase()),i=["\u2460","\u2461","\u2462","\u2463"],l=-1!==n&&n<i.length?i[n]:null,s=null===(c=a[5])||void 0===c||null===(d=c[t])||void 0===d?void 0:d.trim();console.log("[AlphabetChallenge DEBUG Layer5] Target: ".concat(f,", ExpectedKey: ").concat(l,", PressedKey: ").concat(s,", targetGroup: ").concat(e,", charIndexInGroup: ").concat(n)),l&&s===l?(console.log("[AlphabetChallenge DEBUG Layer5] MATCH! Incrementing correctCharsTypedRef. Before: ".concat(R.current)),r=!0,R.current+=1,H.current+=1,V.current=Math.max(V.current,H.current),console.log("[AlphabetChallenge DEBUG Layer5] After increment: ".concat(R.current)),$()):(console.log("[AlphabetChallenge DEBUG Layer5] NO MATCH. Incrementing errorCountRef. Before: ".concat(O.current)),O.current+=1,H.current=0,console.log("[AlphabetChallenge DEBUG Layer5] After error increment: ".concat(O.current)),o=5,y("waitingForLayer4Key"))}}else{var h,m;const e=null===(h=a[n])||void 0===h||null===(m=h[t])||void 0===m?void 0:m.trim();let i=!1;if("\xb0"===f)if(0===T&&n===rt&&t===ot)N(1),i=!0;else if(1===T&&n===rt&&t===at){k((e=>[...e,f])),w((e=>e+1));const e=b+1;if(e<F.current.length){const t=F.current[e];p(t),x(e),Y(t)}else $();N(0),i=!0,H.current+=1,V.current=Math.max(V.current,H.current)}else I((e=>e+1)),o=rt,N(0),H.current=0;else if(f.match(/^[a-zA-Z]$/)){if("waitingForLayer4Key"===g){const t=null!==P?E[P]:null;t&&n===tt&&(null===e||void 0===e?void 0:e.toLowerCase())===t?(y("waitingForLayer5Key"),i=!0):(I((e=>e+1)),o=tt,H.current=0)}else if("waitingForLayer5Key"===g){const t=null!==P?E[P]:null;if(t){const r=t.indexOf(f.toLowerCase()),a=["\u2460","\u2461","\u2462","\u2463"],l=-1!==r&&r<a.length?a[r]:null;if(n===nt&&e===l){k((e=>[...e,f])),w((e=>e+1));const e=b+1;if(e<F.current.length){const t=F.current[e];p(t),x(e),Y(t)}else $();i=!0,H.current+=1,V.current=Math.max(V.current,H.current)}else I((e=>e+1)),o=nt,Y(f),H.current=0}else I((e=>e+1)),Y(f),H.current=0}}else if(e&&e.toLowerCase()===f.toLowerCase()){k((e=>[...e,f])),w((e=>e+1));const e=b+1;if(e<F.current.length){const t=F.current[e];p(t),x(e),Y(t)}else $();i=!0,H.current+=1,V.current=Math.max(V.current,H.current)}else I((e=>e+1)),o=n,Y(f),H.current=0;r=i}return{isExpected:r,shouldGoToNext:!1,errorLayer:o}}),[l,f,g,a,$,i,b,T,Y,P]),X=(0,r.useCallback)(((e,t,n)=>{const r={className:null,overrideKey:null};if(console.log("[DEBUG getHighlightClassName ".concat(i,'] targetChar: "').concat(f,'", challengeStage: "').concat(g,'", currentTargetGroupIndex: ').concat(P,", degreeSymbolStep: ").concat(T,', keyName: "').concat(e,'", layoutIdx: ').concat(t,", keyIdx: ").concat(n,", status: ").concat(l)),"running"!==l||!f)return r;if("\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i){const n=f.toLowerCase(),r=e.trim().toLowerCase();if("waitingForLayer4Key"===g){if(t===tt){const e=E.find((e=>e.includes(n)));if(e&&r===e)return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}}else if("waitingForLayer5Key"===g&&t===nt){const t=E.find((e=>e.includes(n)));if(t){const r=t.indexOf(n),o=["\u2460","\u2461","\u2462","\u2463"],a=-1!==r&&r<o.length?o[r]:null;if(a&&e.trim()===a)return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}}}else if("\xb0"===f){if(t===rt){if(0===T&&n===ot)return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null};if(1===T&&n===at)return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}}else if(f.match(/^[a-zA-Z]$/)){if(console.log("[DEBUG getHighlightClassName ".concat(i," Alpha] Evaluating alphabet. Stage: ").concat(g,", TargetGroupIndex: ").concat(P)),"waitingForLayer4Key"===g){if(t===tt&&n===P)return console.log("[DEBUG getHighlightClassName ".concat(i," Alpha Group] MATCH! Highlighting group key for ").concat(f," (group index ").concat(P,") at keyIndex ").concat(n)),{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}else if("waitingForLayer5Key"===g&&t===nt){const t=null!==P?E[P]:null;if(t){const n=t.indexOf(f.toLowerCase()),r=["\u2460","\u2461","\u2462","\u2463"],o=-1!==n&&n<r.length?r[n]:null;if(o&&e.trim()===o)return console.log("[DEBUG getHighlightClassName ".concat(i,' Alpha Individual] MATCH! Highlighting individual key "').concat(e.trim(),'" for ').concat(f,".")),{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}}}else{var o,s;const e=null===(o=a[t])||void 0===o||null===(s=o[n])||void 0===s?void 0:s.trim();if(e&&(e.toLowerCase()===f.toLowerCase()||" "===f&&"SP"===e)&&t!==rt)return console.log("[DEBUG getHighlightClassName ".concat(i,' Other] MATCH! Highlighting key "').concat(e,'" for target "').concat(f,'" on layer ').concat(t,".")),{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}return r}),[l,f,g,i,T,a,P]);return(0,r.useMemo)((()=>{let e=[];"countdown"===l?e=["".concat(u,"\u79d2")]:"running"===l?"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i&&f?e=[f]:"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i&&m&&(e=[m]):"finished"===l&&(e=["\u7d42\u4e86\uff01"]);let t=[tt,nt];return"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i&&("\xb0"===f?t=[rt]:f&&!f.match(/^[a-zA-Z]$/)&&(t=[tt,nt])),{headingChars:e,handleInput:Q,getHighlightClassName:X,reset:q,challengeResults:B,status:l,countdownValue:u,targetLayerIndices:t,typedEndIndex:"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?b:null,isInvalidInputTarget:()=>!1,targetChar:"finished"===l?null:null!==f&&void 0!==f?f:void 0,displayLayers:a,challengeTimer:d,challengeTotalTime:"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?Je:et}}),[l,u,f,m,b,Q,X,q,B,i,a,d])},lt=6e4,st=18e4,ut=e=>e.replace(/[\uff10-\uff19\uff1f]/g,(e=>"\uff1f"===e?"?":String.fromCharCode(e.charCodeAt(0)-65248))),ct=e=>{let{isActive:t,side:n,kb:o,layers:a,practiceName:i}=e;const[l,s]=(0,r.useState)("idle"),[u,c]=(0,r.useState)(5),[d,h]=(0,r.useState)("\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?lt:st),[f,p]=(0,r.useState)(null),[g,y]=(0,r.useState)("waitingForLayer4Key"),[m,v]=(0,r.useState)(""),[b,x]=(0,r.useState)(0),[C,k]=(0,r.useState)([]),[S,w]=(0,r.useState)(0),[_,I]=(0,r.useState)(0),[T,N]=(0,r.useState)(0),[K,M]=(0,r.useState)(null),F=(0,r.useRef)(null),R=(0,r.useRef)(null),D=(0,r.useRef)(null),j=(0,r.useRef)(""),H=(0,r.useRef)(0),V=(0,r.useRef)(0),B=(0,r.useRef)(0),U=(0,r.useRef)(0),z=(0,r.useRef)(0),W=(0,r.useRef)(0),Y=(0,r.useCallback)(((e,t)=>{var r,a;const i=null===(r=O[o])||void 0===r||null===(a=r[n])||void 0===a?void 0:a.layers[e];if(i){return i.findIndex((e=>e.trim()===t.trim()))}return-1}),[o,n]),[$,q]=(0,r.useState)(null),Q=(0,r.useRef)(t),X=(0,r.useMemo)((()=>"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?[]:G),[i]),Z=(0,r.useCallback)((e=>{if(console.log("[DEBUG updateTargetGroupAndStageForAlphaNum ENTRY] practiceName: ".concat(i,', char: "').concat(e,'"')),"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"!==i||!e)return M(null),void y("waitingForLayer4Key");if(e.match(/^[A-Z]$/)){const t=E.findIndex((t=>t.includes(e.toLowerCase())));M(-1!==t?t:null),y("waitingForLayer4KeyForUppercase")}else if("."===e)M(null),y("waitingForEqualKigoKeyForPeriod");else if(","===e)M(null),y("waitingForEqualKigoKeyForComma");else if("'"===e)M(null),y("waitingForApostropheSymbolKeyLayer10Index16");else if(":"===e)M(null),y("waitingForSymbolKeyForColonLayer10");else if("-"===e)M(null),y("waitingForSymbolKeyForHyphenLayer9");else if("?"===e)M(null),y("waitingForEqualKigoKeyForQuestionMark");else if(e.match(/^[0-9]$/))M(null),y("waitingForNumberKey");else if(e.match(/^[a-z]$/)){const t=E.findIndex((t=>t.includes(e.toLowerCase())));M(-1!==t?t:null),y("waitingForLayer4Key")}else M(null),y("waitingForLayer4Key")}),[i]),J=(0,r.useCallback)((()=>{if(console.log("[DEBUG selectNextTarget] Called for practice: ".concat(i)),"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i){const e=(()=>{const e=E.join("");return e[Math.floor(Math.random()*e.length)]})();p(e),y("waitingForLayer4Key"),console.log("[DEBUG selectNextTarget \u82f1\u5b57] New target: ".concat(e,", stage: waitingForLayer4Key"))}else if(X.length>0){""!==j.current&&(U.current+=1);const e=Math.floor(Math.random()*X.length),t=X[e];v(t),j.current=t;const n=t[0];p(n),x(0),k([]),N(0),console.log('[DEBUG selectNextTarget \u82f1\u6570\u77ed\u6587] New sentence: "'.concat(t,'". About to call updateTargetGroupAndStageForAlphaNum with char: ').concat(n)),Z(n)}}),[i,X,Z]);(0,r.useEffect)((()=>(console.log("[AlphaNumTanbunChallengePractice useEffect countdown] Start. isActive: ".concat(t,", status: ").concat(l,", countdownValue: ").concat(u)),t&&"countdown"===l&&(u>0?F.current=window.setTimeout((()=>{c((e=>e-1))}),1e3):(console.log("[AlphaNumTanbunChallengePractice useEffect countdown] Countdown finished. Setting status to 'running'."),s("running"),h("\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?lt:st),D.current=Date.now(),"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?(H.current=0,V.current=0,B.current=0,z.current=0,W.current=0):(w(0),I(0),U.current=0,z.current=0,W.current=0),J())),console.log("[AlphaNumTanbunChallengePractice useEffect countdown] End. isActive: ".concat(t,", status: ").concat(l,", countdownValue: ").concat(u)),()=>{null!==F.current&&clearTimeout(F.current)})),[t,l,u,J,i]),(0,r.useEffect)((()=>(t&&"running"===l?R.current=window.setInterval((()=>{var e;const t="\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?lt:st,n=Date.now()-(null!==(e=D.current)&&void 0!==e?e:Date.now()),r=Math.max(0,t-n);if(h(r),0===r){let e;if(console.log("[AlphaNumTanbunChallengePractice useEffect trainingTimer] Time up! Setting status to 'finished'."),s("finished"),R.current&&clearInterval(R.current),"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i){var o;const t=1,n=t>0?Math.round(H.current/t):0,r=V.current,a=r>0?(r-B.current)/r:0,i=10*H.current,s=Math.max(0,Math.pow(a,2)),c=5*Math.max(0,n-50),d=100*Math.log(1+(null!==(o=W.current)&&void 0!==o?o:0)),h=50*H.current,f=Math.round((i+c+d+h)*s),p=(u=100*a,(l=f)>=1e4&&u>=98?"Typing Master! \u9a5a\u7570\u7684\uff01":l>=7e3&&u>=95?"Excellent! \u7d20\u6674\u3089\u3057\u3044\uff01":l>=4e3&&u>=90?"Great! \u3068\u3066\u3082\u826f\u3044\u8abf\u5b50\uff01":l>=2e3&&u>=85?"Good! \u826f\u3044\u3067\u3059\u306d\uff01":l>=1e3?"Nice! \u305d\u306e\u8abf\u5b50\uff01":"Keep Trying! \u7df4\u7fd2\u3042\u308b\u306e\u307f\uff01");e={totalQuestions:H.current,totalCharsTyped:V.current,correctCharsCount:H.current,correctCount:H.current,missCount:B.current,accuracy:a,score:f,cpm:n,maxConsecutiveCorrectChars:W.current,rankMessage:p}}else{var a;const t=3,n=t>0?Math.round(S/t):0,r=S+_>0?Math.max(0,S/(S+_)):0,o=10*S,i=Math.max(0,Math.pow(r,2)),l=5*Math.max(0,n-50),s=100*Math.log(1+(null!==(a=W.current)&&void 0!==a?a:0)),u=50*U.current,c=Math.round((o+l+s+u)*i),d=((e,t)=>e>=2e4&&t>=98?"Typing God! \u9a5a\u7570\u7684\uff01":e>=15e3&&t>=97?"Pro Typer! \u30d7\u30ed\u7d1a\uff01":e>=1e4&&t>=95?"Excellent! \u7d20\u6674\u3089\u3057\u3044\uff01":e>=7e3&&t>=90?"Great! \u3068\u3066\u3082\u826f\u3044\u8abf\u5b50\uff01":e>=4e3&&t>=85?"Good! \u826f\u3044\u3067\u3059\u306d\uff01":e>=2e3?"Nice! \u305d\u306e\u8abf\u5b50\uff01":"Keep Trying! \u7df4\u7fd2\u3042\u308b\u306e\u307f\uff01")(c,100*r);e={totalQuestions:U.current,totalCharsTyped:S+_,correctCharsCount:S,correctCount:S,missCount:_,accuracy:r,score:c,cpm:n,maxConsecutiveCorrectChars:W.current,rankMessage:d}}q(e)}var l,u}),100):"finished"===l&&R.current&&clearInterval(R.current),()=>{null!==R.current&&clearInterval(R.current)})),[t,l,i,S,_]);const ee=(0,r.useCallback)((()=>{console.log("[AlphaNumTanbunChallengePractice reset] Called for practice: ".concat(i,".")),s("idle"),c(5),h("\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?lt:st),p(null),y("waitingForLayer4Key"),q(null),D.current=null,"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?(H.current=0,V.current=0,B.current=0,z.current=0,W.current=0):(v(""),j.current="",x(0),k([]),w(0),I(0),N(0),U.current=0,z.current=0,W.current=0,M(null)),null!==F.current&&clearTimeout(F.current),null!==R.current&&clearInterval(R.current),console.log("[AlphaNumTanbunChallengePractice reset] Finished. Status set to 'idle'.")}),[i]);(0,r.useEffect)((()=>{console.log("[AlphaNumTanbunChallengePractice useEffect practiceName] practiceName changed to: ".concat(i,". Calling reset.")),ee(),h("\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?lt:st),s("idle"),console.log("[AlphaNumTanbunChallengePractice useEffect practiceName] Status explicitly set to 'idle' after practiceName change. Current status: idle")}),[i,ee]),(0,r.useEffect)((()=>{console.log("[AlphaNumTanbunChallengePractice useEffect isActive] Start. isActive: ".concat(t,", current status: ").concat(l,", prevIsActive: ").concat(Q.current)),!t&&Q.current?(console.log("[AlphaNumTanbunChallengePractice useEffect isActive] Practice became inactive. Calling reset. Current status: ".concat(l)),ee()):t&&"idle"===l&&(console.log("[AlphaNumTanbunChallengePractice useEffect isActive] Practice is active and status is idle. Setting status to 'countdown'."),s("countdown")),console.log("[AlphaNumTanbunChallengePractice useEffect isActive] End of effect. isActive: ".concat(t,", current status: ").concat(l,", prevIsActive: ").concat(Q.current)),Q.current=t}),[t,l,ee]);const te=(0,r.useCallback)((e=>{if(console.log("[DEBUG handleInput ".concat(i," RAW_INPUT_INFO_AT_ENTRY] inputInfo: ").concat(JSON.stringify(e))),console.log("[DEBUG handleInput ".concat(i,"] Entry. status: ").concat(l,', targetChar: "').concat(f,'", challengeStage: "').concat(g,'", degreeSymbolStep: ').concat(T,", currentTargetGroupIndex: ").concat(K)),"running"!==l||!f||!a)return{isExpected:!1,shouldGoToNext:!1,errorLayer:null};if("release"!==e.type)return{isExpected:!1,shouldGoToNext:!1,errorLayer:null};const t=e.pressCode,n=e.layerIndex;let r=!1,o=null;if("\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i){const e=E.find((e=>e.includes(f.toLowerCase())));if(!e)return{isExpected:!1,shouldGoToNext:!1,errorLayer:null};if("waitingForLayer4Key"===g){var s,u;V.current+=1;const n=null===(s=a[4])||void 0===s||null===(u=s[t])||void 0===u?void 0:u.trim().toLowerCase();n&&n===e?(r=!0,y("waitingForLayer5Key"),z.current=0):(B.current+=1,o=4,z.current=0)}else if("waitingForLayer5Key"===g){var c,d;V.current+=1;const n=e.indexOf(f.toLowerCase()),i=["\u2460","\u2461","\u2462","\u2463"],l=-1!==n&&n<i.length?i[n]:null,s=null===(c=a[5])||void 0===c||null===(d=c[t])||void 0===d?void 0:d.trim();l&&s===l?(r=!0,H.current+=1,z.current+=1,W.current=Math.max(W.current,z.current),J()):(B.current+=1,o=5,y("waitingForLayer4Key"),z.current=0)}}else{var h,m;const i=null===(h=a[n])||void 0===h||null===(m=h[t])||void 0===m?void 0:m.trim(),l=i?ut(i):null;let s=!1;if("\xb0"===f){const n=Y(9,"\u8a18\u53f7"),r=Y(9,"\xb0");if(0===T&&9===e.layerIndex&&t===n)N(1),s=!0;else if(1===T&&9===e.layerIndex&&t===r){k((e=>[...e,f])),w((e=>e+1));const e=b+1;if(e<j.current.length){const t=j.current[e];p(t),x(e),Z(t)}else J();N(0),s=!0,z.current+=1,W.current=Math.max(W.current,z.current)}else I((e=>e+1)),o=e.layerIndex,N(0),z.current=0}else if("?"===f){const e=Y(8,"\uff1f");if("waitingForEqualKigoKeyForQuestionMark"===g){const e=Y(8,P);8===n&&t===e?(y("waitingForQuestionMarkItselfKey"),s=!0):(I((e=>e+1)),o=8,z.current=0,console.log("[DEBUG handleInput \u82f1\u6570\u77ed\u6587 ? stage1 error] pressCode: ".concat(t,", expected KigoKeyIndex: ").concat(e)))}else if("waitingForQuestionMarkItselfKey"===g)if(8===n&&t===e){k((e=>[...e,f])),w((e=>e+1));const e=b+1;if(e<j.current.length){const t=j.current[e];p(t),x(e),Z(t)}else J();s=!0,z.current+=1,W.current=Math.max(W.current,z.current)}else I((e=>e+1)),o=8,Z(f),z.current=0,console.log("[DEBUG handleInput \u82f1\u6570\u77ed\u6587 ? stage2 error] pressCode: ".concat(t,", expected QuestionMarkIndex: ").concat(e))}else if("-"===f){const e=Y(9,"\u8a18\u53f7"),r=Y(9,"-");if("waitingForSymbolKeyForHyphenLayer9"===g)9===n&&t===e?(y("waitingForHyphenItselfKeyLayer9"),s=!0):(I((e=>e+1)),o=9,z.current=0,console.log("[DEBUG handleInput \u82f1\u6570\u77ed\u6587 - stage1 error] pressCode: ".concat(t,", expected SymbolKeyIndex: ").concat(e)));else if("waitingForHyphenItselfKeyLayer9"===g)if(9===n&&t===r){k((e=>[...e,f])),w((e=>e+1));const e=b+1;if(e<j.current.length){const t=j.current[e];p(t),x(e),Z(t)}else J();s=!0,z.current+=1,W.current=Math.max(W.current,z.current)}else I((e=>e+1)),o=9,Z(f),z.current=0,console.log("[DEBUG handleInput \u82f1\u6570\u77ed\u6587 - stage2 error] pressCode: ".concat(t,", expected ItselfKeyIndex: ").concat(r))}else if(":"===f){const e=Y(L,"\u8a18\u53f7"),r=Y(L,"\uff1a");if("waitingForSymbolKeyForColonLayer10"===g)n===L&&t===e?(y("waitingForColonItselfKeyLayer10"),s=!0):(I((e=>e+1)),o=L,z.current=0,console.log("[DEBUG handleInput \u82f1\u6570\u77ed\u6587 : stage1 error] pressCode: ".concat(t,", expected SymbolKeyIndex: ").concat(e)));else if("waitingForColonItselfKeyLayer10"===g)if(n===L&&t===r){k((e=>[...e,f])),w((e=>e+1));const e=b+1;if(e<j.current.length){const t=j.current[e];p(t),x(e),Z(t)}else J();s=!0,z.current+=1,W.current=Math.max(W.current,z.current)}else I((e=>e+1)),o=L,Z(f),z.current=0,console.log("[DEBUG handleInput \u82f1\u6570\u77ed\u6587 : stage2 error] pressCode: ".concat(t,", expected ItselfKeyIndex: ").concat(r))}else if("'"===f){const e=Y(A,"\u8a18\u53f7"),r=Y(A,"'");if("waitingForApostropheSymbolKeyLayer10Index16"===g)n===A&&t===e?(y("waitingForApostropheItselfKeyLayer10Index9"),s=!0):(I((e=>e+1)),o=A,z.current=0,console.log("[DEBUG handleInput \u82f1\u6570\u77ed\u6587 ' stage1 error] pressCode: ".concat(t,", expected SymbolKeyIndex: ").concat(e)));else if("waitingForApostropheItselfKeyLayer10Index9"===g)if(n===A&&t===r){k((e=>[...e,f])),w((e=>e+1));const e=b+1;if(e<j.current.length){const t=j.current[e];p(t),x(e),Z(t)}else J();s=!0,z.current+=1,W.current=Math.max(W.current,z.current)}else I((e=>e+1)),o=A,Z(f),z.current=0,console.log("[DEBUG handleInput \u82f1\u6570\u77ed\u6587 ' stage2 error] pressCode: ".concat(t,", expected ItselfKeyIndex: ").concat(r))}else if(","===f){if("waitingForEqualKigoKeyForComma"===g){const e=Y(8,P);8===n&&t===e?(y("waitingForCommaKeyItself"),s=!0):(I((e=>e+1)),o=8,z.current=0)}else if("waitingForCommaKeyItself"===g){const e=Y(8,"\u3002");if(8===n&&t===e){k((e=>[...e,f])),w((e=>e+1));const e=b+1;if(e<j.current.length){const t=j.current[e];p(t),x(e),Z(t)}else J();s=!0,z.current+=1,W.current=Math.max(W.current,z.current)}else I((e=>e+1)),o=8,Z(f),z.current=0}}else if("."===f){if("waitingForEqualKigoKeyForPeriod"===g){const e=Y(8,P);8===n&&t===e?(y("waitingForPeriodKeyItself"),s=!0):(I((e=>e+1)),o=8,z.current=0)}else if("waitingForPeriodKeyItself"===g){const e=Y(8,"\u3001");if(8===n&&t===e){k((e=>[...e,f])),w((e=>e+1));const e=b+1;if(e<j.current.length){const t=j.current[e];p(t),x(e),Z(t)}else J();s=!0,z.current+=1,W.current=Math.max(W.current,z.current)}else I((e=>e+1)),o=8,Z(f),z.current=0}}else if("waitingForNumberKey"===g)0===n&&l===f?(y("waitingForZeroKey"),s=!0):(I((e=>e+1)),o=0,z.current=0);else if("waitingForZeroKey"===g)if(0===n&&"0"===l){k((e=>[...e,f])),w((e=>e+1));const e=b+1;if(e<j.current.length){const t=j.current[e];p(t),x(e),Z(t)}else J();s=!0,z.current+=1,W.current=Math.max(W.current,z.current)}else I((e=>e+1)),o=0,z.current=0;else if("waitingForLayer4KeyForUppercase"===g){const e=null!==K?E[K]:null;e&&4===n&&(null===l||void 0===l?void 0:l.toLowerCase())===e?(y("waitingForLayer5KeyForUppercase"),s=!0):(I((e=>e+1)),o=4,z.current=0)}else if("waitingForLayer5KeyForUppercase"===g){const e=null!==K?E[K]:null;if(e){var v;const n=e.indexOf(f.toLowerCase()),r=["\u2460","\u2461","\u2462","\u2463"],i=-1!==n&&n<r.length?r[n]:null,l=null===(v=a[5])||void 0===v?void 0:v[t];(null===l||void 0===l?void 0:l.trim())===i?(y("waitingForCorrectionKeyForUppercase"),s=!0):(I((e=>e+1)),o=5,Z(f),z.current=0)}}else if("waitingForCorrectionKeyForUppercase"===g){var C,S;const e=null===(C=a[4])||void 0===C||null===(S=C[t])||void 0===S?void 0:S.trim();if(4===n&&"A/a"===e){k((e=>[...e,f])),w((e=>e+1));const e=b+1;if(e<j.current.length){const t=j.current[e];p(t),x(e),Z(t)}else J();s=!0,z.current+=1,W.current=Math.max(W.current,z.current)}else I((e=>e+1)),o=4,Z(f),z.current=0}else if(f.match(/^[a-z]$/)){if("waitingForLayer4Key"===g){const e=null!==K?E[K]:null;e&&4===n&&(null===l||void 0===l?void 0:l.toLowerCase())===e?(y("waitingForLayer5Key"),s=!0):(I((e=>e+1)),o=4,z.current=0)}else if("waitingForLayer5Key"===g){const e=null!==K?E[K]:null;if(e){var _;const r=e.indexOf(f.toLowerCase()),i=["\u2460","\u2461","\u2462","\u2463"],l=-1!==r&&r<i.length?i[r]:null,u=null===(_=a[5])||void 0===_?void 0:_[t],c=null===u||void 0===u?void 0:u.trim();if(c===l){k((e=>[...e,f])),w((e=>e+1));const e=b+1;if(e<j.current.length){const t=j.current[e];p(t),x(e),Z(t)}else J();s=!0,z.current+=1,W.current=Math.max(W.current,z.current)}else I((e=>e+1)),o=5,console.error("[ERROR handleInput \u82f1\u6570\u77ed\u6587 Alpha individual] Mismatch! (Interpreted as Layer 5) Original Layer: ".concat(n,', Input from Layer 5: "').concat(c,'" (expected "').concat(l,'")')),Z(f),z.current=0}else I((e=>e+1)),Z(f),z.current=0}}else if(l&&(l.toLowerCase()===f.toLowerCase()||" "===f&&"SP"===l)){k((e=>[...e,f])),w((e=>e+1));const e=b+1;if(e<j.current.length){const t=j.current[e];p(t),x(e),Z(t)}else J();s=!0,z.current+=1,W.current=Math.max(W.current,z.current)}else I((e=>e+1)),o=n,Z(f),z.current=0;r=s}return{isExpected:r,shouldGoToNext:!1,errorLayer:o}}),[l,f,g,a,J,i,b,T,Z,K,Y]),ne=(0,r.useCallback)(((e,t,n)=>{const r={className:null,overrideKey:null};if("running"!==l||!f)return r;const o=Y(9,"\u8a18\u53f7"),s=Y(9,"\xb0");if("\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i){const n=f.toLowerCase(),r=e.trim().toLowerCase();if("waitingForLayer4Key"===g){if(4===t){const e=E.find((e=>e.includes(n)));if(e&&r===e)return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}}else if("waitingForLayer5Key"===g&&5===t){const t=E.find((e=>e.includes(n)));if(t){const r=t.indexOf(n),o=["\u2460","\u2461","\u2462","\u2463"],a=-1!==r&&r<o.length?o[r]:null;if(a&&e.trim()===a)return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}}}else{const r=ut(e.trim());if("waitingForNumberKey"===g){if(0===t&&r===f)return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}else if("waitingForZeroKey"===g){if(0===t&&"0"===r)return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}else if("waitingForLayer4KeyForUppercase"===g){if(4===t){const t=null!==K?E[K]:null,n=e.trim().toLowerCase();if(t&&n===t.toLowerCase())return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}}else if("waitingForLayer5KeyForUppercase"===g){if(5===t){const t=null!==K?E[K]:null;if(t){const n=t.indexOf(f.toLowerCase()),r=["\u2460","\u2461","\u2462","\u2463"],o=-1!==n&&n<r.length?r[n]:null;if(o&&e.trim()===o)return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}}}else if("waitingForCorrectionKeyForUppercase"===g){if(4===t&&"A/a"===e.trim())return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}else if("\xb0"===f){if(9===t){if(0===T&&n===o)return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null};if(1===T&&n===s)return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}}else if("'"===f||"waitingForApostropheItselfKeyLayer10Index9"===g){if("waitingForApostropheSymbolKeyLayer10Index16"===g){if(t===A&&n===Y(A,"\u8a18\u53f7"))return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}else if("waitingForApostropheItselfKeyLayer10Index9"===g&&t===A&&n===Y(A,"'"))return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}else if(":"===f||"waitingForColonItselfKeyLayer10"===g){if("waitingForSymbolKeyForColonLayer10"===g){if(t===L&&n===Y(L,"\u8a18\u53f7"))return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:"\u8a18\u53f7"}}else if("waitingForColonItselfKeyLayer10"===g&&t===L&&n===Y(L,"\uff1a"))return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:"\uff1a"}}else if("."===f||"waitingForPeriodKeyItself"===g){if("waitingForEqualKigoKeyForPeriod"===g){if(8===t&&n===Y(8,P))return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}else if("waitingForPeriodKeyItself"===g&&8===t&&n===Y(8,"\u3001"))return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:"."}}else if(","===f||"waitingForCommaKeyItself"===g){if("waitingForEqualKigoKeyForComma"===g){if(8===t&&n===Y(8,P))return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}else if("waitingForCommaKeyItself"===g&&8===t&&n===Y(8,"\u3002"))return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:","}}else if("-"===f||"waitingForHyphenItselfKeyLayer9"===g){if("waitingForSymbolKeyForHyphenLayer9"===g){if(9===t&&n===Y(9,"\u8a18\u53f7"))return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}else if("waitingForHyphenItselfKeyLayer9"===g&&9===t&&n===Y(9,"-"))return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}else if("?"===f||"waitingForQuestionMarkItselfKey"===g){if("waitingForEqualKigoKeyForQuestionMark"===g){if(8===t&&n===Y(8,P))return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}else if("waitingForQuestionMarkItselfKey"===g&&8===t&&n===Y(8,"\uff1f"))return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}else if(f.match(/^[a-z]$/)){if("waitingForLayer4Key"===g){if(4===t){const t=null!==K?E[K]:null,n=e.trim().toLowerCase();if(t&&n===t.toLowerCase())return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}}else if("waitingForLayer5Key"===g&&5===t){const t=null!==K?E[K]:null;if(t){const n=t.indexOf(f.toLowerCase()),r=["\u2460","\u2461","\u2462","\u2463"],o=-1!==n&&n<r.length?r[n]:null;if(o&&e.trim()===o)return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}}}else{var u,c;const e=null===(u=a[t])||void 0===u||null===(c=u[n])||void 0===c?void 0:c.trim(),r=e?ut(e):null;if(r&&(r===f||" "===f&&"SP"===e)&&9!==t&&t!==A&&8!==t&&t!==L)return{className:"bg-blue-100 dark:bg-blue-300",overrideKey:null}}}return r}),[l,f,g,i,T,a,K,Y,n,o]);return(0,r.useMemo)((()=>{let e=[];"countdown"===l?e=["".concat(u,"\u79d2")]:"running"===l?"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i&&f?e=[f]:"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i&&m&&(e=[m]):"finished"===l&&(e=["\u7d42\u4e86\uff01"]);let t=[4,5];"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i&&("\xb0"===f?t=[9]:"'"===f||"waitingForApostropheSymbolKeyLayer10Index16"===g||"waitingForApostropheItselfKeyLayer10Index9"===g?t=[A]:":"===f||"waitingForSymbolKeyForColonLayer10"===g||"waitingForColonItselfKeyLayer10"===g?t=[L]:"-"===f||"waitingForSymbolKeyForHyphenLayer9"===g||"waitingForHyphenItselfKeyLayer9"===g?t=[9]:"?"===f||"waitingForEqualKigoKeyForQuestionMark"===g||"waitingForQuestionMarkItselfKey"===g||"."===f||"waitingForEqualKigoKeyForPeriod"===g||"waitingForPeriodKeyItself"===g||","===f||"waitingForEqualKigoKeyForComma"===g||"waitingForCommaKeyItself"===g?t=[8]:f&&f.match(/^[0-9]$/)?t=[0]:f&&!f.match(/^[a-zA-Z]$/)&&(t=[4,5]));let n=a;if("\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i&&a[8]){const e=a[8].map((e=>{const t=e.trim();return"\u3002"===t?",":"\u3001"===t?".":e}));n=a.map(((t,n)=>8===n?e:t))}return{headingChars:e,handleInput:te,getHighlightClassName:ne,reset:ee,challengeResults:$,status:l,countdownValue:u,targetLayerIndices:t,typedEndIndex:"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?b:null,isInvalidInputTarget:()=>!1,targetChar:null!==f&&void 0!==f?f:void 0,displayLayers:n,challengeTimer:d,challengeTotalTime:"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===i?lt:st}}),[l,u,f,m,b,te,ne,ee,$,i,a,g,d])},dt=e=>{let{isActive:t,gIdx:n,dIdx:o,layers:a,isRandomMode:i}=e;const[l,s]=(0,r.useState)("idle"),[u,c]=(0,r.useState)("initialSymbolKey"),d=(0,r.useRef)(t),h=(0,r.useRef)(n),f=(0,r.useRef)(o),p=(0,r.useRef)(i),[g,y]=(0,r.useState)(null),m=(0,r.useMemo)((()=>{if(i||!t||void 0===n||void 0===o||n<0||n>=R.length)return null;const e=R[n];if(!e||o<0||o>=e.chars.length)return null;return{type:"alphaSymbol1",char:e.chars[o],layerIndex:9}}),[t,i,n,o]),v=(0,r.useMemo)((()=>i?g:m),[i,g,m]),b=(0,r.useMemo)((()=>{var e;const t=null!==(e=null===v||void 0===v?void 0:v.char)&&void 0!==e?e:null;return console.log("[AlphaSymbolPractice1 actualSymbolTarget] currentTargetInfo: ".concat(JSON.stringify(v),", char: ").concat(t)),t}),[v]),x=((0,r.useMemo)((()=>"initialSymbolKey"===u?"\u8a18\u53f7":b),[u,b]),(0,r.useMemo)((()=>"initialSymbolKey"===u?"\u8a18\u53f7":b),[u,b]),(0,r.useMemo)((()=>{if(!t)return[];if(i)return v?[{char:v.char,isPracticeTarget:!0}]:[];{if(void 0===n||n<0||n>=R.length)return[];const e=R[n].chars.map(((e,t)=>({char:e,isPracticeTarget:t===o})));return e.length<=1?e:e.flatMap(((t,n)=>n<e.length-1?[t,{char:"\xa0",isPracticeTarget:!1}]:[t]))}}),[t,i,v,n,o])),C=(0,r.useCallback)((()=>{if(ke.length>0){const e=Math.floor(Math.random()*ke.length),t=ke[e];y(t),console.log("[AlphaSymbolPractice1 advanceToNextSymbol] New random target selected: ".concat(t.char))}c("initialSymbolKey"),s("waiting")}),[y,c,s]),k=(0,r.useCallback)((()=>{c("initialSymbolKey"),s("idle"),y(null)}),[c,s,y]);(0,r.useEffect)((()=>{!t&&d.current&&k(),t?d.current?i&&!g?C():i||m&&n===h.current&&o===f.current||(c("initialSymbolKey"),s("waiting")):(s("waiting"),i?C():m&&c("initialSymbolKey")):d.current&&s("idle"),d.current=t,h.current=n,f.current=o,p.current=i}),[t,i,n,o,k,s,C,g,m,c]);const S=(0,r.useCallback)((e=>{var n,r;if(!t||!b)return{isExpected:!1,shouldGoToNext:!1,errorLayer:null};if("release"!==e.type)return{isExpected:!1,shouldGoToNext:!1,errorLayer:null};const o=e.pressCode,d=null===(r=(null!==(n=a[9])&&void 0!==n?n:[])[o])||void 0===r?void 0:r.trim();let h=!1,f=l,p=null,g=!1;"initialSymbolKey"===u?"\u8a18\u53f7"===d?(h=!0,c("targetSymbolChar"),f="waiting"):(h=!1,f="incorrect",p=9):"targetSymbolChar"===u&&(d&&d===b?(h=!0,f="correct",g=!0,console.log("[AlphaSymbolPractice1 handleInput] Correct target symbol: ".concat(b,".")),i?(console.log("  [AlphaSymbolPractice1 handleInput] Random mode: Advancing to next random symbol."),C()):console.log("  [AlphaSymbolPractice1 handleInput] Normal mode: Signaling to advance (shouldGoToNext will be true).")):(h=!1,f="incorrect",p=9,c("initialSymbolKey"))),s(f);const y=!i&&g;return y&&(console.log("[AlphaSymbolPractice1 handleInput] Setting stage to initialSymbolKey for next char."),c("initialSymbolKey")),{isExpected:h,shouldGoToNext:y,errorLayer:p}}),[t,a,b,u,s,C,l,i,c]),w=(0,r.useCallback)(((e,n)=>{const r={className:null,overrideKey:null};if(!t)return r;if(9===n){const t=e.trim();if("initialSymbolKey"===u&&"\u8a18\u53f7"===t)return{className:"bg-blue-100",overrideKey:null};if("targetSymbolChar"===u&&b&&t===b)return{className:"bg-blue-100",overrideKey:null}}return r}),[t,u,b]),_=(0,r.useCallback)(((e,n,r)=>!(!t||"incorrect"!==l)&&(9===n&&r===e)),[t,l]),I=(0,r.useCallback)((()=>{s("waiting")}),[s]);return{headingChars:x,handleInput:S,getHighlightClassName:w,reset:k,status:l,targetChar:null!==b&&void 0!==b?b:void 0,errorHighlightLayer:"incorrect"===l?9:null,isInvalidInputTarget:_,clearErrorState:I,targetLayerIndex:9,targetLayerIndices:[9]}},ht=e=>{let{isActive:t,gIdx:n,dIdx:o,layers:a,isRandomMode:i}=e;const[l,s]=(0,r.useState)("idle"),[u,c]=(0,r.useState)("initialSymbolKey"),d=(0,r.useRef)(t),h=(0,r.useRef)(n),f=(0,r.useRef)(o),p=(0,r.useRef)(i),[g,y]=(0,r.useState)(null),m=(0,r.useMemo)((()=>{if(console.log("[AlphaSymbolPractice2 normalModeTargetInfo] Calculating. isActive: ".concat(t,", isRandomMode: ").concat(i,", gIdx: ").concat(n,", dIdx: ").concat(o)),i||!t||void 0===n||void 0===o||n<0||n>=D.length)return null;const e=D[n];var r;if(!e||o<0||o>=e.chars.length)return console.log("[AlphaSymbolPractice2 normalModeTargetInfo] Group not found or dIdx out of bounds. group: ".concat(JSON.stringify(e),", dIdx: ").concat(o,", group.chars.length: ").concat(null===e||void 0===e||null===(r=e.chars)||void 0===r?void 0:r.length)),null;const a=e.chars[o];return console.log('[AlphaSymbolPractice2 normalModeTargetInfo] Selected char: "'.concat(a,'" from group "').concat(e.groupName,'" at dIdx ').concat(o)),{type:"alphaSymbol2",char:a,layerIndex:10}}),[t,i,n,o]),v=(0,r.useMemo)((()=>i?g:m),[i,g,m]),b=(0,r.useMemo)((()=>{var e;const t=null!==(e=null===v||void 0===v?void 0:v.char)&&void 0!==e?e:null;return console.log("[AlphaSymbolPractice2 actualSymbolTarget] currentTargetInfo: ".concat(JSON.stringify(v),", char: ").concat(t)),t}),[v]),x=(0,r.useMemo)((()=>{if(!t)return[];if(i)return v?[{char:v.char,isPracticeTarget:!0}]:[];{if(void 0===n||n<0||n>=D.length)return[];const e=D[n].chars.map(((e,t)=>({char:e,isPracticeTarget:t===o})));return e.length<=1?e:e.flatMap(((t,n)=>n<e.length-1?[t,{char:"\xa0",isPracticeTarget:!1}]:[t]))}}),[t,i,v,n,o]),C=(0,r.useCallback)((()=>{if(Se.length>0){const e=Math.floor(Math.random()*Se.length),t=Se[e];y(t),console.log("[AlphaSymbolPractice2 advanceToNextRandomSymbol] New random target selected: ".concat(t.char))}c("initialSymbolKey"),s("waiting")}),[y,c,s]),k=(0,r.useCallback)((()=>{c("initialSymbolKey"),s("idle"),y(null)}),[c,s,y]);(0,r.useEffect)((()=>{console.log("[AlphaSymbolPractice2 useEffect] START. isActive: ".concat(t,", isRandomMode: ").concat(i,", gIdx: ").concat(n,", dIdx: ").concat(o,", prevIsActive: ").concat(d.current,", prevGIdx: ").concat(h.current,", prevDIdx: ").concat(f.current,", prevIsRandomMode: ").concat(p.current,", current status: ").concat(l)),!d.current&&t?(console.log("[AlphaSymbolPractice2 useEffect] Just became active."),k(),s("waiting"),c("initialSymbolKey"),i&&C()):t?i!==p.current?(console.log("[AlphaSymbolPractice2 useEffect] Random mode changed from ".concat(p.current," to ").concat(i,".")),c("initialSymbolKey"),s("waiting"),i&&C()):i?g||"running"===l||(console.log("[AlphaSymbolPractice2 useEffect] In random mode, no random target, advancing."),C()):n===h.current&&o===f.current||(console.log("[AlphaSymbolPractice2 useEffect] Normal mode, gIdx/dIdx changed. Prev dIdx: ".concat(f.current,", New dIdx: ").concat(o)),c("initialSymbolKey"),s("waiting")):d.current&&!t&&(console.log("[AlphaSymbolPractice2 useEffect] Just became inactive."),k()),d.current=t,h.current=n,f.current=o,p.current=i,console.log("[AlphaSymbolPractice2 useEffect] END. Current status: ".concat(l,", stage: ").concat(u))}),[t,i,n,o,k,s,C,g,c,l]);const S=(0,r.useCallback)((e=>{var n,r;if(!t||!b)return console.log("[AlphaSymbolPractice2 handleInput] Bailing: isActive: ".concat(t,", status: ").concat(l,", actualSymbolTarget: ").concat(b)),{isExpected:!1,shouldGoToNext:!1,errorLayer:null};if("release"!==e.type)return{isExpected:!1,shouldGoToNext:!1,errorLayer:null};const o=e.pressCode,d=null===(r=(null!==(n=a[10])&&void 0!==n?n:[])[o])||void 0===r?void 0:r.trim();let h=!1,f=l,p=null,g=!1;"initialSymbolKey"===u?(console.log('[AlphaSymbolPractice2 handleInput initialSymbolKey] pressedKeyOnLayer10: "'.concat(d,'"')),"\u8a18\u53f7"===d?(h=!0,c("targetSymbolChar"),f="waiting"):(h=!1,f="incorrect",p=10)):"targetSymbolChar"===u&&(console.log('[AlphaSymbolPractice2 handleInput targetSymbolChar] pressedKeyOnLayer10: "'.concat(d,'" (type: ').concat(typeof d,'), actualSymbolTarget: "').concat(b,'" (type: ').concat(typeof b,"), isRandomMode: ").concat(i)),d&&d===b?(h=!0,f="correct",g=!0,console.log("[AlphaSymbolPractice2 handleInput] Correct target symbol: ".concat(b,".")),i?(console.log("  [AlphaSymbolPractice2 handleInput] Random mode: Advancing to next random symbol."),C()):console.log("  [AlphaSymbolPractice2 handleInput] Normal mode: Signaling to advance (shouldGoToNext will be true).")):void 0!==d?(console.log('[AlphaSymbolPractice2 handleInput targetSymbolChar] MISMATCH. pressedKeyOnLayer10: "'.concat(d,'" (type: ').concat(typeof d,'), actualSymbolTarget: "').concat(b,'" (type: ').concat(typeof b,")")),h=!1,f="incorrect",p=10,c("initialSymbolKey")):(h=!1,f="incorrect",p=10,c("initialSymbolKey"))),s(f);const y=!i&&g;return console.log("[AlphaSymbolPractice2 handleInput DEBUG] Final check: isRandomMode: ".concat(i,", isCorrectAndFinalInputForSymbol: ").concat(g,", calculated shouldAdvance: ").concat(y)),y&&(console.log("[AlphaSymbolPractice2 handleInput] Setting stage to initialSymbolKey for next char."),c("initialSymbolKey")),{isExpected:h,shouldGoToNext:y,errorLayer:p}}),[t,a,b,u,s,C,l,i,c]),w=(0,r.useCallback)(((e,n)=>{const r={className:null,overrideKey:null};if(!t)return r;if(10===n){const t=e.trim();if("initialSymbolKey"===u&&"\u8a18\u53f7"===t)return{className:"bg-blue-100",overrideKey:null};if("targetSymbolChar"===u&&b&&t===b)return{className:"bg-blue-100",overrideKey:null}}return r}),[t,u,b]),_=(0,r.useCallback)(((e,n,r)=>!(!t||"incorrect"!==l)&&(10===n&&r===e)),[t,l]),I=(0,r.useCallback)((()=>{s("waiting")}),[s]);return{headingChars:x,handleInput:S,getHighlightClassName:w,reset:k,status:l,targetChar:null!==b&&void 0!==b?b:void 0,errorHighlightLayer:"incorrect"===l?10:null,isInvalidInputTarget:_,clearErrorState:I,targetLayerIndex:10,targetLayerIndices:[10]}},ft=e=>{let{gIdx:t,dIdx:n,isActive:o,side:i,kb:l,isRandomMode:s,layers:u,practice:c}=e;const[d,h]=(0,r.useState)("idle"),[f,p]=(0,r.useState)("kigoInput"),[g,y]=(0,r.useState)(!0),m=(0,r.useRef)(!1),v=(0,r.useRef)(null),b=(0,r.useRef)(t),x=(0,r.useRef)(n),k=(0,r.useRef)(!0),S=(0,r.useRef)(o),w=(0,r.useRef)(s),[_,I]=(0,r.useState)(null),T=(0,r.useMemo)((()=>s||!o||t<0||t>=C.length?null:C[t]),[o,s,t]),E=(0,r.useMemo)((()=>s||null===T||void 0===T||!T.inputs||n<0||n>=T.inputs.length?null:T.inputs[n]),[s,T,n]),N=(0,r.useMemo)((()=>s?"\uff1d"===(null===_||void 0===_?void 0:_.char):!!E&&!E.gyouKey),[s,_,E]),A=(0,r.useMemo)((()=>{var e,t;return s?null!==(e=null===_||void 0===_?void 0:_.char)&&void 0!==e?e:null:null!==(t=null===E||void 0===E?void 0:E.char)&&void 0!==t?t:null}),[s,_,E]),L=(0,r.useMemo)((()=>{var e,t;return N?null:s?null!==(e=null===_||void 0===_?void 0:_.gyouKey)&&void 0!==e?e:null:null!==(t=null===E||void 0===E?void 0:E.gyouKey)&&void 0!==t?t:null}),[s,_,E,N]),K=(0,r.useMemo)((()=>{if(!o)return[];if("\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13_\u82f1\u6570"===c){const e=C[t];if(!e||!e.chars)return[];const n=e.chars,r=s?null===_||void 0===_?void 0:_.char:A,o=n.map((e=>{let t=e;"\u3002"===e?t=",":"\u3001"===e&&(t=".");return{char:t,isPracticeTarget:e===r}}));return o.length<=1?o:o.flatMap(((e,t)=>t<o.length-1?[e,{char:"\xa0",isPracticeTarget:!1}]:[e]))}if(s)return _?[{char:_.char,isPracticeTarget:!0}]:[];{if(null===T||void 0===T||!T.chars)return[];const e=T.chars.map(((e,t)=>({char:e,isPracticeTarget:t===n})));return e.length<=1?e:e.flatMap(((t,n)=>n<e.length-1?[t,{char:"\xa0",isPracticeTarget:!1}]:[t]))}}),[o,c,s,_,T,n,A,t]),M=(0,r.useCallback)((()=>{if(ve.length>0){const e=Math.floor(Math.random()*ve.length),t=ve[e];I(t),p("kigoInput"),m.current=!1,y(!0)}else I(null)}),[I,p]),F=(0,r.useCallback)((()=>{p("kigoInput"),m.current=!1,y(!0),null!==v.current&&(clearTimeout(v.current),v.current=null),I(null),b.current=-1,x.current=-1,k.current=!0,w.current=!1,h("idle")}),[p,I]);(0,r.useEffect)((()=>{if(!o&&S.current&&F(),o){o&&!S.current&&(k.current=!0);const e=t!==b.current||n!==x.current,r=s&&!w.current;!s&&w.current||!s&&(k.current||e)?(h("waiting"),p("kigoInput"),m.current=!1,y(!0),null!==v.current&&(clearTimeout(v.current),v.current=null),I(null),b.current=t,x.current=n,k.current=!1):s&&(r||k.current||!_)&&(h("waiting"),M(),k.current=!1,b.current=t,x.current=n)}return S.current=o,w.current=s,o&&(b.current=t,x.current=n),()=>{null!==v.current&&(clearTimeout(v.current),v.current=null)}}),[o,s,t,n,_,F,M]);const R=(0,r.useCallback)((e=>{var t;if("release"!==e.type)return{isExpected:!0,shouldGoToNext:void 0};const{pressCode:r,layerIndex:o}=e;console.log("[Kigo3SM handleInput] Received release input: pressCode=".concat(r,", layerIndex=").concat(o,", stage: ").concat(f));let i,l=!1,c=f;const d=null!==(t=u[8])&&void 0!==t?t:[],g=d.findIndex((e=>e.trim()===P.trim()));if("kigoInput"===f)8===o&&r===g&&-1!==g?(l=!0,N?(c="waitingForSecondKigo",m.current=!0,null!==v.current&&clearTimeout(v.current),y(!1),v.current=window.setTimeout((()=>{y(!0),v.current=null}),300),i=void 0):(c="gyouInput",m.current=!1,y(!1),h("waiting"),i=void 0)):(h("incorrect"),l=!1,c="kigoInput",i=!1);else if("gyouInput"===f)if(8===o){var b;const e=null===(b=d[r])||void 0===b?void 0:b.trim(),t=Z(null!==L&&void 0!==L?L:"").trim(),o=Z(null!==A&&void 0!==A?A:"").trim();let u=!1;if(e){const n=a.includes(t),r=Z(e).trim();u=n?"\u2026"===o&&"..."===r||r===o:","===t?"\u3002"===e:"."===t?"\u3001"===e:r===t}if(console.log('[Kigo3SM handleInput] Stage gyouInput. originalInputKeyLabel: "'.concat(e,'", expectedGyouKey: "').concat(L,'", normalizedExpectedGyouKey: "').concat(t,'", currentTargetChar: "').concat(A,'", isInputCorrect: ').concat(u)),u){if(h("correct"),l=!0,c="kigoInput",s)M(),i=void 0;else{var x;const e=null!==(x=null===T||void 0===T?void 0:T.chars)&&void 0!==x?x:[];i=n>=e.length-1}m.current=!1,y(!1)}else h("incorrect"),l=!1,c="kigoInput",i=!1,m.current=!1,y(!1)}else h("incorrect"),l=!1,c="kigoInput",i=!1,m.current=!1,y(!1);else if("waitingForSecondKigo"===f)if(8===o&&r===g&&-1!==g)if(h("correct"),l=!0,c="kigoInput",m.current=!1,y(!1),s)M(),i=void 0;else{var C;const e=null!==(C=null===T||void 0===T?void 0:T.chars)&&void 0!==C?C:[];i=n>=e.length-1}else h("incorrect"),l=!1,c="kigoInput",m.current=!1,y(!1),i=!1;return c!==f&&(p(c),console.log("[Kigo3SM handleInput] Stage changed from ".concat(f," to ").concat(c))),console.log("[Kigo3SM handleInput] Returning: isExpected=".concat(l,", shouldGoToNext=").concat(i)),{isExpected:l,shouldGoToNext:i,errorLayer:l?null:8}}),[f,u,N,L,A,s,M,p,y,t,n,h,m,v,T]),D=(0,r.useCallback)(((e,t,n)=>{var r;const o=d,i=(null!==e&&void 0!==e?e:"").trim();console.log('[Kigo3SM getHighlightClassName] key: "'.concat(i,'", layoutIndex: ').concat(t,", keyIndex: ").concat(n,", stage: ").concat(f,", status: ").concat(o,", isWaitingForSecondKigo: ").concat(m.current,", showHighlightAfterWait: ").concat(g));const l=null!==(r=u[8])&&void 0!==r?r:[];if("correct"===o)return{className:null,overrideKey:i};let s=null;const c=l.findIndex((e=>e.trim()===P.trim()));Z(i).trim();if(8===t){if("kigoInput"===f)8===t&&n===c&&-1!==c&&(console.log("[Kigo3SM getHighlightClassName] Stage kigoInput. Highlighting ".concat(i," (keyIndex ").concat(n,")")),s="bg-blue-100 dark:bg-blue-800");else if("gyouInput"===f){const e=L?l.findIndex((e=>{const t=(null!==e&&void 0!==e?e:"").trim(),n=Z(L).trim();if(a.includes(n)){const e=Z(null!==A&&void 0!==A?A:"").trim(),n=Z(t).trim();return"\u2026"===e&&"..."===n||n===e}return","===n?"\u3002"===t:"."===n?"\u3001"===t:Z(t).trim()===n})):-1;console.log('[Kigo3SM getHighlightClassName] Stage gyouInput. targetGyouKey: "'.concat(L,'"')),console.log("[Kigo3SM getHighlightClassName]   Normalized findIndex result: ".concat(e)),L&&console.log('[Kigo3SM getHighlightClassName]   Comparing normalized layer keys with normalized expectedGyouKey: "'.concat(Z(null!==L&&void 0!==L?L:"").trim(),'"')),8===t&&n===e&&-1!==e&&(s="bg-blue-100 dark:bg-blue-800")}else"waitingForSecondKigo"===f&&8===t&&n===c&&-1!==c&&(console.log("[Kigo3SM getHighlightClassName] Stage waitingForSecondKigo. Highlighting ".concat(i," (keyIndex ").concat(n,") with delay.")),s=g?"bg-blue-100 dark:bg-blue-800":null);if(8===t&&"incorrect"!==d){const e=l.findIndex((e=>e.trim()===P.trim())),t=L?l.findIndex((e=>e.trim()===L.trim())):-1;null!==s||("kigoInput"===f||"waitingForSecondKigo"===f)&&n===e||"gyouInput"===f&&n===t||(s="text-gray-700 dark:text-gray-300")}}return{className:s?s.trim():null,overrideKey:i}}),[d,f,u,A,L,m,g,t,n]),O=(0,r.useCallback)(((e,t,n)=>!(!o||"incorrect"!==d)&&(8===t&&n===e)),[o,d]),j=(0,r.useCallback)((()=>{h("waiting")}),[h]),H=(0,r.useMemo)((()=>"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13_\u82f1\u6570"===c?!u||u.length<=8?u:u.map(((e,t)=>8===t?e.map((e=>{const t=e.trim();return"\u3002"===t?",":"\u3001"===t?".":e})):e)):u),[u,c]);return{headingChars:K,handleInput:R,getHighlightClassName:D,reset:F,isInvalidInputTarget:O,status:d,targetChar:null!==A&&void 0!==A?A:void 0,currentTarget:E?{type:"kigo3",char:E.char,isEqualSign:!E.gyouKey,gyouKey:E.gyouKey}:void 0,displayLayers:H,targetLayerIndices:[8],targetLayerIndex:8,clearErrorState:j,stage:f}},pt=e=>{const{side:t,layers:n,kb:o,isAlphaNumericMode:i}=e,[l,S]=(0,r.useState)(""),[w,_]=(0,r.useState)(0),[I,N]=(0,r.useState)(0),[P,A]=(0,r.useState)(!1),[L,K]=(0,r.useState)(!1),[O,j]=(0,r.useState)(!1),H=(0,r.useCallback)((()=>{K((e=>!e))}),[]),V=(0,r.useCallback)((e=>{var t,n,r,o,i,l,d,p,m,S,A,L,K,O;console.log("[PracticeManagement nextStage CALLED] Practice: ".concat(e,", Current gIdx: ").concat(w,", dIdx: ").concat(I,", isRandomMode: ").concat(P));try{throw new Error("Actual call stack")}catch(V){console.log(V.stack)}if(["\u304b\u306a\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u8a18\u53f7\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"].includes(e))return;if(P&&["\u6e05\u97f3\u306e\u57fa\u672c\u7df4\u7fd2","\u62d7\u97f3\u306e\u57fa\u672c\u7df4\u7fd2","\u6fc1\u97f3\u306e\u57fa\u672c\u7df4\u7fd2","\u534a\u6fc1\u97f3\u306e\u57fa\u672c\u7df4\u7fd2","\u6570\u5b57\u306e\u57fa\u672c\u7df4\u7fd2","\u5c0f\u6587\u5b57\u306e\u57fa\u672c\u7df4\u7fd2","\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff11","\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff12","\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13","\u62d7\u6fc1\u97f3\u306e\u7df4\u7fd2","\u62d7\u534a\u6fc1\u97f3\u306e\u7df4\u7fd2","\u62d7\u97f3\u62e1\u5f35\uff11","\u62d7\u97f3\u62e1\u5f35\uff12"].includes(e))return void console.warn('[PracticeManagement nextStage] Called for self-managing random practice "'.concat(e,'". Doing nothing regarding gIdx/dIdx advancement by usePracticeManagement.'));if(P&&("\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff11"===e||"\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff12"===e))return void console.warn("[PracticeManagement nextStage] Called for '".concat(e,"' in random mode. Hook handles its own progression."));let j,H;switch(e){case"\u6e05\u97f3\u306e\u57fa\u672c\u7df4\u7fd2":j=a,H=null===(t=s[a[w]])||void 0===t?void 0:t.length;break;case"\u62d7\u97f3\u306e\u57fa\u672c\u7df4\u7fd2":j=u,H=null===(n=c[u[w]])||void 0===n?void 0:n.length;break;case"\u6fc1\u97f3\u306e\u57fa\u672c\u7df4\u7fd2":j=h,H=null===(r=f[h[w]])||void 0===r?void 0:r.length;break;case"\u534a\u6fc1\u97f3\u306e\u57fa\u672c\u7df4\u7fd2":j=g,H=null===(o=y[g[0]])||void 0===o?void 0:o.length;break;case"\u5c0f\u6587\u5b57\u306e\u57fa\u672c\u7df4\u7fd2":j=v,H=null===(i=v[w])||void 0===i?void 0:i.inputs.length;break;case"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff11":j=b,H=null===(l=b[w])||void 0===l?void 0:l.chars.length,console.log("[PracticeManagement nextStage KIGO1] gIdx: ".concat(w,", dIdx: ").concat(I,", dIdxLimit: ").concat(H,", currentGroupData exists: ").concat(!!j));break;case"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff12":j=x,H=null===(d=x[w])||void 0===d?void 0:d.chars.length;break;case"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13":case"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13_\u82f1\u6570":j=C,H=null===(p=C[w])||void 0===p?void 0:p.chars.length,console.log("[PracticeManagement nextStage KIGO3] gIdx: ".concat(w,", dIdx: ").concat(I,", dIdxLimit: ").concat(H,", currentGroupData exists: ").concat(!!j));break;case"\u62d7\u6fc1\u97f3\u306e\u7df4\u7fd2":j=k,H=null===(m=k[w])||void 0===m?void 0:m.chars.length;break;case"\u62d7\u534a\u6fc1\u97f3\u306e\u7df4\u7fd2":j=T,H=null===(S=T[0])||void 0===S?void 0:S.chars.length;break;case"\u62d7\u97f3\u62e1\u5f35\uff11":if(1===I)return void N(3);j=M,H=4;break;case"\u62d7\u97f3\u62e1\u5f35\uff12":j=F,H=null===(A=F[w])||void 0===A?void 0:A.targets.length;break;case"\u82f1\u5b57\u306e\u57fa\u672c\u7df4\u7fd2":case"Caps Lock\u64cd\u4f5c":case"\u5927\u6587\u5b57\u5909\u63db\u64cd\u4f5c":j=E,H=null===(L=E[w])||void 0===L?void 0:L.length;break;case"\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff11":j=R,H=null===(K=R[w])||void 0===K?void 0:K.chars.length;break;case"\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff12":j=D,H=null===(O=D[w])||void 0===O?void 0:O.chars.length;break;default:return}void 0!==H&&void 0!==j&&(I<H-1?(console.log("[PracticeManagement nextStage IF_BLOCK] Practice: ".concat(e,", Condition (dIdx < dIdxLimit - 1) is TRUE. dIdx: ").concat(I,", dIdxLimit: ").concat(H,". Incrementing dIdx.")),N((e=>e+1))):(console.log("[PracticeManagement nextStage ELSE_BLOCK] Practice: ".concat(e,", Condition (dIdx < dIdxLimit - 1) is FALSE. dIdx: ").concat(I,", dIdxLimit: ").concat(H,". Incrementing gIdx.")),N("\u62d7\u97f3\u62e1\u5f35\uff11"===e?1:0),_((e=>{const t=e+1;return t>=j.length?0:t}))))}),[w,I,_,N,P]),B=(0,r.useMemo)((()=>({showKeyLabels:!["\u304b\u306a\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u8a18\u53f7\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"].includes(l)||L,gIdx:w,dIdx:I,side:t,layers:n,kb:o,isRandomMode:P,onAdvance:()=>V(l),isAlphaNumericMode:i})),[w,I,t,n,o,P,l,L,V,i]),U=(0,r.useMemo)((()=>({showKeyLabels:!["\u304b\u306a\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u8a18\u53f7\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"].includes(l)||L,gIdx:I,dIdx:0,side:t,layers:n,kb:o,isRandomMode:P,onAdvance:()=>V(l),isAlphaNumericMode:i})),[I,t,n,o,P,l,L,V,i]),G=Te(q(q({},B),{},{isActive:"\u6e05\u97f3\u306e\u57fa\u672c\u7df4\u7fd2"===l})),z=function(e){let{gIdx:t,dIdx:n,isActive:o,side:a,kb:i,isRandomMode:l}=e;const[s,h]=(0,r.useState)(null),[f,p]=(0,r.useState)("gyouInput"),[g,y]=(0,r.useState)("waiting"),{hid2Gyou:m,hid2Dan:v}=(0,r.useMemo)((()=>"tw-20v"===i?"left"===a?{hid2Gyou:se,hid2Dan:ue}:{hid2Gyou:ae,hid2Dan:ie}:"left"===a?{hid2Gyou:ne,hid2Dan:oe}:{hid2Gyou:J,hid2Dan:te}),[a,i]),b=(0,r.useMemo)((()=>{const e="tw-20v"===i?"left"===a?se:ae:"left"===a?ne:J,t="tw-20v"===i?16:20,n=Object.entries(e).find((e=>{let[n,r]=e;return"\u3083\u3085\u3087"===r&&parseInt(n)<=t}));return n?parseInt(n[0]):null}),[a,i]),[x,C]=(0,r.useState)(null),k=(0,r.useRef)(t),S=(0,r.useRef)(n),w=(0,r.useRef)(!0),_=(0,r.useRef)(o),I=(0,r.useRef)(l),T=(0,r.useCallback)((()=>{if(he.length>0){const e=Math.floor(Math.random()*he.length);C(he[e]),p("gyouInput"),y("waiting")}else C(null),y("finished")}),[C,p,y]),E=(0,r.useCallback)((()=>{p("gyouInput"),C(null),k.current=-1,S.current=-1,h(null),console.log("[YouonPractice reset] Error highlight layer cleared."),w.current=!0,I.current=!1,y("waiting")}),[p,C,y]);(0,r.useEffect)((()=>{if(!o&&_.current&&(console.log("[Youon useEffect] Resetting state because isActive became false."),E(),h(null)),o){o&&!_.current&&(w.current=!0,y("waiting"));const e=t!==k.current||n!==S.current,r=l&&!I.current;!l&&I.current||!l&&(w.current||e)?(console.log("[Youon useEffect] Normal mode. isInitialMount=".concat(w.current,", indicesChanged=").concat(e)),p("gyouInput"),C(null),h(null),y("waiting"),k.current=t,S.current=n,w.current=!1):l&&(r||w.current||!x)&&(console.log("[Youon useEffect] Random mode. randomModeChangedToTrue=".concat(r,", isInitialMount=").concat(w.current,", !randomTarget=").concat(!x)),T(),h(null),w.current=!1,k.current=t,S.current=n)}_.current=o,I.current=l}),[o,l,t,n,x,E,T,h,y]);const N=(0,r.useMemo)((()=>!o||l||t<0||t>=u.length?null:u[t]),[o,l,t]),P=(0,r.useMemo)((()=>{if(!o||l||!N||!d[N])return null;const e=d[N];return!e||n<0||n>=e.length?null:e[n]}),[o,l,N,n]),A=(0,r.useMemo)((()=>o?l?x?[{char:x.char,isPracticeTarget:!0}]:[]:N&&c[N]?(c[N]||[]).map(((e,t)=>({char:e,isPracticeTarget:t===n}))):[]:[]),[o,l,x,N,n]),L=(0,r.useMemo)((()=>{var e;return null!==(e=l?null===x||void 0===x?void 0:x.gyouKey:N)&&void 0!==e?e:null}),[l,x,N]),K=(0,r.useMemo)((()=>{var e;return null!==(e=l?null===x||void 0===x?void 0:x.danKey:P)&&void 0!==e?e:null}),[l,x,P]),M=(0,r.useCallback)((e=>{if(!o||!L||!K||null===b||"release"!==e.type)return h(null),{isExpected:!1,shouldGoToNext:void 0,errorLayer:null};let r,a=!1,i=null,s="waiting";if("gyouInput"===f)Object.entries(m).filter((e=>{let[t,n]=e;return n===L})).map((e=>{let[t,n]=e;return parseInt(t)-1})).includes(e.pressCode)?(p("youonInput"),a=!0,r=void 0,h(null),i=null,s="waiting"):(a=!1,r=void 0,h(2),i=2,s="incorrect");else if("youonInput"===f)e.pressCode===(b?b-1:-1)?(p("danInput"),a=!0,r=void 0,h(null),i=null,s="waiting"):(a=!1,p("gyouInput"),r=void 0,h(2),i=2,s="incorrect");else if("danInput"===f)if(Object.entries(v).filter((e=>{let[t,n]=e;return n===K})).map((e=>{let[t,n]=e;return parseInt(t)-1})).includes(e.pressCode))if(a=!0,p("gyouInput"),h(null),i=null,s="correct",l)T(),r=!1;else{const e=u[t],o=c[e];r=!!(o&&n>=o.length-1)}else a=!1,p("gyouInput"),r=void 0,h(3),i=3,s="incorrect";return console.log("[YouonPractice handleInput] Returning: isExpected=".concat(a,", shouldGoToNext=").concat(r,", currentStage=").concat(f)),y(s),{isExpected:a,shouldGoToNext:r,errorLayer:i}}),[o,f,L,K,b,m,v,l,T,p,t,n,h,y]),F=(0,r.useMemo)((()=>{if(o){if(l)return null===x||void 0===x?void 0:x.char;var e;if(N&&c[N])return null===(e=c[N])||void 0===e?void 0:e[n]}}),[o,l,x,N,n]),R=(0,r.useCallback)(((e,t,n)=>{var r;const a={className:null,overrideKey:null};if(console.log('[YouonPractice getHighlightClassName] START. key: "'.concat(e,'", layoutIndex: ').concat(t,", isActive: ").concat(o,", stage: ").concat(f,', expectedGyouKey: "').concat(L,'", expectedDanKey: "').concat(K,'", currentErrorHighlightLayer: ').concat(s,", randomTargetChar: ").concat(null===x||void 0===x?void 0:x.char)),!o)return console.log("[YouonPractice getHighlightClassName] END - !isActive"),a;if(!L||!K)return console.log("[YouonPractice getHighlightClassName] END - !expectedGyouKey (".concat(!L,") or !expectedDanKey (").concat(!K,"). Gyou: ").concat(L,", Dan: ").concat(K)),a;if(s===t)return console.log("[YouonPractice getHighlightClassName] END - currentErrorHighlightLayer === layoutIndex (".concat(s,")")),a;let i=null,l=null;return"gyouInput"===f?(i=L,l=2):"youonInput"===f?(i="\u3083\u3085\u3087",l=2):"danInput"===f&&(i=K,l=3),console.log('[YouonPractice getHighlightClassName] Determined expectedKeyName: "'.concat(i,'", targetLayoutIndex: ').concat(l)),null!==i&&t===l&&e.trim()===i.trim()?(console.log("[YouonPractice getHighlightClassName] END - MATCH! Highlighting."),{className:"bg-blue-100",overrideKey:null}):(console.log("[YouonPractice getHighlightClassName] END - NO MATCH. Conditions: expectedKeyName !== null (".concat(null!==i,"), layoutIndex === targetLayoutIndex (").concat(t===l,"), key.trim() === expectedKeyName.trim() (").concat(e.trim()===(null===(r=i)||void 0===r?void 0:r.trim()),")")),a)}),[o,f,L,K,s,x]),D=(0,r.useCallback)(((e,t,n)=>!!o&&s===t&&n===e),[o,s]),O=(0,r.useCallback)((()=>{h(null),y("waiting")}),[h,y]);return{handleInput:M,getHighlightClassName:R,headingChars:A,reset:E,isInvalidInputTarget:D,errorHighlightLayer:s,clearErrorState:O,targetChar:F,status:g,targetLayerIndices:(0,r.useMemo)((()=>{let e=[2,3];if(null!==s){const t=new Set([2,3]);t.add(s),e=Array.from(t)}return e}),[s]),stage:f}}(q(q({},B),{},{isActive:"\u62d7\u97f3\u306e\u57fa\u672c\u7df4\u7fd2"===l})),W=function(e){let{isActive:t,gIdx:n,dIdx:o,side:a,kb:i,isRandomMode:l}=e;const[s,u]=(0,r.useState)("gyouInput"),[c,d]=(0,r.useState)(null),{hid2Gyou:g,hid2Dan:y}=(0,r.useMemo)((()=>"tw-20v"===i?"left"===a?{hid2Gyou:se,hid2Dan:ue}:{hid2Gyou:ae,hid2Dan:ie}:"left"===a?{hid2Gyou:ne,hid2Dan:oe}:{hid2Gyou:J,hid2Dan:te}),[a,i]),m=(0,r.useMemo)((()=>{const e="tw-20v"===i?"left"===a?se:ae:"left"===a?ne:J,t="tw-20v"===i?16:20,n=Object.entries(e).find((e=>{let[n,r]=e;return"\u201d \xb0 \u5c0f"===r&&parseInt(n)<=t}));return n?parseInt(n[0]):null}),[a,i]),[v,b]=(0,r.useState)(null),x=(0,r.useRef)(n),C=(0,r.useRef)(o),[k,S]=(0,r.useState)(null),w=(0,r.useRef)(!0),_=(0,r.useRef)(t),I=(0,r.useRef)(l),T=(0,r.useCallback)((()=>{if(fe.length>0){const e=Math.floor(Math.random()*fe.length);b(fe[e]),S(fe[e].char),u("gyouInput")}else b(null),S(null)}),[b,u]),E=(0,r.useCallback)((()=>{u("gyouInput"),b(null),S(null),x.current=-1,d(null),C.current=-1,w.current=!0,I.current=!1}),[u,b,S]);(0,r.useEffect)((()=>{if(!t&&_.current&&E(),t){t&&!_.current&&(w.current=!0);const r=n!==x.current||o!==C.current,a=l&&!I.current;if(!l&&I.current||!l&&(w.current||r)){if(u("gyouInput"),b(null),n>=0&&n<h.length&&o>=0){var e;const t=h[n],r=null===(e=f[t])||void 0===e?void 0:e[o];S(null!==r&&void 0!==r?r:null)}else S(null);d(null),x.current=n,C.current=o,w.current=!1}else l&&(a||w.current||!v)&&(T(),w.current=!1,d(null),x.current=n,C.current=o)}_.current=t,I.current=l}),[t,l,n,o,v,E,T,S,d]);const N=(0,r.useMemo)((()=>!t||l||n<0||n>=h.length?null:h[n]),[t,l,n]),P=(0,r.useMemo)((()=>{if(!t||l||!N||!p[N])return null;const e=p[N];return!e||o<0||o>=e.length?null:e[o]}),[t,l,N,o]),A=(0,r.useMemo)((()=>t?l?v?[v.char]:[]:N&&f[N]&&f[N]||[]:[]),[t,l,v,N]),L=(0,r.useMemo)((()=>{var e;return null!==(e=l?null===v||void 0===v?void 0:v.gyouKey:N)&&void 0!==e?e:null}),[l,v,N]),K=(0,r.useMemo)((()=>{var e;return null!==(e=l?null===v||void 0===v?void 0:v.danKey:P)&&void 0!==e?e:null}),[l,v,P]),M=(0,r.useCallback)((e=>{if(!t||!L||!K||null===m||"release"!==e.type)return d(null),{isExpected:!1,shouldGoToNext:void 0,errorLayer:null};const r=e.pressCode;let a,i=!1,c=null,p=s;switch(s){case"gyouInput":Object.entries(g).filter((e=>{let[t,n]=e;return n===L})).map((e=>{let[t,n]=e;return parseInt(t)})).includes(r+1)?(p="dakuonInput",i=!0,a=void 0,d(null),c=null):(i=!1,a=void 0,d(2),c=2);break;case"dakuonInput":r+1===m?(p="danInput",i=!0,a=void 0,d(null),c=null):(i=!1,p="gyouInput",a=void 0,d(2),c=2);break;case"danInput":if(p="gyouInput",Object.entries(y).filter((e=>{let[t,n]=e;return n===K})).map((e=>{let[t,n]=e;return parseInt(t)})).includes(r+1))if(i=!0,d(null),c=null,l)T(),a=!1;else{const e=h[n],t=f[e];a=!!(t&&o>=t.length-1)}else i=!1,d(3),c=3}return p!==s?u(p):i||"gyouInput"===s||u("gyouInput"),{isExpected:i,shouldGoToNext:a,errorLayer:c}}),[t,s,L,K,g,y,m,l,T,u,d,n,o]),F=(0,r.useCallback)(((e,n)=>{const r={className:null,overrideKey:null};if(!t||!L||!K)return r;if(c===n)return r;let o=null,a=null;switch(s){case"gyouInput":o=L,a=2;break;case"dakuonInput":o="\u201d \xb0 \u5c0f",a=2;break;case"danInput":o=K,a=3}return null!==o&&n===a&&e===o?{className:"bg-blue-100",overrideKey:null}:r}),[t,s,L,K,n,o,l,c]),R=(0,r.useCallback)(((e,n,r)=>!!t&&c===n&&r===e),[t,c]),D=(0,r.useCallback)((()=>{d(null)}),[d]);return{headingChars:A,handleInput:M,getHighlightClassName:F,reset:E,isInvalidInputTarget:R,targetChar:null!==k&&void 0!==k?k:void 0,errorHighlightLayer:c,clearErrorState:D,targetLayerIndices:(0,r.useMemo)((()=>{let e=[2,3];if(null!==c){const t=new Set([2,3]);t.add(c),e=Array.from(t)}return e}),[c]),stage:s}}(q(q({},B),{},{isActive:"\u6fc1\u97f3\u306e\u57fa\u672c\u7df4\u7fd2"===l})),Y=function(e){let{isActive:t,gIdx:n,dIdx:o,side:a,kb:i,isRandomMode:l}=e;const[s,u]=(0,r.useState)("gyouInput"),[c,d]=(0,r.useState)(!1),h=(0,r.useRef)(0),[f,p]=(0,r.useState)(!1),[g,v]=(0,r.useState)(null),b=(0,r.useRef)(null),{hid2Gyou:x,hid2Dan:C}=(0,r.useMemo)((()=>"tw-20v"===i?"left"===a?{hid2Gyou:se,hid2Dan:ue}:{hid2Gyou:ae,hid2Dan:ie}:"left"===a?{hid2Gyou:ne,hid2Dan:oe}:{hid2Gyou:J,hid2Dan:te}),[a,i]),k=(0,r.useMemo)((()=>{const e=Object.entries(x).find((e=>{let[t,n]=e;return"\u306f\u884c"===n}));return e?parseInt(e[0]):null}),[x]),S=(0,r.useMemo)((()=>{const e="tw-20v"===i?"left"===a?se:ae:"left"===a?ne:J,t=Object.entries(e).find((e=>{let[t,n]=e;return"\u201d \xb0 \u5c0f"===n}));return t?parseInt(t[0]):null}),[a,i]),[w,_]=(0,r.useState)(null),I=(0,r.useRef)(o),T=(0,r.useRef)(!0),E=(0,r.useRef)(t),[N,P]=(0,r.useState)(null),A=(0,r.useRef)(l),L=(0,r.useCallback)((()=>{d(!1),h.current=0,null!==b.current&&(clearTimeout(b.current),b.current=null)}),[]),K=(0,r.useCallback)((()=>{if(pe.length>0){const e=Math.floor(Math.random()*pe.length);_(pe[e]),P(pe[e].char),u("gyouInput"),L(),p(!1),v(null)}else _(null),P(null)}),[_,u,L,P]),M=(0,r.useCallback)((()=>{u("gyouInput"),L(),_(null),I.current=-1,T.current=!0,A.current=!1,P(null),p(!1),v(null)}),[L,u,_,P]);(0,r.useEffect)((()=>{if(!t&&E.current&&M(),t){const n=t&&!E.current,r=!l&&o!==I.current,a=!l&&A.current,i=l&&!A.current;if(n&&(T.current=!0),a||!l&&(T.current||r)){if(u("gyouInput"),L(),_(null),o>=0){var e;const t=null===(e=y["\u306f\u884c"])||void 0===e?void 0:e[o];P(null!==t&&void 0!==t?t:null)}else P(null);p(!1),v(null),I.current=o,T.current=!1}else a?(u("gyouInput"),L(),_(null),v(null),I.current=o,T.current=!1):l&&(i||T.current||!w)&&(K(),T.current=!1)}return E.current=t,A.current=l,t||null===g||(v(null),p(!1)),()=>{null!==b.current&&(clearTimeout(b.current),b.current=null)}}),[t,l,o,M,K,L,w,u,P,g]);const F=(0,r.useMemo)((()=>{var e;if(l)return null!==(e=null===w||void 0===w?void 0:w.danKey)&&void 0!==e?e:null;if(!t)return null;const n=m["\u306f\u884c"];return!n||o<0||o>=n.length?null:n[o]}),[t,l,w,o]),R=(0,r.useMemo)((()=>{if(!t)return[];const e=y["\u306f\u884c"];return e&&0!==e.length?l?w?[w.char]:[]:e:[]}),[t,l,w]),D=(0,r.useCallback)((e=>{if(!t||!F||null===k||null===S)return{isExpected:!1,shouldGoToNext:void 0};if("release"!==e.type)return{isExpected:!1,shouldGoToNext:void 0};const n=e.pressCode;let r,a=!1,i=s;switch(s){case"gyouInput":n+1===k?(i="handakuonInput",h.current=0,a=!0,r=void 0,p(!1),v(null)):(a=!1,r=void 0,"gyouInput"===s&&v(2));break;case"handakuonInput":n+1===S?(0===h.current?(h.current=1,d(!0),null!==b.current&&clearTimeout(b.current),b.current=window.setTimeout((()=>{d(!1),b.current=null}),300),a=!0,r=void 0):1===h.current&&(h.current=0,d(!1),null!==b.current&&(clearTimeout(b.current),b.current=null),i="danInput",a=!0,r=void 0),p(!1),v(null)):(a=!1,r=void 0,"handakuonInput"===s&&v(2));break;case"danInput":const e=Object.entries(C).filter((e=>{let[t,n]=e;return n===F})).map((e=>{let[t,n]=e;return parseInt(t)}));i="gyouInput",L(),e.includes(n+1)?(a=!0,console.log("[HandakuonPractice handleInput DAN_INPUT_CORRECT] isExpected: ".concat(a,", dIdx: ").concat(o,", currentDan: ").concat(F)),v(null),p(!1),l?(v(null),p(!1),K(),r=!1):r=o>=y["\u306f\u884c"].length-1,console.log("[HandakuonPractice handleInput DAN_INPUT_CORRECT] shouldGoToNext_final: ".concat(r))):(a=!1,console.log("[HandakuonPractice handleInput DAN_INPUT_INCORRECT] isExpected: ".concat(a)),p(!0),v(3),r=void 0)}return a?(v(null),"danInput"===s&&p(!1),"danInput"===s&&"gyouInput"===i&&L(),i!==s&&(console.log("[HandakuonPractice handleInput] Setting stage from ".concat(s," to ").concat(i)),u(i))):("gyouInput"===s||"handakuonInput"===s?v(2):"danInput"===s&&(v(3),i="gyouInput"),"danInput"===s?(u("gyouInput"),L()):"gyouInput"!==s&&(u("gyouInput"),L(),console.log("[HandakuonPractice handleInput] Incorrect input, stage was ".concat(s,", resetting to gyouInput")))),console.log("[HandakuonPractice handleInput END] Returning: isExpected=".concat(a,", shouldGoToNext=").concat(r,", nextStageToSet=").concat(i,", currentStageAfterSet=").concat(s)),{isExpected:a,shouldGoToNext:r}}),[t,s,F,k,S,C,L,l,K,u,o,d,g,p]),O=(0,r.useCallback)(((e,n,r)=>{const a={className:null,overrideKey:null};if(!t||!F)return a;const i=l||o===I.current?s:"gyouInput";if(null!==g&&n!==g)return a;let u=null,d=null;switch(i){case"gyouInput":u="\u306f\u884c",d=2;break;case"handakuonInput":u="\u201d \xb0 \u5c0f",d=2;break;case"danInput":u=F,d=3}return null!==u&&n===d&&e===u?"handakuonInput"===i&&c?a:{className:"bg-blue-100",overrideKey:null}:a}),[t,F,s,c,l,o,g]),j=(0,r.useCallback)(((e,n,r,o)=>!!t&&(null!==g&&n===g&&r===e)),[t,g]),H=(0,r.useCallback)((()=>{console.log("[HandakuonPractice clearErrorState] CALLED. Current errorHighlightLayer BEFORE: ".concat(g)),v(null),p(!1),console.log("[HandakuonPractice clearErrorState] FINISHED. Current errorHighlightLayer AFTER: null (expected)")}),[v,p]);return(0,r.useMemo)((()=>{let e,t=g,n=[2,3];return"gyouInput"===s?(e=2,null!==g&&(n=Array.from(new Set([2,g])))):"handakuonInput"===s?(e=2,n=[2,3],null!==g&&(n=Array.from(new Set([2,3,g])))):"danInput"===s&&(e=3,n=[2,3],null!==g&&(n=Array.from(new Set([2,3,g])))),(null===g||[2,3].includes(g))&&(n=[2,3]),null!==t?console.log("[HandakuonPractice RETURN ERROR STATE] targetLayerIndex: ".concat(e,", targetLayerIndices: ").concat(JSON.stringify(n),", errorHighlightLayer: ").concat(t)):"gyouInput"===s?console.log("[HandakuonPractice RETURN GYOU INPUT] targetLayerIndex: ".concat(e,", targetLayerIndices: ").concat(JSON.stringify(n),", errorHighlightLayer: null")):"danInput"===s?console.log("[HandakuonPractice RETURN DAN INPUT (NO ERROR)] targetLayerIndex: ".concat(e,", targetLayerIndices: ").concat(JSON.stringify(n),", errorHighlightLayer: null")):console.log("[HandakuonPractice RETURN OTHER STAGE: ".concat(s,"] targetLayerIndex: ").concat(e,", targetLayerIndices: ").concat(JSON.stringify(n),", errorHighlightLayer: null")),{stage:s,targetChar:null!==N&&void 0!==N?N:void 0,headingChars:R,handleInput:D,reset:M,targetLayerIndex:e,targetLayerIndices:n,errorHighlightLayer:t,getHighlightClassName:O,isInvalidInputTarget:j,clearErrorState:H,typedChar:"",status:"running"}}),[s,N,R,D,M,g,O,j,H])}(q(q({},B),{},{isActive:"\u534a\u6fc1\u97f3\u306e\u57fa\u672c\u7df4\u7fd2"===l})),$=function(e){let{gIdx:t,dIdx:n,isActive:o,side:a,kb:i,isRandomMode:l}=e;const[s,u]=(0,r.useState)("gyouInput"),[c,d]=(0,r.useState)(null),{hid2Gyou:h,hid2Dan:f}=(0,r.useMemo)((()=>"tw-20v"===i?"left"===a?{hid2Gyou:se,hid2Dan:ue}:{hid2Gyou:ae,hid2Dan:ie}:"left"===a?{hid2Gyou:ne,hid2Dan:oe}:{hid2Gyou:J,hid2Dan:te}),[a,i]),p=(0,r.useMemo)((()=>{const e="tw-20v"===i?"left"===a?se:ae:"left"===a?ne:J,t=Object.entries(e).find((e=>{let[t,n]=e;return"\u3063"===n}));return t?parseInt(t[0]):null}),[i,a]),g=(0,r.useMemo)((()=>{const e="tw-20v"===i?"left"===a?se:ae:"left"===a?ne:J,t=Object.entries(e).find((e=>{let[t,n]=e;return"\u201d \xb0 \u5c0f"===n}));return t?parseInt(t[0]):null}),[i,a]),[y,m]=(0,r.useState)(null),b=(0,r.useRef)(t),x=(0,r.useRef)(n),C=(0,r.useRef)(!0),k=(0,r.useRef)(o),S=(0,r.useRef)(l),w=(0,r.useMemo)((()=>!l&&o&&t>=0&&t<v.length?v[t]:null),[t,o,l]),_=(0,r.useMemo)((()=>{if(l)return y;if(!w||n<0||n>=w.inputs.length)return null;const e=w.inputs[n];return e?{type:"sokuonKomoji",char:e.char,isTsu:e.isTsu,gyouKey:e.gyouKey,middleKey:e.middleKey,danKey:e.danKey}:null}),[w,n,l,y]);(0,r.useEffect)((()=>{if(o&&_){const e=_.isTsu?"tsuInput":"gyouInput";u(e)}}),[o,_]);const I=(0,r.useCallback)((()=>{if(ge.length>0){const e=Math.floor(Math.random()*ge.length),t=ge[e];m(t)}else m(null)}),[m]),T=(0,r.useCallback)((()=>{m(null),b.current=-1,x.current=-1,C.current=!0,S.current=!1,d(null)}),[m]);(0,r.useEffect)((()=>{if(!o&&k.current&&T(),o){o&&!k.current&&(C.current=!0);const e=t!==b.current||n!==x.current,r=l&&!S.current;!l&&S.current||!l&&(C.current||e)?(d(null),m(null),b.current=t,x.current=n,C.current=!1):l&&(r||C.current||!y)&&(I(),d(null),C.current=!1,b.current=t,x.current=n)}k.current=o,S.current=l}),[o,l,t,n,y,T,I,d]);const E=(0,r.useMemo)((()=>{var e;return null!==(e=null===_||void 0===_?void 0:_.char)&&void 0!==e?e:null}),[_]),N=(0,r.useMemo)((()=>!(null===_||void 0===_||!_.middleKey)),[_]),P=(0,r.useMemo)((()=>{return o?l?E?[E]:[]:null!==(e=null===w||void 0===w?void 0:w.chars)&&void 0!==e?e:[]:[];var e}),[o,l,E,w]),A=(0,r.useMemo)((()=>{var e;return null!==(e=null===_||void 0===_?void 0:_.gyouKey)&&void 0!==e?e:null}),[_]),L=(0,r.useMemo)((()=>{var e;return null!==(e=null===_||void 0===_?void 0:_.danKey)&&void 0!==e?e:null}),[_]),K=(0,r.useCallback)((e=>{if(!o||!_)return d(null),{isExpected:!1,shouldGoToNext:void 0,errorLayer:null};if(_.isTsu&&null===p)return console.error("Sokuon/Komoji Input Error: tsuKeyCode is null for '\u3063'."),d(null),{isExpected:!1,shouldGoToNext:void 0,errorLayer:null};if(N&&null===g)return console.error("Sokuon/Komoji Input Error: dakuonKeyCode is null when middleKey is required."),d(null),{isExpected:!1,shouldGoToNext:void 0,errorLayer:null};if("release"!==e.type)return{isExpected:!1,shouldGoToNext:void 0,errorLayer:c};let r,a=!1,i=s,y=null;if("tsuInput"===s)if(e.pressCode+1===p)if(a=!0,d(null),l)I(),r=!1;else{const e=v[t];r=!!e&&n===e.inputs.length-1}else a=!1,d(2),y=2;else if("gyouInput"===s){if(!A)return d(null),{isExpected:!1,shouldGoToNext:void 0,errorLayer:null};Object.entries(h).filter((e=>{let[t,n]=e;return n===A})).map((e=>{let[t,n]=e;return parseInt(t)})).includes(e.pressCode+1)?(a=!0,d(null),i=N?"middleInput":"danInput"):(a=!1,d(2),y=2)}else if("middleInput"===s)e.pressCode+1===g?(a=!0,d(null),i="danInput"):(a=!1,d(2),y=2,i="gyouInput");else if("danInput"===s){if(!L)return d(null),{isExpected:!1,shouldGoToNext:void 0,errorLayer:null};if(Object.entries(f).filter((e=>{let[t,n]=e;return n===L})).map((e=>{let[t,n]=e;return parseInt(t)})).includes(e.pressCode+1))if(a=!0,d(null),l)I(),r=!1;else{const e=v[t];r=!!e&&n===e.inputs.length-1}else a=!1,d(3),y=3,i="gyouInput"}return a&&i!==s||!a&&i!==s&&("middleInput"===s||"danInput"===s)?u(i):a||"tsuInput"===s||"gyouInput"===s||u("gyouInput"),{isExpected:a,shouldGoToNext:r,errorLayer:y}}),[o,s,A,L,_,p,g,h,f,l,I,d,u,N,t,n]),M=(0,r.useCallback)(((e,t)=>{const n={className:null,overrideKey:null};if(!o||!_)return n;if(c===t)return n;let r=null,a=null;return"tsuInput"===s?(r="\u3063",a=2):"gyouInput"===s?(r=A,a=2):"middleInput"===s?(r="\u201d \xb0 \u5c0f",a=2):"danInput"===s&&(r=L,a=3),null!==r&&t===a&&e===r?{className:"bg-blue-100",overrideKey:null}:n}),[o,s,A,L,_,c]),F=(0,r.useCallback)(((e,t,n)=>!!o&&c===t&&n===e),[o,c]),R=(0,r.useCallback)((()=>{d(null)}),[d]);return{headingChars:P,handleInput:K,getHighlightClassName:M,reset:T,isInvalidInputTarget:F,targetChar:null!==E&&void 0!==E?E:void 0,errorHighlightLayer:c,clearErrorState:R,targetLayerIndices:(0,r.useMemo)((()=>{let e=[2,3];if(null!==c){const t=new Set([2,3]);t.add(c),e=Array.from(t)}return e}),[c]),stage:s}}(q(q({},B),{},{isActive:"\u5c0f\u6587\u5b57\u306e\u57fa\u672c\u7df4\u7fd2"===l})),Q=Ee(q(q({},B),{},{isActive:"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff11"===l})),X=Ne(q(q({},B),{},{isActive:"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff12"===l})),Z=Pe(q(q({},B),{},{isActive:"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13"===l})),ee=Ae(q(q({},B),{},{isActive:"\u62d7\u6fc1\u97f3\u306e\u7df4\u7fd2"===l})),re=Ke(q(q({},B),{},{practice:l,isActive:"\u62d7\u534a\u6fc1\u97f3\u306e\u7df4\u7fd2"===l})),le=Me(q(q({},B),{},{isActive:"\u62d7\u97f3\u62e1\u5f35\uff11"===l})),ce=Fe(q(q({},B),{},{isActive:"\u62d7\u97f3\u62e1\u5f35\uff12"===l})),de=De(q(q({},B),{},{isActive:"\u304b\u306a\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===l})),ye=je(q(q({},B),{},{isActive:"\u8a18\u53f7\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===l})),me=We(q(q({},B),{},{isActive:"\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===l})),ve=Ye(q(q({},B),{},{isActive:"\u82f1\u5b57\u306e\u57fa\u672c\u7df4\u7fd2"===l})),be=Qe(q(q({},U),{},{isActive:"\u6570\u5b57\u306e\u57fa\u672c\u7df4\u7fd2"===l})),xe=Xe(q(q({},B),{},{isActive:"Caps Lock\u64cd\u4f5c"===l})),Ce=Ze(q(q({},B),{},{isActive:"\u5927\u6587\u5b57\u5909\u63db\u64cd\u4f5c"===l})),ke=it(q(q({},B),{},{isActive:"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===l,practiceName:"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"})),Se=ct(q(q({},B),{},{isActive:"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===l,practiceName:"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"})),we=dt(q(q({},B),{},{isActive:"\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff11"===l})),_e=ht(q(q({},B),{},{isActive:"\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff12"===l})),Ie=ft(q(q({},B),{},{isActive:"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13"===l||"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13_\u82f1\u6570"===l,practice:l})),Le=(0,r.useMemo)((()=>{switch(l){case"\u6e05\u97f3\u306e\u57fa\u672c\u7df4\u7fd2":return G;case"\u62d7\u97f3\u306e\u57fa\u672c\u7df4\u7fd2":return z;case"\u6fc1\u97f3\u306e\u57fa\u672c\u7df4\u7fd2":return W;case"\u534a\u6fc1\u97f3\u306e\u57fa\u672c\u7df4\u7fd2":return Y;case"\u5c0f\u6587\u5b57\u306e\u57fa\u672c\u7df4\u7fd2":return $;case"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff11":return Q;case"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff12":return X;case"\u62d7\u6fc1\u97f3\u306e\u7df4\u7fd2":return{headingChars:ee.headingChars,handleInput:ee.handleInput,getHighlightClassName:ee.getHighlightClassName,reset:ee.reset,isInvalidInputTarget:ee.isInvalidInputTarget,currentTarget:ee.currentTarget,errorHighlightLayer:ee.errorHighlightLayer,clearErrorState:ee.clearErrorState,targetLayerIndices:ee.targetLayerIndices,stage:ee.stage,status:ee.status,targetChar:ee.targetChar,targetLayerIndex:ee.targetLayerIndex};case"\u62d7\u534a\u6fc1\u97f3\u306e\u7df4\u7fd2":return{status:re.status,targetChar:re.targetChar,currentTarget:re.currentTarget,headingChars:re.headingChars,targetLayerIndex:re.targetLayerIndex,targetLayerIndices:re.targetLayerIndices,errorHighlightLayer:re.errorHighlightLayer,handleInput:re.handleInput,getHighlightClassName:re.getHighlightClassName,reset:re.reset,isInvalidInputTarget:re.isInvalidInputTarget,clearErrorState:re.clearErrorState,stage:re.stage,countdownValue:re.countdownValue,challengeResults:re.challengeResults,challengeTimer:re.challengeTimer,challengeTotalTime:re.challengeTotalTime,capitalizedCharIndices:re.capitalizedCharIndices,typedEndIndex:re.typedEndIndex};case"\u62d7\u97f3\u62e1\u5f35\uff11":return le;case"\u62d7\u97f3\u62e1\u5f35\uff12":return ce;case"\u304b\u306a\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0":return de;case"\u8a18\u53f7\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0":return ye;case"\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0":return me;case"\u82f1\u5b57\u306e\u57fa\u672c\u7df4\u7fd2":return ve;case"\u6570\u5b57\u306e\u57fa\u672c\u7df4\u7fd2":return be;case"Caps Lock\u64cd\u4f5c":return xe;case"\u5927\u6587\u5b57\u5909\u63db\u64cd\u4f5c":return Ce;case"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0":return ke;case"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0":return Se;case"\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff11":return we;case"\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff12":return _e;case"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13":case"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13_\u82f1\u6570":return Ie;default:return null}}),[l,w,I,$,Q,X,Z,ee,re,le,ce,Ie,de,ye,me,ve,be,xe,Ce,we,_e,ke,Se]);(0,r.useEffect)((()=>{"finished"===(null===Le||void 0===Le?void 0:Le.status)?j(!0):j(!1)}),[null===Le||void 0===Le?void 0:Le.status]);const Re=(0,r.useCallback)((e=>{S(e),_(0),N("\u62d7\u97f3\u62e1\u5f35\uff11"===e?1:0),A(!1),Le&&"function"===typeof Le.reset&&Le.reset(),j(!1)}),[Le,S,_,N,A,j]),Oe=(0,r.useCallback)((()=>{const e=!P;A(e),_(0),N(e||"\u62d7\u97f3\u62e1\u5f35\uff11"!==l?0:1)}),[P,l,A,_,N]),He=(0,r.useMemo)((()=>{var e;return null!==(e=null===Le||void 0===Le?void 0:Le.headingChars)&&void 0!==e?e:[]}),[null===Le||void 0===Le?void 0:Le.headingChars]),Ve=(0,r.useMemo)((()=>!["\u304b\u306a\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u8a18\u53f7\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","Caps Lock\u64cd\u4f5c","\u5927\u6587\u5b57\u5909\u63db\u64cd\u4f5c"].includes(l)),[l]);return(0,r.useMemo)((()=>{var e,t,n;return{practice:l,gIdx:w,dIdx:I,isRandomMode:P,activePractice:Le,headingChars:He,isChallengeFinished:O,handlePracticeSelect:Re,toggleRandomMode:Oe,setPractice:S,setGIdx:_,setDIdx:N,setIsRandomMode:A,nextStage:V,handleInput:null!==(e=null===Le||void 0===Le?void 0:Le.handleInput)&&void 0!==e?e:e=>({isExpected:!1,shouldGoToNext:!1}),isRandomModeAvailable:Ve,showChallengeKeys:L,toggleShowChallengeKeys:H,targetChar:null===Le||void 0===Le?void 0:Le.targetChar,status:null===Le||void 0===Le?void 0:Le.status,countdownValue:null===Le||void 0===Le?void 0:Le.countdownValue,challengeResults:null===Le||void 0===Le?void 0:Le.challengeResults,targetLayerIndex:null===Le||void 0===Le?void 0:Le.targetLayerIndex,targetLayerIndices:null===Le||void 0===Le?void 0:Le.targetLayerIndices,displayLayers:null===Le||void 0===Le?void 0:Le.displayLayers,getHighlightClassName:null!==(t=null===Le||void 0===Le?void 0:Le.getHighlightClassName)&&void 0!==t?t:()=>({className:null,overrideKey:null}),isInvalidInputTarget:null!==(n=null===Le||void 0===Le?void 0:Le.isInvalidInputTarget)&&void 0!==n?n:()=>!1,reset:null===Le||void 0===Le?void 0:Le.reset}}),[l,w,I,P,Le,He,O,Re,Oe,S,_,N,A,V,Ve,L,H])};var gt=n(579);const yt=["\u6e05\u97f3\u306e\u57fa\u672c\u7df4\u7fd2","\u62d7\u97f3\u306e\u57fa\u672c\u7df4\u7fd2","\u6fc1\u97f3\u306e\u57fa\u672c\u7df4\u7fd2","\u534a\u6fc1\u97f3\u306e\u57fa\u672c\u7df4\u7fd2","\u5c0f\u6587\u5b57\u306e\u57fa\u672c\u7df4\u7fd2","\u6570\u5b57\u306e\u57fa\u672c\u7df4\u7fd2"],mt=["\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff11","\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff12","\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13"],vt=["\u82f1\u5b57\u306e\u57fa\u672c\u7df4\u7fd2","Caps Lock\u64cd\u4f5c","\u5927\u6587\u5b57\u5909\u63db\u64cd\u4f5c","\u6570\u5b57\u306e\u57fa\u672c\u7df4\u7fd2"],bt=["\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff11","\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff12","\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13"],xt=["\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff11","\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff12"],Ct=["\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"],kt=["\u62d7\u6fc1\u97f3\u306e\u7df4\u7fd2","\u62d7\u534a\u6fc1\u97f3\u306e\u7df4\u7fd2","\u62d7\u97f3\u62e1\u5f35\uff11","\u62d7\u97f3\u62e1\u5f35\uff12"],St=["\u304b\u306a\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u8a18\u53f7\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"],wt=e=>{let{practice:t,handlePracticeSelect:n,isAlphaNumericMode:r=!1,isKanaStepUpOpen:o,setIsKanaStepUpOpen:a,isAlphaNumericSymbolStepUpOpen:i,setIsAlphaNumericSymbolStepUpOpen:l}=e;return(0,gt.jsx)("div",{className:"p-4 border-r border-gray-300 dark:border-gray-700 overflow-y-auto h-full",children:r?(0,gt.jsxs)(gt.Fragment,{children:[(0,gt.jsx)("h2",{className:"text-lg font-semibold mb-3 text-gray-700 dark:text-gray-200",children:"\u82f1\u6570\u5b57\u7df4\u7fd2"}),(0,gt.jsx)("ul",{className:"space-y-1",children:vt.map((e=>(0,gt.jsx)("li",{children:(0,gt.jsx)("button",{onClick:()=>n(e),className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors\n                                        ".concat(t===e?"bg-blue-500 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:e})},e)))}),(0,gt.jsx)("h2",{className:"text-lg font-semibold mt-6 mb-3 text-gray-700 dark:text-gray-200",children:"\u82f1\u6570\u8a18\u53f7\u7df4\u7fd2"}),(0,gt.jsx)("ul",{className:"space-y-1",children:bt.map((e=>(0,gt.jsx)("li",{children:(0,gt.jsx)("button",{onClick:()=>{const t="\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13"===e?"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13_\u82f1\u6570":e;console.log('[PracticeMenu onClick] Attempting to select mode: "'.concat(t,'" for item: "').concat(e,'"')),n(t)},className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors\n                                        ".concat(t===("\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13"===e?"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13_\u82f1\u6570":e)?"bg-blue-500 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:e})},"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13"===e?"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13_\u82f1\u6570":e)))}),(0,gt.jsxs)("div",{className:"mt-6",children:[(0,gt.jsxs)("button",{onClick:()=>l(!i),className:"w-full flex justify-between items-center text-lg font-semibold mb-3 text-gray-700 dark:text-gray-200 focus:outline-none",children:["\u82f1\u6570\u8a18\u53f7\u30b9\u30c6\u30c3\u30d7\u30a2\u30c3\u30d7",(0,gt.jsx)("span",{children:i?"\u25b2":"\u25bc"})]}),i&&(0,gt.jsx)("ul",{className:"space-y-1",children:xt.map((e=>(0,gt.jsx)("li",{children:(0,gt.jsx)("button",{onClick:()=>n(e),className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors\n                                                ".concat(t===e?"bg-blue-500 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:e})},e)))})]}),(0,gt.jsx)("h2",{className:"text-lg font-semibold mt-6 mb-3 text-gray-700 dark:text-gray-200",children:"\u82f1\u6570\u30c1\u30e3\u30ec\u30f3\u30b8"}),(0,gt.jsx)("ul",{className:"space-y-1",children:Ct.map((e=>(0,gt.jsx)("li",{children:(0,gt.jsx)("button",{onClick:()=>n(e),className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors\n                                        ".concat(t===e?"bg-blue-500 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:e})},e)))})]}):(0,gt.jsxs)(gt.Fragment,{children:[(0,gt.jsx)("h2",{className:"text-lg font-semibold mb-3 text-gray-700 dark:text-gray-200",children:"\u304b\u306a\u6570\u5b57\u7df4\u7fd2"}),(0,gt.jsx)("ul",{className:"space-y-1",children:yt.map((e=>(0,gt.jsx)("li",{children:(0,gt.jsx)("button",{onClick:()=>n(e),className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors\n                                        // \u30a2\u30af\u30c6\u30a3\u30d6\u72b6\u614b\u306e\u5224\u5b9a\u3082 item \u3092\u305d\u306e\u307e\u307e\u4f7f\u7528\n                                        ".concat(t===e?"bg-blue-500 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:e})},e)))}),(0,gt.jsx)("h2",{className:"text-lg font-semibold mt-6 mb-3 text-gray-700 dark:text-gray-200",children:"\u304b\u306a\u8a18\u53f7\u7df4\u7fd2"}),(0,gt.jsx)("ul",{className:"space-y-1",children:mt.map((e=>(0,gt.jsx)("li",{children:(0,gt.jsx)("button",{onClick:()=>n(e),className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors\n                                        ".concat(t===e?"bg-blue-500 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:e})},e)))}),(0,gt.jsxs)("div",{className:"mt-6",children:[(0,gt.jsxs)("button",{onClick:()=>a(!o),className:"w-full flex justify-between items-center text-lg font-semibold mb-3 text-gray-700 dark:text-gray-200 focus:outline-none",children:["\u304b\u306a\u30b9\u30c6\u30c3\u30d7\u30a2\u30c3\u30d7",(0,gt.jsx)("span",{children:o?"\u25b2":"\u25bc"})]}),o&&(0,gt.jsx)("ul",{className:"space-y-1",children:kt.map((e=>(0,gt.jsx)("li",{children:(0,gt.jsx)("button",{onClick:()=>n(e),className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors\n                                                ".concat(t===e?"bg-blue-500 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:e})},e)))})]}),(0,gt.jsx)("h2",{className:"text-lg font-semibold mt-6 mb-3 text-gray-700 dark:text-gray-200",children:"\u304b\u306a\u30c1\u30e3\u30ec\u30f3\u30b8"}),(0,gt.jsx)("ul",{className:"space-y-1",children:St.map((e=>(0,gt.jsx)("li",{children:(0,gt.jsx)("button",{onClick:()=>n(e),className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors\n                                        ".concat(t===e?"bg-blue-500 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:e})},e)))})]})})},_t=e=>{let{practice:t,headingChars:n,gIdx:o,dIdx:a,isRandomMode:i=!1,isFinished:l=!1,typedEndIndex:s=0,status:u="idle",currentTargetCharForHighlight:c,activePractice:d,typedChar:h}=e;console.log("[PracticeHeading RENDER] Received propsHeadingChars:",n,"practice: ".concat(t,", isRandomMode: ").concat(i));const f="\u62d7\u97f3\u62e1\u5f35\uff12"===t,p=(0,r.useMemo)((()=>("\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t||"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t)&&n.length>0&&"string"===typeof n[0]?n[0]:null),[t,n]),g=(0,r.useMemo)((()=>("\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t||"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t)&&null!==s&&void 0!==s?s:0),[t,s]),y=(0,r.useMemo)((()=>{if(i&&("\u62d7\u97f3\u306e\u57fa\u672c\u7df4\u7fd2"===t||"\u62d7\u6fc1\u97f3\u306e\u7df4\u7fd2"===t||"\u62d7\u534a\u6fc1\u97f3\u306e\u7df4\u7fd2"===t)){if(null!==d&&void 0!==d&&d.targetChar&&"string"===typeof d.targetChar&&2===d.targetChar.length)return d.targetChar;if(null!==d&&void 0!==d&&d.currentTarget&&"object"===typeof d.currentTarget&&null!==d.currentTarget&&"char"in d.currentTarget){const e=d.currentTarget;if("string"===typeof e.char&&2===e.char.length)return e.char}return null}if(("\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t||"\u304b\u306a\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t||"\u8a18\u53f7\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t)&&null!==d&&void 0!==d&&d.headingChars&&d.headingChars.length>0&&"string"===typeof d.headingChars[0])return d.headingChars[0];if(("\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t||"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t)&&p)return p[g];if("\u62d7\u97f3\u62e1\u5f35\uff12"===t&&c)return c;let e;if(null!==d&&void 0!==d&&d.currentTarget)if("string"===typeof d.currentTarget)e=d.currentTarget;else if("object"===typeof d.currentTarget&&null!==d.currentTarget&&"char"in d.currentTarget){const t=d.currentTarget;"string"===typeof t.char&&(e=t.char)}if(void 0===e&&null!==d&&void 0!==d&&d.targetChar)if("string"===typeof d.targetChar)e=d.targetChar;else if("object"===typeof d.targetChar&&null!==d.targetChar&&"char"in d.targetChar){const t=d.targetChar;"string"===typeof t.char&&(e=t.char)}return void 0!==e&&null!==e||(e=h),e}),[t,d,h,p,g,c,i]),m=(0,r.useMemo)((()=>{var e;return null!==(e=null===d||void 0===d?void 0:d.capitalizedCharIndices)&&void 0!==e?e:new Set}),[null===d||void 0===d?void 0:d.capitalizedCharIndices]),v=(0,r.useMemo)((()=>"\u62d7\u97f3\u62e1\u5f35\uff12"===t&&F[o]?new Set(F[o].targets.map((e=>e.char))):new Set),[t,o]),b=(0,r.useMemo)((()=>{const e=new Set;return R.forEach((t=>t.chars.forEach((t=>e.add(t))))),Array.from(e)}),[]),x=(0,r.useMemo)((()=>{if(console.log("[PracticeHeading displayItems CALC START] practice: ".concat(t,", isRandomMode: ").concat(i,", propsHeadingChars:"),n),l&&"\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"!==t&&"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"!==t)return["\u7d42\u4e86\uff01"];const e=e=>{return Array.isArray(e)&&e.length>0&&("object"===typeof(t=e[0])&&null!==t&&"char"in t&&"string"===typeof t.char);var t};let r,o;if(i){if("\u62d7\u97f3\u62e1\u5f35\uff11"===t)return null!==d&&void 0!==d&&d.targetChar&&"string"===typeof d.targetChar?[d.targetChar]:(console.warn("[PracticeHeading] displayItems: Missing/invalid targetChar for \u62d7\u97f3\u62e1\u5f35\uff11 (Random)."),["?"]);if("\u62d7\u97f3\u62e1\u5f35\uff12"===t){if(null!==d&&void 0!==d&&d.targetChar&&"string"===typeof d.targetChar){const e=d.targetChar,t=d.stage;return e.split("").map(((n,r)=>{let o=!1;return("key1"===t&&0===r||"key2"===t&&1===r||"key2"===t&&1===e.length&&0===r||"key3"===t&&2===r||"key3"===t&&1===e.length&&0===r||"key3"===t&&2===e.length&&1===r)&&(o=!0),{char:n,isPracticeTarget:o}}))}console.warn("[PracticeHeading] displayItems: Missing/invalid targetChar for \u62d7\u97f3\u62e1\u5f35\uff12 (Random).");return(e(n)&&n.length>0?n[0].char:Array.isArray(n)&&n.length>0&&"string"===typeof n[0]?n[0]:"").split("").map((e=>({char:e,isPracticeTarget:!1})))}if("\u62d7\u534a\u6fc1\u97f3\u306e\u7df4\u7fd2"===t)return null!==d&&void 0!==d&&d.targetChar&&"string"===typeof d.targetChar?[d.targetChar]:(console.warn("[PracticeHeading] displayItems: Missing/invalid targetChar for \u62d7\u534a\u6fc1\u97f3\u306e\u7df4\u7fd2 (Random)."),e(n)&&n.length>0?[n[0].char]:Array.isArray(n)&&n.length>0&&"string"===typeof n[0]?[n[0]]:["?"]);if("\u62d7\u97f3\u306e\u57fa\u672c\u7df4\u7fd2"===t||"\u62d7\u6fc1\u97f3\u306e\u7df4\u7fd2"===t){if(null!==d&&void 0!==d&&d.targetChar&&"string"===typeof d.targetChar&&2===d.targetChar.length)return d.targetChar.split("");console.warn("[PracticeHeading] displayItems: Missing/invalid targetChar for ".concat(t," (Random)."));const r=e(n)&&n.length>0?n[0].char:Array.isArray(n)&&n.length>0&&"string"===typeof n[0]?n[0]:"??";return 2===r.length?r.split(""):[r[0]||"?",r[1]||"?"]}return"\u82f1\u5b57\u306e\u57fa\u672c\u7df4\u7fd2"===t?null!==d&&void 0!==d&&d.headingChars&&d.headingChars.length>0&&"string"===typeof d.headingChars[0]?d.headingChars:(console.warn("[PracticeHeading] displayItems: Missing/invalid headingChars for \u82f1\u5b57\u306e\u57fa\u672c\u7df4\u7fd2 (Random)."),["?"]):"\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff11"===t?null!==d&&void 0!==d&&d.targetChar&&"string"===typeof d.targetChar?[{char:d.targetChar,isPracticeTarget:!0}]:(console.warn("[PracticeHeading] displayItems: Missing targetChar for \u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff11 (Random ON). Displaying fallback."),[{char:"?",isPracticeTarget:!0}]):("Caps Lock\u64cd\u4f5c"===t||"\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t||"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t)&&Array.isArray(n)&&n.length>0&&"string"===typeof n[0]?n[0].split(""):(r=n,console.log("[PracticeHeading displayItems CALC] Random mode, default. Result:",r),r)}if(("\u62d7\u97f3\u62e1\u5f35\uff11"===t||"\u62d7\u97f3\u62e1\u5f35\uff12"===t||"\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff11"===t)&&null!==d&&void 0!==d&&d.headingChars&&e(d.headingChars))return d.headingChars;if("\u62d7\u97f3\u62e1\u5f35\uff11"===t&&Array.isArray(n)&&n.length>0&&"string"===typeof n[0])return r=n.flatMap((e=>e.split(""))),console.log("[PracticeHeading displayItems CALC] \u62d7\u97f3\u62e1\u5f35\uff11 normal. Result:",r),r;switch(o=e(n)?n.map((e=>e.char)):Array.isArray(n)?n.filter((e=>"string"===typeof e)):[],console.log("[PracticeHeading displayItems CALC] stringArray for switch:",o),t){case"\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0":case"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0":return o.length>0&&"string"===typeof o[0]?o[0].split(""):[];case"\u62d7\u97f3\u306e\u57fa\u672c\u7df4\u7fd2":case"\u62d7\u6fc1\u97f3\u306e\u7df4\u7fd2":case"\u62d7\u534a\u6fc1\u97f3\u306e\u7df4\u7fd2":return o.flatMap((e=>"string"===typeof e?e.split(""):[]));case"\u6e05\u97f3\u306e\u57fa\u672c\u7df4\u7fd2":case"\u6fc1\u97f3\u306e\u57fa\u672c\u7df4\u7fd2":case"\u534a\u6fc1\u97f3\u306e\u57fa\u672c\u7df4\u7fd2":case"\u5c0f\u6587\u5b57\u306e\u57fa\u672c\u7df4\u7fd2":case"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff11":case"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff12":case"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13":case"\u6570\u5b57\u306e\u57fa\u672c\u7df4\u7fd2":case"\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff11":case"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13_\u82f1\u6570":case"\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff12":case"\u82f1\u5b57\u306e\u57fa\u672c\u7df4\u7fd2":case"\u5927\u6587\u5b57\u5909\u63db\u64cd\u4f5c":return o;case"\u62d7\u97f3\u62e1\u5f35\uff12":return r=o.map(((e,t)=>({char:e,isPracticeTarget:t===a}))),console.log("[PracticeHeading displayItems CALC] \u62d7\u97f3\u62e1\u5f35\uff12 fallback. Result:",r),r;case"Caps Lock\u64cd\u4f5c":return o&&o.length>0&&"string"===typeof o[0]?(r=o[0].split(""),console.log("[PracticeHeading displayItems CALC] Caps Lock\u64cd\u4f5c. Result:",r),r):(r=[],console.log("[PracticeHeading displayItems CALC] Caps Lock\u64cd\u4f5c (empty). Result:",r),r);default:return o&&o.length>0&&"string"===typeof o[0]?(console.log("[PracticeHeading displayItems CALC] Default. stringArray:",o),o):(r=[],console.log("[PracticeHeading displayItems CALC] Default (empty). Result:",r),r)}}),[t,n,o,a,l,s,d,i,b]);(0,r.useEffect)((()=>{}),[x,t,null===d||void 0===d?void 0:d.headingChars]);const C=(0,r.useCallback)(((e,n,r)=>{var c;const h=null!==(c=null===d||void 0===d?void 0:d.status)&&void 0!==c?c:u;if("countdown"===h||l)return"";if("\u304b\u306a\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t)return"text-blue-500 font-bold";if("\u62d7\u534a\u6fc1\u97f3\u306e\u7df4\u7fd2"===t&&i)return"finished"!==h&&r&&e===r?"text-blue-500 font-bold":"text-gray-700 dark:text-gray-300";if(i&&("\u62d7\u97f3\u306e\u57fa\u672c\u7df4\u7fd2"===t||"\u62d7\u6fc1\u97f3\u306e\u7df4\u7fd2"===t)){if("finished"!==h&&r&&2===r.length){const t=r[0],o=r[1];if(0===n&&e===t)return"text-blue-500 font-bold";if(1===n&&e===o)return"text-blue-500 font-bold"}return"text-gray-700 dark:text-gray-300"}if("\u8a18\u53f7\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t)return"text-blue-500 font-bold";if("\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t)return"text-blue-500 font-bold";if("\u82f1\u5b57\u306e\u57fa\u672c\u7df4\u7fd2"===t){if(i){if(e===r&&"finished"!==h)return"text-blue-500 font-bold"}else{if(n===a&&"finished"!==h)return"text-blue-400 font-bold"}return"text-gray-700 dark:text-gray-300"}if("\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff11"===t){const e=x[n];return null!==e&&void 0!==e&&e.isPracticeTarget&&"finished"!==h?"text-blue-500 font-bold":"text-gray-700 dark:text-gray-300"}if("Caps Lock\u64cd\u4f5c"===t){const t="string"===typeof(null===d||void 0===d?void 0:d.targetChar)?d.targetChar:"object"===typeof(null===d||void 0===d?void 0:d.targetChar)&&d.targetChar&&"char"in d.targetChar?d.targetChar.char:"";return n===a&&t&&e.toLowerCase()===t.toLowerCase()&&"finished"!==h?"text-blue-400 font-bold":"text-gray-700 dark:text-gray-300"}if("\u5927\u6587\u5b57\u5909\u63db\u64cd\u4f5c"===t&&("incorrect"!==h||n!==a))return"text-gray-700 dark:text-gray-300";if("\u62d7\u97f3\u62e1\u5f35\uff11"===t){if(i)return e===r&&"finished"!==h?"text-blue-500 font-bold":"text-gray-700 dark:text-gray-300";{const e=x[n];return null!==e&&void 0!==e&&e.isPracticeTarget?"text-blue-500 font-bold":null!==e&&void 0!==e&&e.isValidInGroup?"":"text-gray-400"}}if(f){const e=x[n];if(null!==e&&void 0!==e&&e.isPracticeTarget)return"text-blue-500 font-bold";if(i)return"";{var p;const t=F[o];return null!==t&&void 0!==t&&null!==(p=t.targets)&&void 0!==p&&p.some((t=>t.char===e.char))?"":"text-gray-400"}}if("\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t||"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t){if(void 0===s||null===s)return"text-gray-700 dark:text-gray-300";if(d&&"errorCharIndex"in d&&d.errorCharIndex===n)return"text-red-500 dark:text-red-400 bg-red-200 dark:bg-red-700 px-1 rounded";const r=["\u304d","\u3057","\u3061","\u306b","\u3072","\u307f","\u308a","\u304e","\u3058","\u3062","\u3073","\u3074"],o=["\u3083","\u3085","\u3087","\u3041","\u3043","\u3045","\u3047","\u3049"],a=n===s+1&&s>=0&&void 0!==x[s]&&r.includes(x[s])&&o.includes(x[n]);return n<s?"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t&&" "===e?"text-gray-400 bg-slate-100 dark:bg-slate-700 rounded":"text-gray-400":n===s||a?"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t&&" "===e?"bg-sky-200 dark:bg-sky-700 rounded":"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t&&m.has(n)&&d&&"correctionStage"in d&&"waitingForCorrectionKey"===d.correctionStage?"text-orange-500 font-bold":"text-blue-500 font-bold":"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t&&" "===e?"text-gray-700 dark:text-gray-300 bg-slate-100 dark:bg-slate-700 rounded":"text-gray-700 dark:text-gray-300"}if(!i&&("\u62d7\u97f3\u306e\u57fa\u672c\u7df4\u7fd2"===t||"\u62d7\u6fc1\u97f3\u306e\u7df4\u7fd2"===t||"\u62d7\u534a\u6fc1\u97f3\u306e\u7df4\u7fd2"===t)){const e=2*a;return n===e||n===e+1?"text-blue-500 font-bold":"text-gray-700 dark:text-gray-300"}let g="text-gray-700 dark:text-gray-300",y="",v=!1;if("\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13"===t?(","===r&&"\u3002"===e||"."===r&&"\u3001"===e||"string"===typeof r&&e===r)&&(v=!0):void 0!==r&&null!==r&&"string"===typeof r&&e===r&&(v=!0),v){g="text-blue-400 font-bold";i&&"waiting"===h&&!("\u62d7\u97f3\u306e\u57fa\u672c\u7df4\u7fd2"===t||"\u62d7\u6fc1\u97f3\u306e\u7df4\u7fd2"===t||"\u62d7\u534a\u6fc1\u97f3\u306e\u7df4\u7fd2"===t)&&"\u6570\u5b57\u306e\u57fa\u672c\u7df4\u7fd2"!==t&&(y=" animate-pulse")}else if("correct"===h){let n=!1;"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13"===t?(","===r&&"\u3002"===e||"."===r&&"\u3001"===e||"string"===typeof r&&e===r)&&(n=!0):void 0!==r&&null!==r&&"string"===typeof r&&e===r&&(n=!0),n&&(g="text-green-500 font-bold")}return"".concat(g).concat(y)}),[t,i,d,h,m,u,l,a,s,x,f,y,n,v,b,o]),k="\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t||"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t;return(0,gt.jsxs)("div",{className:"mb-4 flex items-center text-4xl ".concat(l?"font-bold justify-center":k?"font-semibold justify-start":"font-bold justify-center"),children:[" ",x.map(((e,n)=>{const r="string"===typeof e?e:e.char;let o="";if("\u62d7\u97f3\u62e1\u5f35\uff11"===t||f||"\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff11"===t)o=C(r,n,y);else{let e="";"\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t||"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t?(void 0!==s&&n<s&&(e=" typed-char"),n!==s||l||"countdown"===(null===d||void 0===d?void 0:d.status)||"idle"===(null===d||void 0===d?void 0:d.status)||(e=" current-char")):i&&"countdown"!==(null===d||void 0===d?void 0:d.status)&&"idle"!==(null===d||void 0===d?void 0:d.status)&&!l?"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13"===t||"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff11"===t||"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff12"===t||n===a&&(e=" current-char"):n!==a||"countdown"===(null===d||void 0===d?void 0:d.status)||"idle"===(null===d||void 0===d?void 0:d.status)||l?n<a&&"countdown"!==(null===d||void 0===d?void 0:d.status)&&"idle"!==(null===d||void 0===d?void 0:d.status)&&!l&&(e=" typed-char"):e=" current-char",o="".concat(e," ").concat(C(r,n,y))}const u="\u62d7\u97f3\u306e\u57fa\u672c\u7df4\u7fd2"===t||"\u62d7\u6fc1\u97f3\u306e\u7df4\u7fd2"===t||"\u62d7\u534a\u6fc1\u97f3\u306e\u7df4\u7fd2"===t||"\u62d7\u97f3\u62e1\u5f35\uff11"===t||"\u304b\u306a\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t;let c="",h="";if(k)"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t?" "===r?c="mx-0.5":h="px-0":h=0===n?"pl-1":n===x.length-1?"pr-1":"px-0";else if(u||f||"\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff11"===t){if(1===x.length)h="px-1";else if(f)h=i?"px-0":"px-0.5";else if("\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff11"===t&&i)h="px-0.5";else{n%2===0?h="pl-1":n%2!==0&&(h="pr-1")}}if(k||u||f||"\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff11"===t||(h="px-1"),"\u5927\u6587\u5b57\u5909\u63db\u64cd\u4f5c"===t&&n===a&&null!==d&&void 0!==d&&d.targetChar){const e=r.split("-"),t="string"===typeof(null===d||void 0===d?void 0:d.targetChar)?d.targetChar:"object"===typeof(null===d||void 0===d?void 0:d.targetChar)&&d.targetChar&&"char"in d.targetChar?d.targetChar.char:"";if(2===e.length&&t)return(0,gt.jsxs)("span",{className:"".concat(h," ").concat(c," py-1 rounded transition-colors duration-150"),children:[(0,gt.jsx)("span",{className:"".concat(e[0]===t?"text-blue-400 font-bold":"text-gray-700 dark:text-gray-300"),children:e[0]}),(0,gt.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"-"}),(0,gt.jsx)("span",{className:e[1]===t?"text-blue-400 font-bold":"text-gray-700 dark:text-gray-300",children:e[1]})]},n)}return(0,gt.jsx)("span",{className:"".concat(h," ").concat(c," py-1 rounded transition-colors duration-150 ","char"," ").concat(o.trim()),children:" "===r&&"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===t?"\xa0":r},n)}))]})};function It(e){if("undefined"===typeof Proxy)return e;const t=new Map;return new Proxy((function(){return e(...arguments)}),{get:(n,r)=>"create"===r?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}function Tt(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function Et(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Nt(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach(((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()})),t}function Pt(e,t,n,r){if("function"===typeof t){const[o,a]=Nt(r);t=t(void 0!==n?n:e.custom,o,a)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[o,a]=Nt(r);t=t(void 0!==n?n:e.custom,o,a)}return t}function At(e,t,n){const r=e.getProps();return Pt(r,t,void 0!==n?n:r.custom,e)}function Lt(e,t){var n,r;return null!==(n=null!==(r=null===e||void 0===e?void 0:e[t])&&void 0!==r?r:null===e||void 0===e?void 0:e.default)&&void 0!==n?n:e}const Kt=e=>e,Mt={},Ft=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Rt={value:null,addProjectionMetrics:null};function Dt(e,t){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,i=Ft.reduce(((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,o=!1,a=!1;const i=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},s=0;function u(t){i.has(t)&&(c.schedule(t),e()),s++,t(l)}const c={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&o?n:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&i.add(e),t.has(e)||t.add(e),e},cancel:e=>{r.delete(e),i.delete(e)},process:e=>{l=e,o?a=!0:(o=!0,[n,r]=[r,n],n.forEach(u),t&&Rt.value&&Rt.value.frameloop[t].push(s),s=0,n.clear(),o=!1,a&&(a=!1,c.process(e)))}};return c}(a,t?n:void 0),e)),{}),{setup:l,read:s,resolveKeyframes:u,preUpdate:c,update:d,preRender:h,render:f,postRender:p}=i,g=()=>{const a=Mt.useManualTiming?o.timestamp:performance.now();n=!1,Mt.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(a-o.timestamp,40),1)),o.timestamp=a,o.isProcessing=!0,l.process(o),s.process(o),u.process(o),c.process(o),d.process(o),h.process(o),f.process(o),p.process(o),o.isProcessing=!1,n&&t&&(r=!1,e(g))},y=Ft.reduce(((t,a)=>{const l=i[a];return t[a]=function(t){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,o.isProcessing||e(g)),l.schedule(t,a,i)},t}),{});return{schedule:y,cancel:e=>{for(let t=0;t<Ft.length;t++)i[Ft[t]].cancel(e)},state:o,steps:i}}const{schedule:Ot,cancel:jt,state:Ht,steps:Vt}=Dt("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Kt,!0),Bt=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ut=(()=>new Set(Bt))(),Gt=new Set(["width","height","top","left","right","bottom",...Bt]);function zt(e,t){-1===e.indexOf(t)&&e.push(t)}function Wt(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Yt{constructor(){this.subscriptions=[]}add(e){return zt(this.subscriptions,e),()=>Wt(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let o=0;o<r;o++){const r=this.subscriptions[o];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function $t(e,t){return t?e*(1e3/t):0}let qt;function Qt(){qt=void 0}const Xt={now:()=>(void 0===qt&&Xt.set(Ht.isProcessing||Mt.useManualTiming?Ht.timestamp:performance.now()),qt),set:e=>{qt=e,queueMicrotask(Qt)}},Zt={current:void 0};class Jt{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=Xt.now();var o,a;if((t.updatedAt!==r&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev)&&(null===(o=t.events.change)||void 0===o||o.notify(t.current),t.dependents))for(const i of t.dependents)i.dirty();n&&(null===(a=t.events.renderRequest)||void 0===a||a.notify(t.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){var t;this.current=e,this.updatedAt=Xt.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Yt);const n=this.events[e].add(t);return"change"===e?()=>{n(),Ot.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Zt.current&&Zt.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Xt.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return $t(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null===(e=this.dependents)||void 0===e||e.clear(),null===(t=this.events.destroy)||void 0===t||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function en(e,t){return new Jt(e,t)}const tn=e=>Array.isArray(e),nn=["transitionEnd","transition"];function rn(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,en(n))}function on(e){return tn(e)?e[e.length-1]||0:e}const an=e=>Boolean(e&&e.getVelocity);function ln(e,t){const n=e.getValue("willChange");if(r=n,Boolean(an(r)&&r.add))return n.add(t);if(!n&&Mt.WillChange){const n=new Mt.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}const sn=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),un="data-"+sn("framerAppearId");function cn(e){return e.props[un]}const dn=(e,t)=>n=>t(e(n)),hn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(dn)},fn=(e,t,n)=>n>t?t:n<e?e:n,pn=e=>1e3*e,gn=e=>e/1e3,yn={layout:0,mainThread:0,waapi:0};const mn=e=>t=>"string"===typeof t&&t.startsWith(e),vn=mn("--"),bn=mn("var(--"),xn=e=>!!bn(e)&&Cn.test(e.split("/*")[0].trim()),Cn=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i,kn={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Sn=q(q({},kn),{},{transform:e=>fn(0,1,e)}),wn=q(q({},kn),{},{default:1}),_n=e=>Math.round(1e5*e)/1e5,In=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const Tn=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,En=(e,t)=>n=>Boolean("string"===typeof n&&Tn.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),Nn=(e,t,n)=>r=>{if("string"!==typeof r)return r;const[o,a,i,l]=r.match(In);return{[e]:parseFloat(o),[t]:parseFloat(a),[n]:parseFloat(i),alpha:void 0!==l?parseFloat(l):1}},Pn=q(q({},kn),{},{transform:e=>Math.round((e=>fn(0,255,e))(e))}),An={test:En("rgb","red"),parse:Nn("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:o=1}=e;return"rgba("+Pn.transform(t)+", "+Pn.transform(n)+", "+Pn.transform(r)+", "+_n(Sn.transform(o))+")"}};const Ln={test:En("#"),parse:function(e){let t="",n="",r="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}},transform:An.transform},Kn=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),Mn=Kn("deg"),Fn=Kn("%"),Rn=Kn("px"),Dn=Kn("vh"),On=Kn("vw"),jn=(()=>q(q({},Fn),{},{parse:e=>Fn.parse(e)/100,transform:e=>Fn.transform(100*e)}))(),Hn={test:En("hsl","hue"),parse:Nn("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:o=1}=e;return"hsla("+Math.round(t)+", "+Fn.transform(_n(n))+", "+Fn.transform(_n(r))+", "+_n(Sn.transform(o))+")"}},Vn={test:e=>An.test(e)||Ln.test(e)||Hn.test(e),parse:e=>An.test(e)?An.parse(e):Hn.test(e)?Hn.parse(e):Ln.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?An.transform(e):Hn.transform(e)},Bn=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const Un="number",Gn="color",zn=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function Wn(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},o=[];let a=0;const i=t.replace(zn,(e=>(Vn.test(e)?(r.color.push(a),o.push(Gn),n.push(Vn.parse(e))):e.startsWith("var(")?(r.var.push(a),o.push("var"),n.push(e)):(r.number.push(a),o.push(Un),n.push(parseFloat(e))),++a,"${}"))).split("${}");return{values:n,split:i,indexes:r,types:o}}function Yn(e){return Wn(e).values}function $n(e){const{split:t,types:n}=Wn(e),r=t.length;return e=>{let o="";for(let a=0;a<r;a++)if(o+=t[a],void 0!==e[a]){const t=n[a];o+=t===Un?_n(e[a]):t===Gn?Vn.transform(e[a]):e[a]}return o}}const qn=e=>"number"===typeof e?0:e;const Qn={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(In))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(Bn))||void 0===n?void 0:n.length)||0)>0},parse:Yn,createTransformer:$n,getAnimatableNone:function(e){const t=Yn(e);return $n(e)(t.map(qn))}};function Xn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Zn(e,t){return n=>n>0?t:e}const Jn=(e,t,n)=>e+(t-e)*n,er=(e,t,n)=>{const r=e*e,o=n*(t*t-r)+r;return o<0?0:Math.sqrt(o)},tr=[Ln,An,Hn];function nr(e){const t=(e=>tr.find((t=>t.test(e))))(e);if(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),!Boolean(t))return!1;let n=t.parse(e);return t===Hn&&(n=function(e){let{hue:t,saturation:n,lightness:r,alpha:o}=e;t/=360,n/=100,r/=100;let a=0,i=0,l=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,o=2*r-e;a=Xn(o,e,t+1/3),i=Xn(o,e,t),l=Xn(o,e,t-1/3)}else a=i=l=r;return{red:Math.round(255*a),green:Math.round(255*i),blue:Math.round(255*l),alpha:o}}(n)),n}const rr=(e,t)=>{const n=nr(e),r=nr(t);if(!n||!r)return Zn(e,t);const o=q({},n);return e=>(o.red=er(n.red,r.red,e),o.green=er(n.green,r.green,e),o.blue=er(n.blue,r.blue,e),o.alpha=Jn(n.alpha,r.alpha,e),An.transform(o))},or=new Set(["none","hidden"]);function ar(e,t){return n=>Jn(e,t,n)}function ir(e){return"number"===typeof e?ar:"string"===typeof e?xn(e)?Zn:Vn.test(e)?rr:ur:Array.isArray(e)?lr:"object"===typeof e?Vn.test(e)?rr:sr:Zn}function lr(e,t){const n=[...e],r=n.length,o=e.map(((e,n)=>ir(e)(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=o[t](e);return n}}function sr(e,t){const n=q(q({},e),t),r={};for(const o in n)void 0!==e[o]&&void 0!==t[o]&&(r[o]=ir(e[o])(e[o],t[o]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const ur=(e,t)=>{const n=Qn.createTransformer(t),r=Wn(e),o=Wn(t);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?or.has(e)&&!o.values.length||or.has(t)&&!r.values.length?function(e,t){return or.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):hn(lr(function(e,t){const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){var o;const i=t.types[a],l=e.indexes[i][r[i]],s=null!==(o=e.values[l])&&void 0!==o?o:0;n[a]=s,r[i]++}return n}(r,o),o.values),n):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),Zn(e,t))};function cr(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return Jn(e,t,n);return ir(e)(e,t)}const dr=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Ot.update(t,e)},stop:()=>jt(t),now:()=>Ht.isProcessing?Ht.timestamp:Xt.now()}},hr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const o=Math.max(Math.round(t/n),2);for(let a=0;a<o;a++)r+=e(a/(o-1))+", ";return"linear(".concat(r.substring(0,r.length-2),")")},fr=2e4;function pr(e){let t=0;let n=e.next(t);for(;!n.done&&t<fr;)t+=50,n=e.next(t);return t>=fr?1/0:t}function gr(e,t,n){const r=Math.max(t-5,0);return $t(n-e(r),t-r)}const yr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mr=.001;function vr(e){let t,n,{duration:r=yr.duration,bounce:o=yr.bounce,velocity:a=yr.velocity,mass:i=yr.mass}=e;pn(yr.maxDuration);let l=1-o;l=fn(yr.minDamping,yr.maxDamping,l),r=fn(yr.minDuration,yr.maxDuration,gn(r)),l<1?(t=e=>{const t=e*l,n=t*r,o=t-a,i=xr(e,l),s=Math.exp(-n);return mr-o/i*s},n=e=>{const n=e*l*r,o=n*a+a,i=Math.pow(l,2)*Math.pow(e,2)*r,s=Math.exp(-n),u=xr(Math.pow(e,2),l);return(-t(e)+mr>0?-1:1)*((o-i)*s)/u}):(t=e=>Math.exp(-e*r)*((e-a)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(a-e)));const s=function(e,t,n){let r=n;for(let o=1;o<br;o++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=pn(r),isNaN(s))return{stiffness:yr.stiffness,damping:yr.damping,duration:r};{const e=Math.pow(s,2)*i;return{stiffness:e,damping:2*l*Math.sqrt(i*e),duration:r}}}const br=12;function xr(e,t){return e*Math.sqrt(1-t*t)}const Cr=["duration","bounce"],kr=["stiffness","damping","mass"];function Sr(e,t){return t.some((t=>void 0!==e[t]))}function wr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yr.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:o}=n;const a=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:s,damping:u,mass:c,duration:d,velocity:h,isResolvedFromDuration:f}=function(e){let t=q({velocity:yr.velocity,stiffness:yr.stiffness,damping:yr.damping,mass:yr.mass,isResolvedFromDuration:!1},e);if(!Sr(e,kr)&&Sr(e,Cr))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),o=r*r,a=2*fn(.05,1,1-(e.bounce||0))*Math.sqrt(o);t=q(q({},t),{},{mass:yr.mass,stiffness:o,damping:a})}else{const n=vr(e);t=q(q(q({},t),n),{},{mass:yr.mass}),t.isResolvedFromDuration=!0}return t}(q(q({},n),{},{velocity:-gn(n.velocity||0)})),p=h||0,g=u/(2*Math.sqrt(s*c)),y=i-a,m=gn(Math.sqrt(s/c)),v=Math.abs(y)<5;let b;if(r||(r=v?yr.restSpeed.granular:yr.restSpeed.default),o||(o=v?yr.restDelta.granular:yr.restDelta.default),g<1){const e=xr(m,g);b=t=>{const n=Math.exp(-g*m*t);return i-n*((p+g*m*y)/e*Math.sin(e*t)+y*Math.cos(e*t))}}else if(1===g)b=e=>i-Math.exp(-m*e)*(y+(p+m*y)*e);else{const e=m*Math.sqrt(g*g-1);b=t=>{const n=Math.exp(-g*m*t),r=Math.min(e*t,300);return i-n*((p+g*m*y)*Math.sinh(r)+e*y*Math.cosh(r))/e}}const x={calculatedDuration:f&&d||null,next:e=>{const t=b(e);if(f)l.done=e>=d;else{let n=0===e?p:0;g<1&&(n=0===e?pn(p):gr(b,e,t));const a=Math.abs(n)<=r,s=Math.abs(i-t)<=o;l.done=a&&s}return l.value=l.done?i:t,l},toString:()=>{const e=Math.min(pr(x),fr),t=hr((t=>x.next(e*t).value),e,30);return e+"ms "+t},toTransition:()=>{}};return x}function _r(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:o=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:l,min:s,max:u,restDelta:c=.5,restSpeed:d}=e;const h=t[0],f={done:!1,value:h},p=e=>void 0===s?u:void 0===u||Math.abs(s-e)<Math.abs(u-e)?s:u;let g=r*n;const y=h+g,m=void 0===l?y:l(y);m!==y&&(g=m-h);const v=e=>-g*Math.exp(-e/o),b=e=>m+v(e),x=e=>{const t=v(e),n=b(e);f.done=Math.abs(t)<=c,f.value=f.done?m:n};let C,k;const S=e=>{(e=>void 0!==s&&e<s||void 0!==u&&e>u)(f.value)&&(C=e,k=wr({keyframes:[f.value,p(f.value)],velocity:gr(b,e,f.value),damping:a,stiffness:i,restDelta:c,restSpeed:d}))};return S(0),{calculatedDuration:null,next:e=>{let t=!1;return k||void 0!==C||(t=!0,x(e),S(e)),void 0!==C&&e>=C?k.next(e-C):(!t&&x(e),f)}}}wr.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)(q(q({},e),{},{keyframes:[0,t]})),r=Math.min(pr(n),fr);return{type:"keyframes",ease:e=>n.next(r*e).value/t,duration:gn(r)}}(e,100,wr);return e.ease=t.ease,e.duration=pn(t.duration),e.type="keyframes",e};const Ir=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Tr(e,t,n,r){if(e===t&&n===r)return Kt;const o=t=>function(e,t,n,r,o){let a,i,l=0;do{i=t+(n-t)/2,a=Ir(i,r,o)-e,a>0?n=i:t=i}while(Math.abs(a)>1e-7&&++l<12);return i}(t,0,1,e,n);return e=>0===e||1===e?e:Ir(o(e),t,r)}const Er=Tr(.42,0,1,1),Nr=Tr(0,0,.58,1),Pr=Tr(.42,0,.58,1),Ar=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Lr=e=>t=>1-e(1-t),Kr=Tr(.33,1.53,.69,.99),Mr=Lr(Kr),Fr=Ar(Mr),Rr=e=>(e*=2)<1?.5*Mr(e):.5*(2-Math.pow(2,-10*(e-1))),Dr=e=>1-Math.sin(Math.acos(e)),Or=Lr(Dr),jr=Ar(Dr),Hr=e=>Array.isArray(e)&&"number"===typeof e[0],Vr={linear:Kt,easeIn:Er,easeInOut:Pr,easeOut:Nr,circIn:Dr,circInOut:jr,circOut:Or,backIn:Mr,backInOut:Fr,backOut:Kr,anticipate:Rr},Br=e=>{if(Hr(e)){e.length;const[t,n,r,o]=e;return Tr(t,n,r,o)}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),Vr[e]):e},Ur=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};function Gr(e,t){let{clamp:n=!0,ease:r,mixer:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.length;if(t.length,1===a)return()=>t[0];if(2===a&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=function(e,t,n){const r=[],o=n||Mt.mix||cr,a=e.length-1;for(let i=0;i<a;i++){let n=o(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||Kt:t;n=hn(e,n)}r.push(n)}return r}(t,r,o),s=l.length,u=n=>{if(i&&n<e[0])return t[0];let r=0;if(s>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const o=Ur(e[r],e[r+1],n);return l[r](o)};return n?t=>u(fn(e[0],e[a-1],t)):u}function zr(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const o=Ur(0,t,r);e.push(Jn(n,1,o))}}(t,e.length-1),t}function Wr(e){let{duration:t=300,keyframes:n,times:r,ease:o="easeInOut"}=e;const a=(e=>Array.isArray(e)&&"number"!==typeof e[0])(o)?o.map(Br):Br(o),i={done:!1,value:n[0]},l=function(e,t){return e.map((e=>e*t))}(r&&r.length===n.length?r:zr(n),t),s=Gr(l,n,{ease:Array.isArray(a)?a:(u=n,c=a,u.map((()=>c||Pr)).splice(0,u.length-1))});var u,c;return{calculatedDuration:t,next:e=>(i.value=s(e),i.done=e>=t,i)}}const Yr=e=>null!==e;function $r(e,t,n){let{repeat:r,repeatType:o="loop"}=t,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=e.filter(Yr),l=a<0||r&&"loop"!==o&&r%2===1?0:i.length-1;return l&&void 0!==n?n:i[l]}const qr={decay:_r,inertia:_r,tween:Wr,keyframes:Wr,spring:wr};function Qr(e){"string"===typeof e.type&&(e.type=qr[e.type])}class Xr{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise((e=>{this.resolve=e}))}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Zr=e=>e/100;class Jr extends Xr{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==Xt.now()&&this.tick(Xt.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null===(e=(t=this.options).onStop)||void 0===e||e.call(t))},yn.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;Qr(e);const{type:t=Wr,repeat:n=0,repeatDelay:r=0,repeatType:o,velocity:a=0}=e;let{keyframes:i}=e;const l=t||Wr;l!==Wr&&"number"!==typeof i[0]&&(this.mixKeyframes=hn(Zr,cr(i[0],i[1])),i=[0,100]);const s=l(q(q({},e),{},{keyframes:i}));"mirror"===o&&(this.mirroredGenerator=l(q(q({},e),{},{keyframes:[...i].reverse(),velocity:-a}))),null===s.calculatedDuration&&(s.calculatedDuration=pr(s));const{calculatedDuration:u}=s;this.calculatedDuration=u,this.resolvedDuration=u+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=s}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:r,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:i,calculatedDuration:l}=this;if(null===this.startTime)return n.next(0);const{delay:s=0,keyframes:u,repeat:c,repeatType:d,repeatDelay:h,type:f,onUpdate:p,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const y=this.currentTime-s*(this.playbackSpeed>=0?1:-1),m=this.playbackSpeed>=0?y<0:y>r;this.currentTime=Math.max(y,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,b=n;if(c){const e=Math.min(this.currentTime,r)/i;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,c+1);Boolean(t%2)&&("reverse"===d?(n=1-n,h&&(n-=h/i)):"mirror"===d&&(b=a)),v=fn(0,1,n)*i}const x=m?{done:!1,value:u[0]}:b.next(v);o&&(x.value=o(x.value));let{done:C}=x;m||null===l||(C=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const k=null===this.holdTime&&("finished"===this.state||"running"===this.state&&C);return k&&f!==_r&&(x.value=$r(u,this.options,g,this.speed)),p&&p(x.value),k&&this.finish(),x}then(e,t){return this.finished.then(e,t)}get duration(){return gn(this.calculatedDuration)}get time(){return gn(this.currentTime)}set time(e){var t;e=pn(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(t=this.driver)||void 0===t||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Xt.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=gn(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=dr,startTime:r}=this.options;this.driver||(this.driver=n((e=>this.tick(e)))),null===(e=(t=this.options).onPlay)||void 0===e||e.call(t);const o=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=o):null!==this.holdTime?this.startTime=o-this.holdTime:this.startTime||(this.startTime=null!==r&&void 0!==r?r:o),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Xt.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(t=this.options).onComplete)||void 0===e||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(t=this.options).onCancel)||void 0===e||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,yn.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(t=this.driver)||void 0===t||t.stop(),e.observe(this)}}const eo=e=>180*e/Math.PI,to=e=>{const t=eo(Math.atan2(e[1],e[0]));return ro(t)},no={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:to,rotateZ:to,skewX:e=>eo(Math.atan(e[1])),skewY:e=>eo(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},ro=e=>((e%=360)<0&&(e+=360),e),oo=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ao=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),io={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:oo,scaleY:ao,scale:e=>(oo(e)+ao(e))/2,rotateX:e=>ro(eo(Math.atan2(e[6],e[5]))),rotateY:e=>ro(eo(Math.atan2(-e[2],e[0]))),rotateZ:to,rotate:to,skewX:e=>eo(Math.atan(e[4])),skewY:e=>eo(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function lo(e){return e.includes("scale")?1:0}function so(e,t){if(!e||"none"===e)return lo(t);const n=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);let r,o;if(n)r=io,o=n;else{const t=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);r=no,o=t}if(!o)return lo(t);const a=r[t],i=o[1].split(",").map(uo);return"function"===typeof a?a(i):i[a]}function uo(e){return parseFloat(e.trim())}const co=e=>e===kn||e===Rn,ho=new Set(["x","y","z"]),fo=Bt.filter((e=>!ho.has(e)));const po={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:o="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(o)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:o="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(o)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return so(n,"x")},y:(e,t)=>{let{transform:n}=t;return so(n,"y")}};po.translateX=po.x,po.translateY=po.y;const go=new Set;let yo=!1,mo=!1,vo=!1;function bo(){if(mo){const e=Array.from(go).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),n=new Map;t.forEach((e=>{const t=function(e){const t=[];return fo.forEach((n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t}(e);t.length&&(n.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=n.get(e);t&&t.forEach((t=>{var n;let[r,o]=t;null===(n=e.getValue(r))||void 0===n||n.set(o)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}mo=!1,yo=!1,go.forEach((e=>e.complete(vo))),go.clear()}function xo(){go.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(mo=!0)}))}class Co{constructor(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(go.add(this),yo||(yo=!0,Ot.read(xo),Ot.resolveKeyframes(bo))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const o=null===r||void 0===r?void 0:r.get(),a=e[e.length-1];if(void 0!==o)e[0]=o;else if(n&&t){const r=n.readValue(t,a);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=a),r&&void 0===o&&r.set(e[0])}!function(e){for(let n=1;n<e.length;n++){var t;null!==(t=e[n])&&void 0!==t||(e[n]=e[n-1])}}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),go.delete(this)}cancel(){"scheduled"===this.state&&(go.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}function ko(e){let t;return()=>(void 0===t&&(t=e()),t)}const So=ko((()=>void 0!==window.ScrollTimeline)),wo={};function _o(e,t){const n=ko(e);return()=>{var e;return null!==(e=wo[t])&&void 0!==e?e:n()}}const Io=_o((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}),"linearEasing"),To=e=>{let[t,n,r,o]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(o,")")},Eo={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:To([0,.65,.55,1]),circOut:To([.55,0,1,.45]),backIn:To([.31,.01,.66,-.59]),backOut:To([.33,1.53,.69,.99])};function No(e,t){return e?"function"===typeof e?Io()?hr(e,t):"ease-out":Hr(e)?To(e):Array.isArray(e)?e.map((e=>No(e,t)||Eo.easeOut)):Eo[e]:void 0}function Po(e,t,n){let{delay:r=0,duration:o=300,repeat:a=0,repeatType:i="loop",ease:l="easeOut",times:s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const c={[t]:n};s&&(c.offset=s);const d=No(l,o);Array.isArray(d)&&(c.easing=d),Rt.value&&yn.waapi++;const h={delay:r,duration:o,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:"reverse"===i?"alternate":"normal"};u&&(h.pseudoElement=u);const f=e.animate(c,h);return Rt.value&&f.finished.finally((()=>{yn.waapi--})),f}function Ao(e){return"function"===typeof e&&"applyToOptions"in e}const Lo=["type"];class Ko extends Xr{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:i,onComplete:l}=e;this.isPseudoElement=Boolean(o),this.allowFlatten=a,this.options=e,e.type;const s=function(e){let{type:t}=e,n=Et(e,Lo);return Ao(t)&&Io()?t.applyToOptions(n):(null!==(r=n.duration)&&void 0!==r||(n.duration=300),null!==(o=n.ease)&&void 0!==o||(n.ease="easeOut"),n);var r,o}(e);this.animation=Po(t,n,r,s,o),!1===s.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const e=$r(r,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null===l||void 0===l||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null===(e=(t=this.animation).finish)||void 0===e||e.call(t)}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(null===(e=(t=this.animation).commitStyles)||void 0===e||e.call(t))}get duration(){var e,t;const n=(null===(e=this.animation.effect)||void 0===e||null===(t=e.getComputedTiming)||void 0===t?void 0:t.call(e).duration)||0;return gn(Number(n))}get time(){return gn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=pn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;var r;this.allowFlatten&&(null===(r=this.animation.effect)||void 0===r||r.updateTiming({easing:"linear"}));return this.animation.onfinish=null,t&&So()?(this.animation.timeline=t,Kt):n(this)}}const Mo={anticipate:Rr,backInOut:Fr,circInOut:jr};function Fo(e){"string"===typeof e.ease&&e.ease in Mo&&(e.ease=Mo[e.ease])}const Ro=["motionValue","onUpdate","onComplete","element"];class Do extends Ko{constructor(e){Fo(e),Qr(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){var t;const n=this.options,{motionValue:r,onUpdate:o,onComplete:a,element:i}=n,l=Et(n,Ro);if(!r)return;if(void 0!==e)return void r.set(e);const s=new Jr(q(q({},l),{},{autoplay:!1})),u=pn(null!==(t=this.finishedTime)&&void 0!==t?t:this.time);r.setWithVelocity(s.sample(u-10).value,s.sample(u).value,10),s.stop()}}const Oo=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!Qn.test(e)&&"0"!==e||e.startsWith("url(")));function jo(e){return"object"===typeof e&&null!==e}function Ho(e){return jo(e)&&"offsetHeight"in e}const Vo=new Set(["opacity","clipPath","filter","transform"]),Bo=ko((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));const Uo=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"];class Go extends Xr{constructor(e){var t;let{autoplay:n=!0,delay:r=0,type:o="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:l="loop",keyframes:s,name:u,motionValue:c,element:d}=e,h=Et(e,Uo);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null===(t=this.stopTimeline)||void 0===t||t.call(this));null===(e=this.keyframeResolver)||void 0===e||e.cancel()},this.createdAt=Xt.now();const f=q({autoplay:n,delay:r,type:o,repeat:a,repeatDelay:i,repeatType:l,name:u,motionValue:c,element:d},h),p=(null===d||void 0===d?void 0:d.KeyframeResolver)||Co;this.keyframeResolver=new p(s,((e,t,n)=>this.onKeyframesResolved(e,t,f,!n)),u,c,d),null===(t=this.keyframeResolver)||void 0===t||t.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:o,type:a,velocity:i,delay:l,isHandoff:s,onUpdate:u}=n;this.resolvedAt=Xt.now(),function(e,t,n,r){const o=e[0];if(null===o)return!1;if("display"===t||"visibility"===t)return!0;const a=e[e.length-1],i=Oo(o,t),l=Oo(a,t);return"You are trying to animate ".concat(t,' from "').concat(o,'" to "').concat(a,'". ').concat(o," is not an animatable value - to enable this animation set ").concat(o," to a value animatable to ").concat(a," via the `style` property."),!(!i||!l)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||Ao(n))&&r)}(e,o,a,i)||(!Mt.instantAnimations&&l||null===u||void 0===u||u($r(e,n,t)),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const c=q(q({startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t},n),{},{keyframes:e}),d=!s&&function(e){var t;const{motionValue:n,name:r,repeatDelay:o,repeatType:a,damping:i,type:l}=e;if(!Ho(null===n||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.current))return!1;const{onUpdate:s,transformTemplate:u}=n.owner.getProps();return Bo()&&r&&Vo.has(r)&&("transform"!==r||!u)&&!s&&!o&&"mirror"!==a&&0!==i&&"inertia"!==l}(c)?new Do(q(q({},c),{},{element:c.motionValue.owner.current})):new Jr(c);d.finished.then((()=>this.notifyFinished())).catch(Kt),this.pendingTimeline&&(this.stopTimeline=d.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then((()=>{}))}get animation(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),vo=!0,xo(),bo(),vo=!1);return this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}const zo=e=>null!==e;const Wo={type:"spring",stiffness:500,damping:25,restSpeed:10},Yo={type:"keyframes",duration:.8},$o={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},qo=(e,t)=>{let{keyframes:n}=t;return n.length>2?Yo:Ut.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Wo:$o},Qo=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const Xo=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return i=>{const l=Lt(r,e)||{},s=l.delay||r.delay||0;let{elapsed:u=0}=r;u-=pn(s);const c=q(q({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},l),{},{delay:-u,onUpdate:e=>{t.set(e),l.onUpdate&&l.onUpdate(e)},onComplete:()=>{i(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:o});(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:o,staggerDirection:a,repeat:i,repeatType:l,repeatDelay:s,from:u,elapsed:c}=e,d=Et(e,Qo);return!!Object.keys(d).length})(l)||Object.assign(c,qo(e,c)),c.duration&&(c.duration=pn(c.duration)),c.repeatDelay&&(c.repeatDelay=pn(c.repeatDelay)),void 0!==c.from&&(c.keyframes[0]=c.from);let d=!1;if((!1===c.type||0===c.duration&&!c.repeatDelay)&&(c.duration=0,0===c.delay&&(d=!0)),(Mt.instantAnimations||Mt.skipAnimations)&&(d=!0,c.duration=0,c.delay=0),c.allowFlatten=!l.type&&!l.ease,d&&!a&&void 0!==t.get()){const e=function(e,t,n){let{repeat:r,repeatType:o="loop"}=t;const a=e.filter(zo),i=r&&"loop"!==o&&r%2===1?0:a.length-1;return i&&void 0!==n?n:a[i]}(c.keyframes,l);if(void 0!==e)return void Ot.update((()=>{c.onUpdate(e),c.onComplete()}))}return l.isSync?new Jr(c):new Go(c)}},Zo=["transition","transitionEnd"];function Jo(e,t){let{protectedKeys:n,needsAnimating:r}=e;const o=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,o}function ea(e,t){let{delay:n=0,transitionOverride:r,type:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:a=e.getDefaultTransition(),transitionEnd:i}=t,l=Et(t,Zo);r&&(a=r);const s=[],u=o&&e.animationState&&e.animationState.getState()[o];for(const d in l){var c;const t=e.getValue(d,null!==(c=e.latestValues[d])&&void 0!==c?c:null),r=l[d];if(void 0===r||u&&Jo(u,d))continue;const o=q({delay:n},Lt(a||{},d)),i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(r)&&r===i&&!o.velocity)continue;let h=!1;if(window.MotionHandoffAnimation){const t=cn(e);if(t){const e=window.MotionHandoffAnimation(t,d,Ot);null!==e&&(o.startTime=e,h=!0)}}ln(e,d),t.start(Xo(d,t,r,e.shouldReduceMotion&&Gt.has(d)?{type:!1}:o,e,h));const f=t.animation;f&&s.push(f)}return i&&Promise.all(s).then((()=>{Ot.update((()=>{i&&function(e,t){let n=At(e,t)||{},{transitionEnd:r={},transition:o={}}=n,a=Et(n,nn);a=q(q({},a),r);for(const i in a)rn(e,i,on(a[i]))}(e,i)}))})),s}function ta(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=At(e,t,"exit"===r.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=o||{};r.transitionOverride&&(a=r.transitionOverride);const i=o?()=>Promise.all(ea(e,o,r)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:o=0,staggerChildren:i,staggerDirection:l}=a;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5?arguments[5]:void 0;const i=[],l=(e.variantChildren.size-1)*r,s=1===o?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return l-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(na).forEach(((e,r)=>{e.notify("AnimationStart",t),i.push(ta(e,t,q(q({},a),{},{delay:n+s(r)})).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(i)}(e,t,o+n,i,l,r)}:()=>Promise.resolve(),{when:s}=a;if(s){const[e,t]="beforeChildren"===s?[i,l]:[l,i];return e().then((()=>t()))}return Promise.all([i(),l(r.delay)])}function na(e,t){return e.sortNodePosition(t)}function ra(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function oa(e){return"string"===typeof e||Array.isArray(e)}const aa=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ia=["initial",...aa],la=ia.length;function sa(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&sa(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<la;n++){const r=ia[n],o=e.props[r];(oa(o)||!1===o)&&(t[r]=o)}return t}const ua=["transition","transitionEnd"],ca=[...aa].reverse(),da=aa.length;function ha(e){return t=>Promise.all(t.map((t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const o=t.map((t=>ta(e,t,r)));n=Promise.all(o)}else if("string"===typeof t)n=ta(e,t,r);else{const o="function"===typeof t?At(e,t,r.custom):t;n=Promise.all(ea(e,o,r))}return n.then((()=>{e.notify("AnimationComplete",t)}))}(e,n,r)})))}function fa(e){let t=ha(e),n=ya(),r=!0;const o=t=>(n,r)=>{var o;const a=At(e,r,"exit"===t?null===(o=e.presenceContext)||void 0===o?void 0:o.custom:void 0);if(a){const{transition:e,transitionEnd:t}=a,r=Et(a,ua);n=q(q(q({},n),r),t)}return n};function a(a){const{props:i}=e,l=sa(e.parent)||{},s=[],u=new Set;let c={},d=1/0;for(let t=0;t<da;t++){const h=ca[t],f=n[h],p=void 0!==i[h]?i[h]:l[h],g=oa(p),y=h===a?f.isActive:null;!1===y&&(d=t);let m=p===l[h]&&p!==i[h]&&g;if(m&&r&&e.manuallyAnimateOnMount&&(m=!1),f.protectedKeys=q({},c),!f.isActive&&null===y||!p&&!f.prevProp||Tt(p)||"boolean"===typeof p)continue;const v=pa(f.prevProp,p);let b=v||h===a&&f.isActive&&!m&&g||t>d&&g,x=!1;const C=Array.isArray(p)?p:[p];let k=C.reduce(o(h),{});!1===y&&(k={});const{prevResolvedValues:S={}}=f,w=q(q({},S),k),_=t=>{b=!0,u.has(t)&&(x=!0,u.delete(t)),f.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in w){const t=k[e],n=S[e];if(c.hasOwnProperty(e))continue;let r=!1;r=tn(t)&&tn(n)?!ra(t,n):t!==n,r?void 0!==t&&null!==t?_(e):u.add(e):void 0!==t&&u.has(e)?_(e):f.protectedKeys[e]=!0}f.prevProp=p,f.prevResolvedValues=k,f.isActive&&(c=q(q({},c),k)),r&&e.blockInitialAnimation&&(b=!1);b&&(!(m&&v)||x)&&s.push(...C.map((e=>({animation:e,options:{type:h}}))))}if(u.size){const t={};if("boolean"!==typeof i.initial){const n=At(e,Array.isArray(i.initial)?i.initial[0]:i.initial);n&&n.transition&&(t.transition=n.transition)}u.forEach((n=>{const r=e.getBaseTarget(n),o=e.getValue(n);o&&(o.liveStyle=!0),t[n]=null!==r&&void 0!==r?r:null})),s.push({animation:t})}let h=Boolean(s.length);return!r||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(s):Promise.resolve()}return{animateChanges:a,setActive:function(t,r){var o;if(n[t].isActive===r)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;const i=a(t);for(const e in n)n[e].protectedKeys={};return i},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=ya(),r=!0}}}function pa(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!ra(t,e)}function ga(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ya(){return{animate:ga(!0),whileInView:ga(),whileHover:ga(),whileTap:ga(),whileDrag:ga(),whileFocus:ga(),exit:ga()}}class ma{constructor(e){this.isMounted=!1,this.node=e}update(){}}let va=0;const ba={animation:{Feature:class extends ma{constructor(e){super(e),e.animationState||(e.animationState=fa(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Tt(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends ma{constructor(){super(...arguments),this.id=va++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then((()=>{t(this.id)}))}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},xa={x:!1,y:!1};function Ca(){return xa.x||xa.y}function ka(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const Sa=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function wa(e){return{point:{x:e.pageX,y:e.pageY}}}function _a(e,t,n,r){return ka(e,t,(e=>t=>Sa(t)&&e(t,wa(t)))(n),r)}function Ia(e){let{top:t,left:n,right:r,bottom:o}=e;return{x:{min:n,max:r},y:{min:t,max:o}}}function Ta(e){return e.max-e.min}function Ea(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=Jn(t.min,t.max,e.origin),e.scale=Ta(n)/Ta(t),e.translate=Jn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Na(e,t,n,r){Ea(e.x,t.x,n.x,r?r.originX:void 0),Ea(e.y,t.y,n.y,r?r.originY:void 0)}function Pa(e,t,n){e.min=n.min+t.min,e.max=e.min+Ta(t)}function Aa(e,t,n){e.min=t.min-n.min,e.max=e.min+Ta(t)}function La(e,t,n){Aa(e.x,t.x,n.x),Aa(e.y,t.y,n.y)}const Ka=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Ma(e){return[e("x"),e("y")]}function Fa(e){return void 0===e||1===e}function Ra(e){let{scale:t,scaleX:n,scaleY:r}=e;return!Fa(t)||!Fa(n)||!Fa(r)}function Da(e){return Ra(e)||Oa(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Oa(e){return ja(e.x)||ja(e.y)}function ja(e){return e&&"0%"!==e}function Ha(e,t,n){return n+t*(e-n)}function Va(e,t,n,r,o){return void 0!==o&&(e=Ha(e,o,r)),Ha(e,n,r)+t}function Ba(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;e.min=Va(e.min,t,n,r,o),e.max=Va(e.max,t,n,r,o)}function Ua(e,t){let{x:n,y:r}=t;Ba(e.x,n.translate,n.scale,n.originPoint),Ba(e.y,r.translate,r.scale,r.originPoint)}const Ga=.999999999999,za=1.0000000000001;function Wa(e,t){e.min=e.min+t,e.max=e.max+t}function Ya(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;Ba(e,t,n,Jn(e.min,e.max,o),r)}function $a(e,t){Ya(e.x,t.x,t.scaleX,t.scale,t.originX),Ya(e.y,t.y,t.scaleY,t.scale,t.originY)}function qa(e,t){return Ia(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const Qa=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null};function Xa(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}const Za=(e,t)=>Math.abs(e-t);class Ja{constructor(e,t){let{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:o=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=ni(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Za(e.x,t.x),r=Za(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:o}=Ht;this.history.push(q(q({},r),{},{timestamp:o}));const{onStart:a,onMove:i}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=ei(t,this.transformPagePoint),Ot.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:o}=this.handlers;if(this.dragSnapToOrigin&&o&&o(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=ni("pointercancel"===e.type?this.lastMoveEventInfo:ei(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),r&&r(e,a)},!Sa(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const a=ei(wa(e),this.transformPagePoint),{point:i}=a,{timestamp:l}=Ht;this.history=[q(q({},i),{},{timestamp:l})];const{onSessionStart:s}=t;s&&s(e,ni(a,this.history)),this.removeListeners=hn(_a(this.contextWindow,"pointermove",this.handlePointerMove),_a(this.contextWindow,"pointerup",this.handlePointerUp),_a(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),jt(this.updatePoint)}}function ei(e,t){return t?{point:t(e.point)}:e}function ti(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ni(e,t){let{point:n}=e;return{point:n,delta:ti(n,oi(t)),offset:ti(n,ri(t)),velocity:ai(t,.1)}}function ri(e){return e[0]}function oi(e){return e[e.length-1]}function ai(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const o=oi(e);for(;n>=0&&(r=e[n],!(o.timestamp-r.timestamp>pn(t)));)n--;if(!r)return{x:0,y:0};const a=gn(o.timestamp-r.timestamp);if(0===a)return{x:0,y:0};const i={x:(o.x-r.x)/a,y:(o.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function ii(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function li(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const si=.35;function ui(e,t,n){return{min:ci(e,t),max:ci(e,n)}}function ci(e,t){return"number"===typeof e?e:e[t]||0}const di=new WeakMap;class hi{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new Ja(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(wa(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:o}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(a=n)||"y"===a?xa[a]?null:(xa[a]=!0,()=>{xa[a]=!1}):xa.x||xa.y?null:(xa.x=xa.y=!0,()=>{xa.x=xa.y=!1}),!this.openDragLock))return;var a;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ma((e=>{let t=this.getAxisMotionValue(e).get()||0;if(Fn.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=Ta(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),o&&Ot.postRender((()=>o(e,t))),ln(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:o,onDrag:a}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:i}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(i),void(null!==this.currentDirection&&o&&o(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Ma((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:Qa(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Ot.postRender((()=>o(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!fi(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,t,n){let{min:r,max:o}=t;return void 0!==r&&e<r?e=n?Jn(r,e,n.min):Math.max(e,r):void 0!==o&&e>o&&(e=n?Jn(o,e,n.max):Math.min(e,o)),e}(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,o=this.constraints;t&&Xa(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:o,right:a}=t;return{x:ii(e.x,r,a),y:ii(e.y,n,o)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si;return!1===e?e=0:!0===e&&(e=si),{x:ui(e,"left","right"),y:ui(e,"top","bottom")}}(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ma((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Xa(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=function(e,t,n){const r=qa(e,n),{scroll:o}=t;return o&&(Wa(r.x,o.offset.x),Wa(r.y,o.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:li(e.x,t.x),y:li(e.y,t.y)}}(r.layout.layoutBox,o);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=Ia(e))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:i}=this.getProps(),l=this.constraints||{},s=Ma((i=>{if(!fi(i,t,this.currentDirection))return;let s=l&&l[i]||{};a&&(s={min:0,max:0});const u=r?200:1e6,c=r?40:1e7,d=q(q({type:"inertia",velocity:n?e[i]:0,bounceStiffness:u,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10},o),s);return this.startAxisValueAnimation(i,d)}));return Promise.all(s).then(i)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return ln(this.visualElement,e),n.start(Xo(e,n,0,t,this.visualElement,!1))}stopAnimation(){Ma((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){Ma((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ma((t=>{const{drag:n}=this.getProps();if(!fi(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:a}=r.layout.layoutBox[t];o.set(e[t]-Jn(n,a,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Xa(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ma((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=Ta(e),o=Ta(t);return o>r?n=Ur(t.min,t.max-r,e.min):r>o&&(n=Ur(e.min,e.max-o,t.min)),fn(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ma((t=>{if(!fi(t,e,null))return;const n=this.getAxisMotionValue(t),{min:o,max:a}=this.constraints[t];n.set(Jn(o,a,r[t]))}))}addListeners(){if(!this.visualElement.current)return;di.set(this.visualElement,this);const e=_a(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();Xa(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),Ot.read(t);const o=ka(window,"resize",(()=>this.scalePositionWithinConstraints())),a=n.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(Ma((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{o(),e(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=si,dragMomentum:i=!0}=e;return q(q({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:i})}}function fi(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const pi=e=>(t,n)=>{e&&Ot.postRender((()=>e(t,n)))};const{schedule:gi,cancel:yi}=Dt(queueMicrotask,!1),mi=(0,r.createContext)(null);const vi=(0,r.createContext)({}),bi=(0,r.createContext)({}),xi={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ci(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ki={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Rn.test(e))return e;e=parseFloat(e)}const n=Ci(e,t.target.x),r=Ci(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},Si={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const o=e,a=Qn.parse(e);if(a.length>5)return o;const i=Qn.createTransformer(e),l="number"!==typeof a[0]?1:0,s=r.x.scale*n.x,u=r.y.scale*n.y;a[0+l]/=s,a[1+l]/=u;const c=Jn(s,u,.5);return"number"===typeof a[2+l]&&(a[2+l]/=c),"number"===typeof a[3+l]&&(a[3+l]/=c),i(a)}},wi={};class _i extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:o}=e;!function(e){for(const t in e)wi[t]=e[t],vn(t)&&(wi[t].isCSSVariable=!0)}(Ti),o&&(t.group&&t.group.add(o),n&&n.register&&r&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",(()=>{this.safeToRemove()})),o.setOptions(q(q({},o.options),{},{onExitComplete:()=>this.safeToRemove()}))),xi.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:o}=this.props,{projection:a}=n;return a?(a.isPresent=o,r||e.layoutDependency!==t||void 0===t||e.isPresent!==o?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Ot.postRender((()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),gi.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Ii(e){const[t,n]=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,r.useContext)(mi);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:o,register:a}=t,i=(0,r.useId)();(0,r.useEffect)((()=>{if(e)return a(i)}),[e]);const l=(0,r.useCallback)((()=>e&&o&&o(i)),[i,o,e]);return!n&&o?[!1,l]:[!0]}(),o=(0,r.useContext)(vi);return(0,gt.jsx)(_i,q(q({},e),{},{layoutGroup:o,switchLayoutGroup:(0,r.useContext)(bi),isPresent:t,safeToRemove:n}))}const Ti={borderRadius:q(q({},ki),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:ki,borderTopRightRadius:ki,borderBottomLeftRadius:ki,borderBottomRightRadius:ki,boxShadow:Si};function Ei(e){return jo(e)&&"ownerSVGElement"in e}const Ni=(e,t)=>e.depth-t.depth;class Pi{constructor(){this.children=[],this.isDirty=!1}add(e){zt(this.children,e),this.isDirty=!0}remove(e){Wt(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Ni),this.isDirty=!1,this.children.forEach(e)}}function Ai(e,t){const n=Xt.now(),r=o=>{let{timestamp:a}=o;const i=a-n;i>=t&&(jt(r),e(i-t))};return Ot.setup(r,!0),()=>jt(r)}function Li(e){return an(e)?e.get():e}const Ki=["TopLeft","TopRight","BottomLeft","BottomRight"],Mi=Ki.length,Fi=e=>"string"===typeof e?parseFloat(e):e,Ri=e=>"number"===typeof e||Rn.test(e);function Di(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Oi=Hi(0,.5,Or),ji=Hi(.5,.95,Kt);function Hi(e,t,n){return r=>r<e?0:r>t?1:n(Ur(e,t,r))}function Vi(e,t){e.min=t.min,e.max=t.max}function Bi(e,t){Vi(e.x,t.x),Vi(e.y,t.y)}function Ui(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Gi(e,t,n,r,o){return e=Ha(e-=t,1/n,r),void 0!==o&&(e=Ha(e,1/o,r)),e}function zi(e,t,n,r,o){let[a,i,l]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Fn.test(t)&&(t=parseFloat(t),t=Jn(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let l=Jn(a.min,a.max,r);e===a&&(l-=t),e.min=Gi(e.min,t,n,l,o),e.max=Gi(e.max,t,n,l,o)}(e,t[a],t[i],t[l],t.scale,r,o)}const Wi=["x","scaleX","originX"],Yi=["y","scaleY","originY"];function $i(e,t,n,r){zi(e.x,t,Wi,n?n.x:void 0,r?r.x:void 0),zi(e.y,t,Yi,n?n.y:void 0,r?r.y:void 0)}function qi(e){return 0===e.translate&&1===e.scale}function Qi(e){return qi(e.x)&&qi(e.y)}function Xi(e,t){return e.min===t.min&&e.max===t.max}function Zi(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Ji(e,t){return Zi(e.x,t.x)&&Zi(e.y,t.y)}function el(e){return Ta(e.x)/Ta(e.y)}function tl(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class nl{constructor(){this.members=[]}add(e){zt(this.members,e),e.scheduleRender()}remove(e){if(Wt(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const rl={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},ol=["","X","Y","Z"],al={visibility:"hidden"};let il=0;function ll(e,t,n,r){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),r&&(r[e]=0))}function sl(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=cn(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ot,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&sl(r)}function ul(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:o,resetTransform:a}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=il++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Rt.value&&(rl.nodes=rl.calculatedTargetDeltas=rl.calculatedProjections=0),this.nodes.forEach(hl),this.nodes.forEach(bl),this.nodes.forEach(xl),this.nodes.forEach(fl),Rt.addProjectionMetrics&&Rt.addProjectionMetrics(rl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Pi)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Yt),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var n;this.isSVG=Ei(e)&&!(Ei(n=e)&&"svg"===n.tagName),this.instance=e;const{layoutId:r,layout:o,visualElement:a}=this.options;if(a&&!a.current&&a.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(o||r)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=Ai(r,250),xi.hasAnimatedSinceResize&&(xi.hasAnimatedSinceResize=!1,this.nodes.forEach(vl))}))}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&a&&(r||o)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:r,layout:o}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||a.getDefaultTransition()||Il,{onLayoutAnimationStart:l,onLayoutAnimationComplete:s}=a.getProps(),u=!this.targetLayout||!Ji(this.targetLayout,o),c=!n&&r;if(this.options.layoutRoot||this.resumeFrom||c||n&&(u||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e=q(q({},Lt(i,"layout")),{},{onPlay:l,onComplete:s});(a.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,c)}else n||vl(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=o}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),jt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Cl),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&sl(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let o=0;o<this.path.length;o++){const e=this.path[o];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(gl);this.isUpdating||this.nodes.forEach(yl),this.isUpdating=!1,this.nodes.forEach(ml),this.nodes.forEach(cl),this.nodes.forEach(dl),this.clearAllSnapshots();const e=Xt.now();Ht.delta=fn(0,1e3/60,e-Ht.timestamp),Ht.timestamp=e,Ht.isProcessing=!0,Vt.update.process(Ht),Vt.preRender.process(Ht),Vt.render.process(Ht),Ht.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,gi.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(pl),this.sharedNodes.forEach(kl)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ot.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ot.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||Ta(this.snapshot.measuredBox.x)||Ta(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=o(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!a)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Qi(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,o=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||Da(this.latestValues)||o)&&(a(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),Nl((r=n).x),Nl(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(Al))){const{scroll:e}=this.root;e&&(Wa(n.x,e.offset.x),Wa(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(Bi(n,e),null!==(t=this.scroll)&&void 0!==t&&t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:o,options:a}=t;t!==this.root&&o&&a.layoutScroll&&(o.wasRoot&&Bi(n,e),Wa(n.x,o.offset.x),Wa(n.y,o.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Bi(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&$a(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Da(e.latestValues)&&$a(n,e.latestValues)}return Da(this.latestValues)&&$a(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Bi(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Da(e.latestValues))continue;Ra(e.latestValues)&&e.updateSnapshot();const r={x:{min:0,max:0},y:{min:0,max:0}};Bi(r,e.measurePageBox()),$i(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return Da(this.latestValues)&&$i(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=q(q(q({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ht.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:o,layoutId:a}=this.options;if(this.layout&&(o||a)){if(this.resolvedRelativeTargetAt=Ht.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},La(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Bi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,l,s;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,l=this.relativeTarget,s=this.relativeParent.target,Pa(i.x,l.x,s.x),Pa(i.y,l.y,s.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Bi(this.target,this.layout.layoutBox),Ua(this.target,this.targetDelta)):Bi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},La(this.relativeTargetOrigin,this.target,e.target),Bi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Rt.value&&rl.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Ra(this.parent.latestValues)&&!Oa(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty)&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Ht.timestamp&&(r=!1),r)return;const{layout:o,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!o&&!a)return;Bi(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,l=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=n.length;if(!o)return;let a,i;t.x=t.y=1;for(let l=0;l<o;l++){a=n[l],i=a.projectionDelta;const{visualElement:o}=a.options;o&&o.props.style&&"contents"===o.props.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&$a(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Ua(e,i)),r&&Da(a.latestValues)&&$a(e,a.latestValues))}t.x<za&&t.x>Ga&&(t.x=1),t.y<za&&t.y>Ga&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:s}=t;s?(this.projectionDelta&&this.prevProjectionDelta?(Ui(this.prevProjectionDelta.x,this.projectionDelta.x),Ui(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Na(this.projectionDelta,this.layoutCorrected,s,this.latestValues),this.treeScale.x===i&&this.treeScale.y===l&&tl(this.projectionDelta.x,this.prevProjectionDelta.x)&&tl(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",s)),Rt.value&&rl.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},o=q({},this.latestValues),a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},l=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),s=this.getStack(),u=!s||s.members.length<=1,c=Boolean(l&&!u&&!0===this.options.crossfade&&!this.path.some(_l));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;Sl(a.x,e.x,n),Sl(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(La(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){wl(e.x,t.x,n.x,r),wl(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,i,n),d&&function(e,t){return Xi(e.x,t.x)&&Xi(e.y,t.y)}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),Bi(d,this.relativeTarget)),l&&(this.animationValues=o,function(e,t,n,r,o,a){var i,l;if(o)e.opacity=Jn(0,null!==(i=n.opacity)&&void 0!==i?i:1,Oi(r)),e.opacityExit=Jn(null!==(l=t.opacity)&&void 0!==l?l:1,0,ji(r));else if(a){var s,u;e.opacity=Jn(null!==(s=t.opacity)&&void 0!==s?s:1,null!==(u=n.opacity)&&void 0!==u?u:1,r)}for(let c=0;c<Mi;c++){const o="border".concat(Ki[c],"Radius");let a=Di(t,o),i=Di(n,o);void 0===a&&void 0===i||(a||(a=0),i||(i=0),0===a||0===i||Ri(a)===Ri(i)?(e[o]=Math.max(Jn(Fi(a),Fi(i),r),0),(Fn.test(i)||Fn.test(a))&&(e[o]+="%")):e[o]=i)}(t.rotate||n.rotate)&&(e.rotate=Jn(t.rotate||0,n.rotate||0,r))}(o,r,this.latestValues,n,c,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),null===(n=this.resumingFrom)||void 0===n||null===(n=n.currentAnimation)||void 0===n||n.stop(),this.pendingAnimation&&(jt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ot.update((()=>{xi.hasAnimatedSinceResize=!0,yn.layout++,this.motionValue||(this.motionValue=en(0)),this.currentAnimation=function(e,t,n){const r=an(e)?e:en(e);return r.start(Xo("",r,t,n)),r.animation}(this.motionValue,[0,1e3],q(q({},e),{},{isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{yn.layout--},onComplete:()=>{yn.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:o}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&Pl(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Ta(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=Ta(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}Bi(t,n),$a(t,o),Na(this.projectionDeltaWithTransform,this.layoutCorrected,t,o)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new nl);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&ll("z",e,r,this.animationValues);for(let o=0;o<ol.length;o++)ll("rotate".concat(ol[o]),e,r,this.animationValues),ll("skew".concat(ol[o]),e,r,this.animationValues);e.render();for(const o in r)e.setStaticValue(o,r[o]),this.animationValues&&(this.animationValues[o]=r[o]);e.scheduleRender()}getProjectionStyles(e){if(!this.instance||this.isSVG)return;if(!this.isVisible)return al;const t={visibility:""},n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,t.opacity="",t.pointerEvents=Li(null===e||void 0===e?void 0:e.pointerEvents)||"",t.transform=n?n(this.latestValues,""):"none",t;const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=Li(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!Da(this.latestValues)&&(t.transform=n?n({},""):"none",this.hasProjected=!1),t}const o=r.animationValues||r.latestValues;this.applyTransformsToTarget(),t.transform=function(e,t,n){let r="";const o=e.x.translate/t.x,a=e.y.translate/t.y,i=(null===n||void 0===n?void 0:n.z)||0;if((o||a||i)&&(r="translate3d(".concat(o,"px, ").concat(a,"px, ").concat(i,"px) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{transformPerspective:e,rotate:t,rotateX:o,rotateY:a,skewX:i,skewY:l}=n;e&&(r="perspective(".concat(e,"px) ").concat(r)),t&&(r+="rotate(".concat(t,"deg) ")),o&&(r+="rotateX(".concat(o,"deg) ")),a&&(r+="rotateY(".concat(a,"deg) ")),i&&(r+="skewX(".concat(i,"deg) ")),l&&(r+="skewY(".concat(l,"deg) "))}const l=e.x.scale*t.x,s=e.y.scale*t.y;return 1===l&&1===s||(r+="scale(".concat(l,", ").concat(s,")")),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,o),n&&(t.transform=n(o,t.transform));const{x:a,y:i}=this.projectionDelta;var l,s;(t.transformOrigin="".concat(100*a.origin,"% ").concat(100*i.origin,"% 0"),r.animationValues)?t.opacity=r===this?null!==(l=null!==(s=o.opacity)&&void 0!==s?s:this.latestValues.opacity)&&void 0!==l?l:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:t.opacity=r===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0;for(const u in wi){if(void 0===o[u])continue;const{correct:e,applyTo:n,isCSSVariable:a}=wi[u],i="none"===t.transform?o[u]:e(o[u],r);if(n){const e=n.length;for(let r=0;r<e;r++)t[n[r]]=i}else a?this.options.visualElement.renderState.vars[u]=i:t[u]=i}return this.options.layoutId&&(t.pointerEvents=r===this?Li(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),t}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(gl),this.root.sharedNodes.clear()}}}function cl(e){e.updateLayout()}function dl(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:o}=e.options,a=n.source!==e.layout.source;"size"===o?Ma((e=>{const r=a?n.measuredBox[e]:n.layoutBox[e],o=Ta(r);r.min=t[e].min,r.max=r.min+o})):Pl(o,n.layoutBox,t)&&Ma((r=>{const o=a?n.measuredBox[r]:n.layoutBox[r],i=Ta(t[r]);o.max=o.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+i)}));const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Na(i,t,n.layoutBox);const l={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?Na(l,e.applyTransform(r,!0),n.measuredBox):Na(l,t,n.layoutBox);const s=!Qi(i);let u=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:o,layout:a}=r;if(o&&a){const i={x:{min:0,max:0},y:{min:0,max:0}};La(i,n.layoutBox,o.layoutBox);const l={x:{min:0,max:0},y:{min:0,max:0}};La(l,t,a.layoutBox),Ji(i,l)||(u=!0),r.options.layoutRoot&&(e.relativeTarget=l,e.relativeTargetOrigin=i,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:l,layoutDelta:i,hasLayoutChanged:s,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function hl(e){Rt.value&&rl.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function fl(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function pl(e){e.clearSnapshot()}function gl(e){e.clearMeasurements()}function yl(e){e.isLayoutDirty=!1}function ml(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function vl(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function bl(e){e.resolveTargetDelta()}function xl(e){e.calcProjection()}function Cl(e){e.resetSkewAndRotation()}function kl(e){e.removeLeadSnapshot()}function Sl(e,t,n){e.translate=Jn(t.translate,0,n),e.scale=Jn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function wl(e,t,n,r){e.min=Jn(t.min,n.min,r),e.max=Jn(t.max,n.max,r)}function _l(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Il={duration:.45,ease:[.4,0,.1,1]},Tl=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),El=Tl("applewebkit/")&&!Tl("chrome/")?Math.round:Kt;function Nl(e){e.min=El(e.min),e.max=El(e.max)}function Pl(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=el(t),o=el(n),a=.2,!(Math.abs(r-o)<=a));var r,o,a}function Al(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const Ll=ul({attachResizeListener:(e,t)=>ka(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Kl={current:void 0},Ml=ul({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Kl.current){const e=new Ll({});e.mount(window),e.setOptions({layoutScroll:!0}),Kl.current=e}return Kl.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Fl={pan:{Feature:class extends ma{constructor(){super(...arguments),this.removePointerDownListener=Kt}onPointerDown(e){this.session=new Ja(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Qa(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:pi(e),onStart:pi(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&Ot.postRender((()=>r(e,t)))}}}mount(){this.removePointerDownListener=_a(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends ma{constructor(e){super(e),this.removeGroupControls=Kt,this.removeListeners=Kt,this.controls=new hi(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Kt}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Ml,MeasureLayout:Ii}};function Rl(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"===typeof e){var r;let o=document;t&&(o=t.current);const a=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:o.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}(e),r=new AbortController;return[n,q(q({passive:!0},t),{},{signal:r.signal}),()=>r.abort()]}function Dl(e){return!("touch"===e.pointerType||Ca())}function Ol(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const o=r["onHover"+n];o&&Ot.postRender((()=>o(t,wa(t))))}const jl=(e,t)=>!!t&&(e===t||jl(e,t.parentElement)),Hl=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const Vl=new WeakSet;function Bl(e){return t=>{"Enter"===t.key&&e(t)}}function Ul(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function Gl(e){return Sa(e)&&!Ca()}function zl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,o,a]=Rl(e,n),i=e=>{const r=e.currentTarget;if(!Gl(e))return;Vl.add(r);const a=t(r,e),i=(e,t)=>{window.removeEventListener("pointerup",l),window.removeEventListener("pointercancel",s),Vl.has(r)&&Vl.delete(r),Gl(e)&&"function"===typeof a&&a(e,{success:t})},l=e=>{i(e,r===window||r===document||n.useGlobalTarget||jl(r,e.target))},s=e=>{i(e,!1)};window.addEventListener("pointerup",l,o),window.addEventListener("pointercancel",s,o)};return r.forEach((e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",i,o),Ho(e)&&(e.addEventListener("focus",(e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=Bl((()=>{if(Vl.has(n))return;Ul(n,"down");const e=Bl((()=>{Ul(n,"up")}));n.addEventListener("keyup",e,t),n.addEventListener("blur",(()=>Ul(n,"cancel")),t)}));n.addEventListener("keydown",r,t),n.addEventListener("blur",(()=>n.removeEventListener("keydown",r)),t)})(e,o))),t=e,Hl.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))})),a}function Wl(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const o=r["onTap"+("End"===n?"":n)];o&&Ot.postRender((()=>o(t,wa(t))))}const Yl=["root"],$l=new WeakMap,ql=new WeakMap,Ql=e=>{const t=$l.get(e.target);t&&t(e)},Xl=e=>{e.forEach(Ql)};function Zl(e,t,n){const r=function(e){let{root:t}=e,n=Et(e,Yl);const r=t||document;ql.has(r)||ql.set(r,{});const o=ql.get(r),a=JSON.stringify(n);return o[a]||(o[a]=new IntersectionObserver(Xl,q({root:t},n))),o[a]}(t);return $l.set(e,n),r.observe(e),()=>{$l.delete(e),r.unobserve(e)}}const Jl={some:0,all:1};const es={inView:{Feature:class extends ma{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:o}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:Jl[r]};return Zl(this.node.current,a,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,o&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),a=t?n:r;a&&a(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends ma{mount(){const{current:e}=this.node;e&&(this.unmount=zl(e,((e,t)=>(Wl(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return Wl(this.node,e,n?"End":"Cancel")})),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends ma{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=hn(ka(this.node.current,"focus",(()=>this.onFocus())),ka(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends ma{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,o,a]=Rl(e,n),i=e=>{if(!Dl(e))return;const{target:n}=e,r=t(n,e);if("function"!==typeof r||!n)return;const a=e=>{Dl(e)&&(r(e),n.removeEventListener("pointerleave",a))};n.addEventListener("pointerleave",a,o)};return r.forEach((e=>{e.addEventListener("pointerenter",i,o)})),a}(e,((e,t)=>(Ol(this.node,t,"Start"),e=>Ol(this.node,e,"End")))))}unmount(){}}}},ts={layout:{ProjectionNode:Ml,MeasureLayout:Ii}},ns=(0,r.createContext)({strict:!1}),rs=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),os=(0,r.createContext)({});function as(e){return Tt(e.animate)||ia.some((t=>oa(e[t])))}function is(e){return Boolean(as(e)||e.variants)}function ls(e){const{initial:t,animate:n}=function(e,t){if(as(e)){const{initial:t,animate:n}=e;return{initial:!1===t||oa(t)?t:void 0,animate:oa(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(os));return(0,r.useMemo)((()=>({initial:t,animate:n})),[ss(t),ss(n)])}function ss(e){return Array.isArray(e)?e.join(" "):e}const us="undefined"!==typeof window,cs={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ds={};for(const Ic in cs)ds[Ic]={isEnabled:e=>cs[Ic].some((t=>!!e[t]))};const hs=Symbol.for("motionComponentSymbol");function fs(e,t,n){return(0,r.useCallback)((r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):Xa(n)&&(n.current=r))}),[t])}const ps=us?r.useLayoutEffect:r.useEffect;function gs(e,t,n,o,a){var i,l,s,u;const{visualElement:c}=(0,r.useContext)(os),d=(0,r.useContext)(ns),h=(0,r.useContext)(mi),f=(0,r.useContext)(rs).reducedMotion,p=(0,r.useRef)(null);o=o||d.renderer,!p.current&&o&&(p.current=o(e,{visualState:t,parent:c,props:n,presenceContext:h,blockInitialAnimation:!!h&&!1===h.initial,reducedMotionConfig:f}));const g=p.current,y=(0,r.useContext)(bi);!g||g.projection||!a||"html"!==g.type&&"svg"!==g.type||function(e,t,n,r){const{layoutId:o,layout:a,drag:i,dragConstraints:l,layoutScroll:s,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:ys(e.parent)),e.projection.setOptions({layoutId:o,layout:a,alwaysMeasureLayout:Boolean(i)||l&&Xa(l),visualElement:e,animationType:"string"===typeof a?a:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:s,layoutRoot:u})}(p.current,n,a,y);const m=(0,r.useRef)(!1);(0,r.useInsertionEffect)((()=>{g&&m.current&&g.update(n,h)}));const v=n[un],b=(0,r.useRef)(Boolean(v)&&!(null!==(i=(l=window).MotionHandoffIsComplete)&&void 0!==i&&i.call(l,v))&&(null===(s=(u=window).MotionHasOptimisedAnimation)||void 0===s?void 0:s.call(u,v)));return ps((()=>{g&&(m.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),gi.render(g.render),b.current&&g.animationState&&g.animationState.animateChanges())})),(0,r.useEffect)((()=>{g&&(!b.current&&g.animationState&&g.animationState.animateChanges(),b.current&&(queueMicrotask((()=>{var e,t;null===(e=(t=window).MotionHandoffMarkAsComplete)||void 0===e||e.call(t,v)})),b.current=!1))})),g}function ys(e){if(e)return!1!==e.options.allowProjection?e.projection:ys(e.parent)}function ms(e){var t,n;let{preloadedFeatures:o,createVisualElement:a,useRender:i,useVisualState:l,Component:s}=e;function u(e,t){let n;const o=q(q(q({},(0,r.useContext)(rs)),e),{},{layoutId:vs(e)}),{isStatic:u}=o,c=ls(e),d=l(e,u);if(!u&&us){!function(){(0,r.useContext)(ns).strict;0}();const e=function(e){const{drag:t,layout:n}=ds;if(!t&&!n)return{};const r=q(q({},t),n);return{MeasureLayout:null!==t&&void 0!==t&&t.isEnabled(e)||null!==n&&void 0!==n&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(o);n=e.MeasureLayout,c.visualElement=gs(s,d,o,a,e.ProjectionNode)}return(0,gt.jsxs)(os.Provider,{value:c,children:[n&&c.visualElement?(0,gt.jsx)(n,q({visualElement:c.visualElement},o)):null,i(s,e,fs(d,c.visualElement,t),d,u,c.visualElement)]})}o&&function(e){for(const t in e)ds[t]=q(q({},ds[t]),e[t])}(o),u.displayName="motion.".concat("string"===typeof s?s:"create(".concat(null!==(t=null!==(n=s.displayName)&&void 0!==n?n:s.name)&&void 0!==t?t:"",")"));const c=(0,r.forwardRef)(u);return c[hs]=s,c}function vs(e){let{layoutId:t}=e;const n=(0,r.useContext)(vi).id;return n&&void 0!==t?n+"-"+t:t}function bs(e,t){let{layout:n,layoutId:r}=t;return Ut.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!wi[e]||"opacity"===e)}const xs=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Cs=q(q({},kn),{},{transform:Math.round}),ks=q(q({borderWidth:Rn,borderTopWidth:Rn,borderRightWidth:Rn,borderBottomWidth:Rn,borderLeftWidth:Rn,borderRadius:Rn,radius:Rn,borderTopLeftRadius:Rn,borderTopRightRadius:Rn,borderBottomRightRadius:Rn,borderBottomLeftRadius:Rn,width:Rn,maxWidth:Rn,height:Rn,maxHeight:Rn,top:Rn,right:Rn,bottom:Rn,left:Rn,padding:Rn,paddingTop:Rn,paddingRight:Rn,paddingBottom:Rn,paddingLeft:Rn,margin:Rn,marginTop:Rn,marginRight:Rn,marginBottom:Rn,marginLeft:Rn,backgroundPositionX:Rn,backgroundPositionY:Rn},{rotate:Mn,rotateX:Mn,rotateY:Mn,rotateZ:Mn,scale:wn,scaleX:wn,scaleY:wn,scaleZ:wn,skew:Mn,skewX:Mn,skewY:Mn,distance:Rn,translateX:Rn,translateY:Rn,translateZ:Rn,x:Rn,y:Rn,z:Rn,perspective:Rn,transformPerspective:Rn,opacity:Sn,originX:jn,originY:jn,originZ:Rn}),{},{zIndex:Cs,fillOpacity:Sn,strokeOpacity:Sn,numOctaves:Cs}),Ss={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ws=Bt.length;function _s(e,t,n){const{style:r,vars:o,transformOrigin:a}=e;let i=!1,l=!1;for(const s in t){const e=t[s];if(Ut.has(s))i=!0;else if(vn(s))o[s]=e;else{const t=xs(e,ks[s]);s.startsWith("origin")?(l=!0,a[s]=t):r[s]=t}}if(t.transform||(i||n?r.transform=function(e,t,n){let r="",o=!0;for(let a=0;a<ws;a++){const i=Bt[a],l=e[i];if(void 0===l)continue;let s=!0;if(s="number"===typeof l?l===(i.startsWith("scale")?1:0):0===parseFloat(l),!s||n){const e=xs(l,ks[i]);s||(o=!1,r+="".concat(Ss[i]||i,"(").concat(e,") ")),n&&(t[i]=e)}}return r=r.trim(),n?r=n(t,o?"":r):o&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;r.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const Is=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ts(e,t,n){for(const r in t)an(t[r])||bs(r,n)||(e[r]=t[r])}function Es(e,t){const n={};return Ts(n,e.style||{},e),Object.assign(n,function(e,t){let{transformTemplate:n}=e;return(0,r.useMemo)((()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return _s(e,t,n),Object.assign({},e.vars,e.style)}),[t])}(e,t)),n}function Ns(e,t){const n={},r=Es(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Ps={offset:"stroke-dashoffset",array:"stroke-dasharray"},As={offset:"strokeDashoffset",array:"strokeDasharray"};const Ls=["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"];function Ks(e,t,n,r,o){let{attrX:a,attrY:i,attrScale:l,pathLength:s,pathSpacing:u=1,pathOffset:c=0}=t;if(_s(e,Et(t,Ls),r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:d,style:h}=e;var f,p;(d.transform&&(h.transform=d.transform,delete d.transform),h.transform||d.transformOrigin)&&(h.transformOrigin=null!==(f=d.transformOrigin)&&void 0!==f?f:"50% 50%",delete d.transformOrigin);h.transform&&(h.transformBox=null!==(p=null===o||void 0===o?void 0:o.transformBox)&&void 0!==p?p:"fill-box",delete d.transformBox);void 0!==a&&(d.x=a),void 0!==i&&(d.y=i),void 0!==l&&(d.scale=l),void 0!==s&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const a=o?Ps:As;e[a.offset]=Rn.transform(-r);const i=Rn.transform(t),l=Rn.transform(n);e[a.array]="".concat(i," ").concat(l)}(d,s,u,c,!1)}const Ms=()=>q(q({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}}),Fs=e=>"string"===typeof e&&"svg"===e.toLowerCase();function Rs(e,t,n,o){const a=(0,r.useMemo)((()=>{const n=Ms();return Ks(n,t,Fs(o),e.transformTemplate,e.style),q(q({},n.attrs),{},{style:q({},n.style)})}),[t]);if(e.style){const t={};Ts(t,e.style,e),a.style=q(q({},t),a.style)}return a}const Ds=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Os(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ds.has(e)}let js=e=>!Os(e);try{(Hs=require("@emotion/is-prop-valid").default)&&(js=e=>e.startsWith("on")?!Os(e):Hs(e))}catch(_c){}var Hs;const Vs=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Bs(e){return"string"===typeof e&&!e.includes("-")&&!!(Vs.indexOf(e)>-1||/[A-Z]/.test(e))}function Us(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,o,a,i)=>{let{latestValues:l}=a;const s=(Bs(t)?Rs:Ns)(n,l,i,t),u=function(e,t,n){const r={};for(const o in e)"values"===o&&"object"===typeof e.values||(js(o)||!0===n&&Os(o)||!t&&!Os(o)||e.draggable&&o.startsWith("onDrag"))&&(r[o]=e[o]);return r}(n,"string"===typeof t,e),c=t!==r.Fragment?q(q(q({},u),s),{},{ref:o}):{},{children:d}=n,h=(0,r.useMemo)((()=>an(d)?d.get():d),[d]);return(0,r.createElement)(t,q(q({},c),{},{children:h}))}}const Gs=["transitionEnd","transition"];const zs=e=>(t,n)=>{const o=(0,r.useContext)(os),a=(0,r.useContext)(mi),i=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:o,createRenderState:a}=e;return{latestValues:Ws(t,n,r,o),renderState:a()}}(e,t,o,a);return n?i():function(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}(i)};function Ws(e,t,n,r){const o={},a=r(e,{});for(const h in a)o[h]=Li(a[h]);let{initial:i,animate:l}=e;const s=as(e),u=is(e);t&&u&&!s&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===l&&(l=t.animate));let c=!!n&&!1===n.initial;c=c||!1===i;const d=c?l:i;if(d&&"boolean"!==typeof d&&!Tt(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const r=Pt(e,t[n]);if(r){const{transitionEnd:e,transition:t}=r,n=Et(r,Gs);for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[c?e.length-1:0]}null!==e&&(o[r]=e)}for(const r in e)o[r]=e[r]}}}return o}function Ys(e,t,n){const{style:r}=e,o={};for(const i in r){var a;(an(r[i])||t.style&&an(t.style[i])||bs(i,e)||void 0!==(null===n||void 0===n||null===(a=n.getValue(i))||void 0===a?void 0:a.liveStyle))&&(o[i]=r[i])}return o}const $s={useVisualState:zs({scrapeMotionValuesFromProps:Ys,createRenderState:Is})};function qs(e,t,n){const r=Ys(e,t,n);for(const o in e)if(an(e[o])||an(t[o])){r[-1!==Bt.indexOf(o)?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o]=e[o]}return r}const Qs={useVisualState:zs({scrapeMotionValuesFromProps:qs,createRenderState:Ms})};function Xs(e,t){return function(n){let{forwardMotionProps:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forwardMotionProps:!1};return ms(q(q({},Bs(n)?Qs:$s),{},{preloadedFeatures:e,useRender:Us(r),createVisualElement:t,Component:n}))}}const Zs=e=>t=>t.test(e),Js=[kn,Rn,Fn,Mn,On,Dn,{test:e=>"auto"===e,parse:e=>e}],eu=e=>Js.find(Zs(e)),tu=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),nu=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function ru(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');const[r,o]=function(e){const t=nu.exec(e);if(!t)return[,];const[,n,r,o]=t;return["--".concat(null!==n&&void 0!==n?n:r),o]}(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const e=a.trim();return tu(e)?parseFloat(e):e}return xn(o)?ru(o,t,n+1):o}const ou=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);const au=new Set(["brightness","contrast","saturate","opacity"]);function iu(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(In)||[];if(!r)return e;const o=n.replace(r,"");let a=au.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+o+")"}const lu=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,su=q(q({},Qn),{},{getAnimatableNone:e=>{const t=e.match(lu);return t?t.map(iu).join(" "):e}}),uu=q(q({},ks),{},{color:Vn,backgroundColor:Vn,outlineColor:Vn,fill:Vn,stroke:Vn,borderColor:Vn,borderTopColor:Vn,borderRightColor:Vn,borderBottomColor:Vn,borderLeftColor:Vn,filter:su,WebkitFilter:su}),cu=e=>uu[e];function du(e,t){let n=cu(e);return n!==su&&(n=Qn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const hu=new Set(["auto","none","0"]);class fu extends Co{constructor(e,t,n,r,o){super(e,t,n,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let n=e[l];if("string"===typeof n&&(n=n.trim(),xn(n))){const r=ru(n,t.current);void 0!==r&&(e[l]=r),l===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!Gt.has(n)||2!==e.length)return;const[r,o]=e,a=eu(r),i=eu(o);if(a!==i)if(co(a)&&co(i))for(let l=0;l<e.length;l++){const t=e[l];"string"===typeof t&&(e[l]=parseFloat(t))}else po[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let o=0;o<e.length;o++)(null===e[o]||("number"===typeof(r=e[o])?0===r:null===r||"none"===r||"0"===r||ou(r)))&&n.push(o);var r;n.length&&function(e,t,n){let r,o=0;for(;o<e.length&&!r;){const t=e[o];"string"===typeof t&&!hu.has(t)&&Wn(t).values.length&&(r=e[o]),o++}if(r&&n)for(const a of t)e[a]=du(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=po[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const o=t.getValue(n);o&&o.jump(this.measuredOrigin,!1);const a=r.length-1,i=r[a];r[a]=po[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach((e=>{let[n,r]=e;t.getValue(n).set(r)})),this.resolveNoneKeyframes()}}const pu=[...Js,Vn,Qn],gu={current:null},yu={current:!1};const mu=new WeakMap;const vu=["willChange"],bu=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xu{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:a,visualState:i}=e,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Co,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Xt.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,Ot.render(this.render,!1,!0))};const{latestValues:s,renderState:u}=i;this.latestValues=s,this.baseTarget=q({},s),this.initialValues=n.initial?q({},s):{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=l,this.blockInitialAnimation=Boolean(a),this.isControllingVariants=as(n),this.isVariantNode=is(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const c=this.scrapeMotionValuesFromProps(n,{},this),{willChange:d}=c,h=Et(c,vu);for(const f in h){const e=h[f];void 0!==s[f]&&an(e)&&e.set(s[f],!1)}}mount(e){this.current=e,mu.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),yu.current||function(){if(yu.current=!0,us)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>gu.current=e.matches;e.addListener(t),t()}else gu.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||gu.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),jt(this.notifyUpdate),jt(this.render),this.valueSubscriptions.forEach((e=>e())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Ut.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&Ot.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),o=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,(()=>{r(),o(),a&&a(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in ds){const t=ds[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<bu.length;n++){const t=bu[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const o=t[r],a=n[r];if(an(o))e.addValue(r,o);else if(an(a))e.addValue(r,en(o,{owner:e}));else if(a!==o)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(o):t.hasAnimated||t.set(o)}else{const t=e.getStaticValue(r);e.addValue(r,en(void 0!==t?t:o,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=en(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==r&&null!==r&&("string"===typeof r&&(tu(r)||ou(r))?r=parseFloat(r):!(e=>pu.find(Zs(e)))(r)&&Qn.test(t)&&(r=du(e,t)),this.setBaseTarget(e,an(r)?r.get():r)),an(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){var r;const o=Pt(this.props,t,null===(r=this.presenceContext)||void 0===r?void 0:r.custom);o&&(n=o[e])}if(t&&void 0!==n)return n;const o=this.getBaseTargetFromProps(this.props,e);return void 0===o||an(o)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:o}on(e,t){return this.events[e]||(this.events[e]=new Yt),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}class Cu extends xu{constructor(){super(...arguments),this.KeyframeResolver=fu}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;an(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent="".concat(e))})))}}function ku(e,t,n,r){let{style:o,vars:a}=t;Object.assign(e.style,o,r&&r.getProjectionStyles(n));for(const i in a)e.style.setProperty(i,a[i])}class Su extends Cu{constructor(){super(...arguments),this.type="html",this.renderInstance=ku}readValueFromInstance(e,t){var n,r;if(Ut.has(t))return null!==(n=this.projection)&&void 0!==n&&n.isProjecting?lo(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return so(n,t)})(e,t);{const n=(r=e,window.getComputedStyle(r)),o=(vn(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof o?o.trim():o}}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return qa(e,n)}build(e,t,n){_s(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return Ys(e,t,n)}}const wu=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class _u extends Cu{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ka}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ut.has(t)){const e=cu(t);return e&&e.default||0}return t=wu.has(t)?t:sn(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return qs(e,t,n)}build(e,t,n){Ks(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){ku(e,t,void 0,r);for(const o in t.attrs)e.setAttribute(wu.has(o)?o:sn(o),t.attrs[o])}(e,t,0,r)}mount(e){this.isSVGTag=Fs(e.tagName),super.mount(e)}}const Iu=(e,t)=>Bs(e)?new _u(t):new Su(t,{allowProjection:e!==r.Fragment}),Tu=It(Xs(q(q(q(q({},ba),es),Fl),ts),Iu)),Eu=e=>["\u2460","\u2461","\u2462","\u2463"].includes(e.trim()),Nu=e=>{const t=["`","?","^","\u3002","\u3001","!","&","$","\u2026","#","~",",","."],n=e.trim(),r=t.includes(n);return console.log('[styleUtils isSpecialSymbolLayer8] input keycode: "'.concat(e,'", trimmedKeycode: "').concat(n,'", targetSymbols: [').concat(t.join(", "),"], result: ").concat(r)),r},Pu=e=>{const t=["+","_","*","-","@","\u30fb","&","|","%","\uffe5"],n=e.trim(),r=t.includes(n);return console.log('[styleUtils isSpecialSymbolLayer7] input keycode: "'.concat(e,'", trimmedKeycode: "').concat(n,'", targetSymbols: [').concat(t.join(", "),"], result: ").concat(r)),r},Au=e=>{const t=["'","<",">",'"',"(",")",":","\u300c","\u300d",";","{","}"],n=e.trim(),r=t.includes(n);return console.log('[styleUtils isSpecialSymbolLayer6] input keycode: "'.concat(e,'", trimmedKeycode: "').concat(n,'", targetSymbols: [').concat(t.join(", "),"], result: ").concat(r)),r},Lu=e=>{const t=["_","-","@","/","\xb0"],n=e.trim(),r=t.includes(n);return console.log('[styleUtils isSpecialSymbolLayer9] input keycode: "'.concat(e,'", trimmedKeycode: "').concat(n,'", targetSymbols: [').concat(t.join(", "),"], result: ").concat(r)),r},Ku=e=>{const t=[":",'"',"'",";"],n=e.trim(),r=t.includes(n);return console.log('[styleUtils isSpecialSymbolLayer10] input keycode: "'.concat(e,'", trimmedKeycode: "').concat(n,'", targetSymbols: [').concat(t.join(", "),"], result: ").concat(r)),r},Mu=e=>{let{layerData:t,layoutIndex:n,layoutTitle:o,cols:a,fixedWidth:i,showKeyLabels:l,lastInvalidLayerIndex:s,lastInvalidKeyCode:u,activePractice:c,practice:d,currentFunctionKeyMap:h,training:f,className:p="",isInvalidInputTarget:g}=e;const y=(0,r.useCallback)(((e,t)=>{var r;let o=(null!==e&&void 0!==e?e:"").trim();const a=""===o;let i,s=o,u={className:null,overrideKey:null},p=g(t,n,t);if(f&&l){const e=h[t];"\u62d7\u97f3\u62e1\u5f35\uff11"===d&&3===n&&["\u3043","\u3047"].includes(o)?s=o:"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff11"===d?6===n?a&&e&&(s=e):2===n&&(s="____"):"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff12"===d?7===n?e&&(s=e):2===n&&(s="____"):"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13"===d?8===n?e&&(s=e):2===n&&(s="____"):3===n?["\u62d71","\u62d72","\u62d73","\u62d74"].includes(o)&&(s="____"):2===n&&e&&(s=e)}if(l&&c&&"function"===typeof c.getHighlightClassName){console.log('[KeyboardLayout] PRE-CALL getHighlightClassName for key: "'.concat(o,'", layoutIndex: ').concat(n,", keyIndex: ").concat(t,", activePractice.status: ").concat(c.status,", activePractice.targetChar: ").concat(c.targetChar,", currentTarget (if available):"),c.currentTarget);try{u=c.getHighlightClassName(o,n,t)}catch(x){console.error('[KeyboardLayout] ERROR calling getHighlightClassName for key "'.concat(o,'" on layer ').concat(n,":"),x)}}if(!f){let e="";const r="bg-white dark:bg-gray-700",a="text-gray-900 dark:text-gray-100";let i="";const l=8===n&&Nu(o),s=7===n&&Pu(o),u=6===n&&Au(o),c=9===n&&Lu(o),d=10===n&&Ku(o);return Eu(o)?i=" text-3xl":(l||s||u||c||d)&&(i=" text-2xl"),8===n&&console.log('[KeyboardLayout renderKey !training] Layer 8 Key: "'.concat(o,'", isSpecialSymbolLayer8 evaluated to: ').concat(l,', Calculated fontSizeClass: "').concat(i,'"')),7===n&&console.log('[KeyboardLayout renderKey !training] Layer 7 Key: "'.concat(o,'", isSpecialSymbolLayer7 evaluated to: ').concat(s,', Calculated fontSizeClass: "').concat(i,'"')),6===n&&console.log('[KeyboardLayout renderKey !training] Layer 6 Key: "'.concat(o,'", isSpecialSymbolLayer6 evaluated to: ').concat(u,', Calculated fontSizeClass: "').concat(i,'"')),6===n&&console.log('[KeyboardLayout renderKey !training] Layer 6 Key: "'.concat(o,'", isSpecialSymbolLayer6 evaluated to: ').concat(u,', Calculated fontSizeClass: "').concat(i,'"')),9===n&&console.log('[KeyboardLayout renderKey !training] Layer 9 Key: "'.concat(o,'", isSpecialSymbolLayer9 evaluated to: ').concat(c,', Calculated fontSizeClass: "').concat(i,'"')),10===n&&console.log('[KeyboardLayout renderKey !training] Layer 10 Key: "'.concat(o,'", isSpecialSymbolLayer10 evaluated to: ').concat(d,', Calculated fontSizeClass: "').concat(i,'"')),8===n&&o===P?(console.log('[KeyboardLayout renderKey !training] Layer 8 "\uff1d\\n\u8a18\u53f7" key. Applying standardKeyBgColor and standardKeyTextColor directly.'),e="".concat(r," ").concat(a)):[2,7,8,9,10].includes(n)&&"\u8a18\u53f7"===o?(console.log("[KeyboardLayout renderKey !training] Layer ".concat(n,' "\u8a18\u53f7" key. Applying standardKeyBgColor and standardKeyTextColor directly.')),e="".concat(r," ").concat(a)):(y=o,console.log('[styleUtils getKeyStyle] Called with keycode: "'.concat(y,'"')),e=y?"\u30db\u30fc\u30eb\u30c9"===y?"bg-gray-400 text-gray-500":"\u8a18\u53f7"===y?"bg-blue-100 text-blue-700 font-bold":"=\n\u8a18\u53f7"===y?(console.log('[styleUtils getKeyStyle] Matched "=\\n\u8a18\u53f7". Returning green highlight.'),"bg-green-100 text-green-700 font-bold"):"bg-white text-black":"bg-gray-300 text-gray-400",console.log('[KeyboardLayout renderKey !training] For key "'.concat(o,'" on layer ').concat(n,', getKeyStyle returned: "').concat(e,'"')),e.includes("text-")||(e="".concat(e," ").concat(a).trim()),e.includes("bg-")||(e="".concat(e," ").concat(r).trim())),(0,gt.jsx)(Tu.div,{className:"border rounded p-3 text-center shadow flex justify-center items-center ".concat(e," ").concat(i||"text-sm"),whileHover:{scale:1.05},style:{minHeight:"3rem"},children:(0,gt.jsx)("code",{style:{whiteSpace:"pre-line"},children:(null!==o&&void 0!==o?o:"").split(/\r?\n/).map(((e,t,n)=>(0,gt.jsxs)("span",{children:[e,t<n.length-1&&(0,gt.jsx)("br",{})]},t)))})},t)}var y;let m="";if(Eu(o)?m=" text-3xl":(8===n&&Nu(o)||6===n&&Au(o)||7===n&&Pu(o)||10===n&&Ku(o)||9===n&&Lu(o))&&(m=" text-2xl"),l){var v;const e=null!==(v=u.overrideKey)&&void 0!==v?v:s;i=""===e?"\n":e,"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13"===d&&o===P&&(i=P)}else i=a?"\n":"____";const b="".concat("border rounded p-3 text-center shadow flex justify-center items-center whitespace-pre-line"," ").concat(null!==(r=u.className)&&void 0!==r?r:""," ").concat(p?"debug-invalid-key":""," ").concat(m||"text-sm");return"\u306f\u884c"===o&&2===n&&f&&console.log('[KeyboardLayout "\u306f\u884c" FINAL_CLASS_CHECK] finalClassName: "'.concat(b,'", highlightResult.className: "').concat(u.className,'"')),(0,gt.jsx)("div",{className:b,style:{minHeight:"3rem",backgroundColor:p?"rgba(254, 202, 202, 0.5)":void 0},children:i},t)}),[n,l,c,d,h,f,u,s,g]);return t?(0,gt.jsxs)("div",{className:"keyboard-layout bg-gray-100 p-2 rounded shadow-md ".concat(p),style:{width:i},children:[(0,gt.jsx)("h2",{className:"text-center font-semibold mb-2 text-sm",children:o}),(0,gt.jsx)("div",{className:"grid gap-1",style:{gridTemplateColumns:"repeat(".concat(a,", minmax(0, 1fr))")},children:t.map(((e,t)=>y(e,t)))})]}):null},Fu=e=>"\u304b\u306a\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===e||"\u8a18\u53f7\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===e||"\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===e||"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===e||"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===e,Ru=e=>{var t;let{practice:n,handlePracticeSelect:r,gIdx:o,dIdx:a,headingChars:i,isChallengeFinished:l,activePractice:s,isRandomMode:u,displayLayerIndices:c,keyboardLayers:d,cols:h,fixedWidth:f,showKeyLabels:p,lastInvalidKeyCode:g,lastInvalidLayerIndex:y,currentFunctionKeyMap:m,training:v,isInvalidInputTarget:b,typedChar:x,isAlphaNumericMode:C=!1,isKanaStepUpOpen:k,setIsKanaStepUpOpen:S,isAlphaNumericSymbolStepUpOpen:w,setIsAlphaNumericSymbolStepUpOpen:_}=e;console.log("[PracticeView] Component function executed (Top Level)"),console.log('[PracticeView RENDER PROPS] practice: "'.concat(n,'", headingChars (prop received):'),i,"activePractice exists: ".concat(!!s));return(0,gt.jsx)(gt.Fragment,{children:n?(0,gt.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-start",children:[(0,gt.jsx)(wt,{practice:n,isAlphaNumericMode:C,handlePracticeSelect:r,isKanaStepUpOpen:k,setIsKanaStepUpOpen:S,isAlphaNumericSymbolStepUpOpen:w,setIsAlphaNumericSymbolStepUpOpen:_}),(0,gt.jsxs)("div",{className:"col-span-2 grid grid-cols-2 gap-4",children:[(0,gt.jsx)("div",{className:"col-start-1 justify-self-center w-full",children:(0,gt.jsxs)(gt.Fragment,{children:["countdown"===(null===s||void 0===s?void 0:s.status)&&(null===s||void 0===s?void 0:s.countdownValue)&&s.countdownValue>0&&(0,gt.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,gt.jsx)("div",{className:"text-5xl font-bold",children:s.countdownValue})}),"countdown"!==(null===s||void 0===s?void 0:s.status)&&!l&&(0,gt.jsxs)(gt.Fragment,{children:[Fu(n)&&s&&"running"===s.status&&"number"===typeof s.challengeTimer&&"number"===typeof s.challengeTotalTime&&s.challengeTotalTime>0&&(0,gt.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-2 dark:bg-gray-700",children:(()=>{const e=s.challengeTimer/s.challengeTotalTime*100;let t="bg-blue-600";return e<=10?t="bg-red-600":e<=20&&(t="bg-green-500"),(0,gt.jsx)("div",{className:"".concat(t," h-2.5 rounded-full transition-all duration-300 ease-linear"),style:{width:"".concat(Math.max(0,e),"%")}})})()}),console.log("[PracticeView before PracticeHeading] Passing headingChars:",i,"to PracticeHeading"),(0,gt.jsx)(_t,{isRandomMode:Fu(n)||u,practice:n,gIdx:o,dIdx:a,headingChars:i,isFinished:l,activePractice:s,typedEndIndex:null===(null===s||void 0===s?void 0:s.typedEndIndex)||null===s||void 0===s?void 0:s.typedEndIndex,status:null===s||void 0===s?void 0:s.status,typedChar:x,currentTargetCharForHighlight:"\u62d7\u97f3\u62e1\u5f35\uff12"===n&&null!==s&&void 0!==s&&s.currentTarget&&"object"===typeof s.currentTarget&&"type"in s.currentTarget&&"gairaigo"===s.currentTarget.type?s.currentTarget.char:"string"===typeof(null===s||void 0===s?void 0:s.currentTarget)?s.currentTarget:void 0})]}),"Caps Lock\u64cd\u4f5c"===n&&void 0!==(null===s||void 0===s?void 0:s.isCapsLockOn)&&(0,gt.jsx)("div",{className:"text-sm font-semibold p-1 rounded mt-2 text-center ".concat(s.isCapsLockOn?"bg-green-200 text-green-800 dark:bg-green-700 dark:text-green-200":"bg-yellow-200 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-200 animate-pulse"),children:s.isCapsLockOn?"CAPS LOCK: ON":"CAPS LOCK\u3092ON\u306b\u3057\u3066\u304f\u3060\u3055\u3044"})]})}),l?(0,gt.jsx)("div",{className:"flex items-center p-4 border rounded bg-gray-50 col-start-1 justify-self-center",style:{minHeight:"15rem"},children:(null===s||void 0===s?void 0:s.challengeResults)&&(0,gt.jsxs)("pre",{className:"text-lg text-left font-semibold",children:["\u3010".concat(n," \u7d50\u679c\u3011\n"),"\u9054\u6210\u8ab2\u984c\u6570\uff1a\t ".concat(s.challengeResults.totalQuestions,"\n"),("\u304b\u306a\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===n||"\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===n||"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===n)&&"\u6b63\u89e3\u6587\u5b57\u6570\uff1a\t ".concat(s.challengeResults.correctCharsCount,"\u6587\u5b57\n"),"\u6b63\u78ba\u7387\uff1a\t\t ".concat((100*s.challengeResults.accuracy).toFixed(1),"%\n"),"number"===typeof s.challengeResults.cpm&&"\u5165\u529b\u901f\u5ea6\uff1a\t ".concat(s.challengeResults.cpm," CPM\n"),"number"===typeof s.challengeResults.maxConsecutiveCorrectChars&&"\u6700\u9577\u9023\u7d9a\u6b63\u89e3\uff1a".concat(s.challengeResults.maxConsecutiveCorrectChars,"\u6587\u5b57\n"),(()=>{const e=(e=>{var t,n,r,o,a;const i=10*(null!==(t=e.correctCharsCount)&&void 0!==t?t:e.correctCount),l=Math.max(0,Math.pow(e.accuracy,2)),s=5*Math.max(0,e.cpm-50),u=100*Math.log(1+(null!==(n=e.maxConsecutiveCorrectChars)&&void 0!==n?n:0)),c=50*(null!==(r=e.totalQuestions)&&void 0!==r?r:null!==(o=e.correctCharsCount)&&void 0!==o?o:e.correctCount),d=Math.round((i+s+u+c)*l);return{score:d,rankMessage:(null!==(a=e.totalCharsTyped)&&void 0!==a?a:0)>0?((e,t)=>{const n=100*t;return e>=5e3&&n>=98?"Typing Master! \u9a5a\u7570\u7684\uff01\n\u30e9\u30f3\u30af\uff1a\u2605\u2605\u2605\u2605\u2605":e>=4e3&&n>=95?"Excellent! \u7d20\u6674\u3089\u3057\u3044\uff01\n\u30e9\u30f3\u30af\uff1a\u2605\u2605\u2605\u2605\u2606":e>=3e3&&n>=90?"Great! \u3068\u3066\u3082\u826f\u3044\u8abf\u5b50\uff01\n\u30e9\u30f3\u30af\uff1a\u2605\u2605\u2605\u2606\u2606":e>=2e3&&n>=85?"Good! \u826f\u3044\u3067\u3059\u306d\uff01\n\u30e9\u30f3\u30af\uff1a\u2605\u2605\u2606\u2606\u2606":e>=1e3?"Nice! \u305d\u306e\u8abf\u5b50\uff01\n\u30e9\u30f3\u30af\uff1a\u2605\u2606\u2606\u2606\u2606":"Keep Trying! \u7df4\u7fd2\u3042\u308b\u306e\u307f\uff01"})(d,e.accuracy):""}})(s.challengeResults);return"\u7dcf\u5408\u30b9\u30b3\u30a2\uff1a\t ".concat(e.score,"\u70b9\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n").concat(e.rankMessage)})()]})}):(!Fu(n)||p)&&(0,gt.jsx)(gt.Fragment,{children:1===c.length?d[c[0]]&&(0,gt.jsx)(Mu,{layerData:d[c[0]],layoutIndex:c[0],className:"col-start-1 justify-self-center w-full",layoutTitle:null!==(t=j[c[0]])&&void 0!==t?t:"\u30ec\u30a4\u30e4\u30fc ".concat(c[0]),cols:h,fixedWidth:f,showKeyLabels:p,lastInvalidKeyCode:g,lastInvalidLayerIndex:y,activePractice:s,practice:n,currentFunctionKeyMap:m,training:v,isInvalidInputTarget:b},c[0]):2===c.length?c.map(((e,t)=>{var r;const o=0===t?"col-start-1 justify-self-center":"col-start-2 justify-self-center";return d[e]?(0,gt.jsx)(Mu,{layerData:d[e],layoutIndex:e,className:o,layoutTitle:null!==(r=j[e])&&void 0!==r?r:"\u30ec\u30a4\u30e4\u30fc ".concat(e),cols:h,fixedWidth:f,showKeyLabels:p,lastInvalidKeyCode:g,lastInvalidLayerIndex:y,activePractice:s,practice:n,currentFunctionKeyMap:m,training:v,isInvalidInputTarget:b},e):(0,gt.jsxs)("div",{className:o,children:["\u30ec\u30a4\u30e4\u30fc ",e," \u306e\u30c7\u30fc\u30bf\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3002"]},e)})):c.length>0&&(0,gt.jsx)("div",{className:"col-span-2",children:"\u8868\u793a\u3059\u308b\u30ad\u30fc\u30ec\u30a4\u30a2\u30a6\u30c8\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"})})]})]}):(0,gt.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-start",children:[(0,gt.jsx)(wt,{practice:n,isAlphaNumericMode:C,handlePracticeSelect:r,isKanaStepUpOpen:k,setIsKanaStepUpOpen:S,isAlphaNumericSymbolStepUpOpen:w,setIsAlphaNumericSymbolStepUpOpen:_}),(0,gt.jsx)("div",{className:"col-span-2"})]})})},Du=e=>{let{layers:t,title:n,cols:r,fixedWidth:o,fw:a,sn:i,training:l}=e;return(0,gt.jsxs)(gt.Fragment,{children:[(0,gt.jsx)("h1",{className:"text-lg font-semibold mb-4",children:n}),(a||i)&&(0,gt.jsxs)("div",{className:"mb-4 text-sm text-gray-700 space-y-1",children:[(0,gt.jsxs)("p",{children:["FW: ",null!==a&&void 0!==a?a:"\u4e0d\u660e"]}),(0,gt.jsxs)("p",{children:["SN: ",null!==i&&void 0!==i?i:"\u4e0d\u660e"]})]}),(0,gt.jsx)("div",{className:"grid ".concat(t.length>1?"grid-cols-2":"grid-cols-1"," gap-4"),children:t.map(((e,t)=>{var n;return(0,gt.jsx)("div",{className:"justify-self-center w-full",children:(0,gt.jsx)(Mu,{layerData:e,layoutIndex:t,layoutTitle:null!==(n=j[t])&&void 0!==n?n:"\u30ec\u30a4\u30e4\u30fc ".concat(t),cols:r,fixedWidth:o,showKeyLabels:!0,lastInvalidKeyCode:null,lastInvalidLayerIndex:null,activePractice:null,practice:"",currentFunctionKeyMap:{},training:l,isInvalidInputTarget:(e,t,n)=>!1})},t)}))})]})},Ou=e=>{let{training:t,showTrainingButton:n,isRandomMode:r,isRandomModeAvailable:o,practice:a,onToggleTraining:i,onToggleKeyLabels:l,actualShowKeyLabelsState:s,onToggleRandomMode:u,onStartAlphaNumericPractice:c,buttonStyle:d}=e;return n?(0,gt.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col space-y-2 items-end z-50",children:[(0,gt.jsx)("button",{className:"px-4 py-1 rounded shadow text-white ".concat(t?"bg-gray-600":"bg-green-600"),onClick:i,style:d,children:t?"\u30ec\u30a4\u30a2\u30a6\u30c8\u8868\u793a\u306b\u623b\u308b":"\u304b\u306a\u7df4\u7fd2\u3092\u59cb\u3081\u308b"}),!t&&(0,gt.jsx)("button",{className:"px-4 py-1 rounded shadow text-white bg-blue-500 hover:bg-blue-600",onClick:c,style:d,children:"\u82f1\u6570\u7df4\u7fd2\u3092\u59cb\u3081\u308b"}),t&&(0,gt.jsxs)(gt.Fragment,{children:[(0,gt.jsx)("button",{className:"px-4 py-1 rounded shadow text-white bg-blue-600 hover:bg-blue-700",onClick:l,style:d,children:s?"\u30ad\u30fc\u8868\u793a OFF":"\u30ad\u30fc\u8868\u793a ON"}),o&&(0,gt.jsxs)("button",{className:"px-4 py-1 rounded shadow text-white bg-purple-600 hover:bg-purple-700",onClick:u,style:d,children:["\u30e9\u30f3\u30c0\u30e0 ",r?"OFF":"ON"]})]})]}):null},ju=e=>"\u304b\u306a\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===e||"\u8a18\u53f7\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===e||"\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===e||"\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===e||"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===e;function Hu(){const{layers:e,title:t,cols:n,kb:o,side:a,fw:i,sn:l,showTrainingButton:s}=(()=>{const[e,t]=(0,r.useState)([]),[n,o]=(0,r.useState)("\u30ec\u30a4\u30a2\u30a6\u30c8\u8aad\u307f\u8fbc\u307f\u4e2d..."),[a,i]=(0,r.useState)(5),[l,s]=(0,r.useState)("tw-20v"),[u,c]=(0,r.useState)("right"),[d,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(null),[g,y]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{var e,n;const r=new URLSearchParams(window.location.search),a=null!==(e=r.get("kb"))&&void 0!==e?e:"tw-20v",l=null!==(n=r.get("side"))&&void 0!==n?n:"right",u="tw-20h"===a?"tw-20h":"tw-20v";s(u);const d="left"===l?"left":"right";c(d);const f=r.get("version"),g=r.get("serial"),m=u,v=d;if(O[m]&&O[m][v]){const e=O[m][v];t(e.layers),o("".concat(u.toUpperCase()," \u30ec\u30a4\u30a2\u30a6\u30c8 (").concat(d,")")),i("tw-20v"===u?4:5),console.log("[useKeyboardInitializer] Initialized values (data found):",{layers:e.layers,title:"".concat(u.toUpperCase()," \u30ec\u30a4\u30a2\u30a6\u30c8 (").concat(d,")"),cols:"tw-20v"===u?4:5,kb:u,side:d,fw:f,sn:g,showTrainingButton:!(!f&&!g)})}else console.error("\u30ad\u30fc\u30de\u30c3\u30d7\u30c7\u30fc\u30bf\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093: ".concat(u,", ").concat(d)),t([]),o("\u30ec\u30a4\u30a2\u30a6\u30c8\u4e0d\u660e"),i(5),console.log("[useKeyboardInitializer] Initialized values (data NOT found):",{layers:[],title:"\u30ec\u30a4\u30a2\u30a6\u30c8\u4e0d\u660e",cols:5,kb:u,side:d,fw:f,sn:g,showTrainingButton:!(!f&&!g)});h(f),p(g),y(!(!f&&!g))}),[]),{layers:e,title:n,cols:a,kb:l,side:u,fw:d,sn:f,showTrainingButton:g}})(),[u,c]=(0,r.useState)(!0),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[g,y]=(0,r.useState)(0),{practice:m,gIdx:v,dIdx:b,isRandomMode:x,activePractice:C,headingChars:k,isChallengeFinished:S,handlePracticeSelect:w,toggleRandomMode:_,setPractice:I,setGIdx:T,setDIdx:E,setIsRandomMode:N,nextStage:P,isRandomModeAvailable:A,showChallengeKeys:L,toggleShowChallengeKeys:K}=pt({side:a,layers:e,kb:o,isAlphaNumericMode:f}),M=(null===C||void 0===C||C.targetChar,null===C||void 0===C||C.status,void 0),[F,R]=(0,r.useState)(null),[D,j]=(0,r.useState)(null),H=(0,r.useRef)(null),V=(0,r.useRef)(new Map),U=(0,r.useRef)(0),[G,z]=(0,r.useState)(!1),[W,Y]=(0,r.useState)(!1),$=(0,r.useRef)(d),q=(0,r.useRef)(m),Q=(0,r.useRef)(C),X=(0,r.useRef)(v),Z=(0,r.useRef)(!1),J=(0,r.useRef)(b),ee=null===C||void 0===C?void 0:C.targetLayerIndices,te=null===C||void 0===C?void 0:C.targetLayerIndex,ne=(0,r.useMemo)((()=>{let t;if(console.log("[App.tsx DEBUG displayLayerIndices CALC START] training: ".concat(d,', practice: "').concat(m,'", activePractice exists: ').concat(!!C,", isAlphaNumericMode: ").concat(f)),console.log("  [App.tsx DEBUG displayLayerIndices CALC] Deps: activePracticeTargetLayerIndices: ".concat(JSON.stringify(ee),", activePracticeTargetLayerIndex: ").concat(te)),d)ee&&ee.length>0?t=ee:"number"!==typeof te||ee&&0!==ee.length?"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff11"===m?t=[6]:"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff12"===m?t=[7]:"\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff13"===m?t=[8]:"\u5c0f\u6587\u5b57\u306e\u57fa\u672c\u7df4\u7fd2"===m||"\u6e05\u97f3\u306e\u57fa\u672c\u7df4\u7fd2"===m?t=[2,3]:"\u6570\u5b57\u306e\u57fa\u672c\u7df4\u7fd2"===m?t=[0]:"\u304b\u306a\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===m?t=[2,3]:"\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===m?t=ju(m)&&L?[2,3]:[]:"\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"===m?(console.log('[App.tsx DEBUG displayLayerIndices] Specific rule for "\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0".'),ee&&ee.length>0?(console.log('  [App.tsx DEBUG displayLayerIndices] "\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0" - Using activePractice.targetLayerIndices:',ee),t=ee):"number"===typeof te?(console.log('  [App.tsx DEBUG displayLayerIndices] "\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0" - Using activePractice.targetLayerIndex: ['.concat(te,"]")),t=[te]):(console.log('  [App.tsx DEBUG displayLayerIndices] "\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0" - Fallback to [4, 5] because no layer info from activePractice.'),t=[4,5])):t=f?[0,1]:[2,3]:t=[te];else{t=e.length>1?[0,1]:[0]}return console.log("[App.tsx DEBUG displayLayerIndices CALC END] Result:",t),t}),[d,m,ee,te,e,f,C,L]),re=(0,r.useCallback)(((e,t)=>{const n=Date.now(),r=e;n-U.current<50||(U.current=n,console.log("[App.tsx handleInvalidInput] Invalid input. pressCode: ".concat(e," (0-based), layerIndex: ").concat(t)),R(e+1),j(t),null!==H.current&&clearTimeout(H.current),H.current=setTimeout((()=>{R((e=>e===r+1?(j(null),null):e));const e=Q.current;e&&"function"===typeof e.clearErrorState&&e.clearErrorState(),H.current=null}),500))}),[]),oe=(0,r.useCallback)((e=>{var t;const n=new Uint8Array(e.data.buffer),r=n[0],o=n[1];console.log("[App.tsx handleHidInputReport START] Raw HID Data: reportId=".concat(r,", keyCode=0x").concat(o.toString(16)," (").concat(o,")"));const a=Date.now();if(20!==r||3!==o)if(21===r&&$.current&&q.current&&null!==(t=Q.current)&&void 0!==t&&t.handleInput){console.log("[App.tsx handleHidInputReport] Processing reportId 0x15 for training.");const e=20,t=o<=20,n=o>=e+1;if(console.log("[App.tsx handleHidInputReport] Event Type Check: keyCode=0x".concat(o.toString(16),", isPressEventAdjusted=").concat(t,", isReleaseEventAdjusted=").concat(n)),t){var i;console.log("[App.tsx handleHidInputReport] Event identified as PRESS.");const e=o,t=e-1;if(console.log("[App.tsx handleHidInputReport] PRESS event. oneBasedPressCode: ".concat(e,", zeroBasedPressCode: ").concat(t,", timestamp: ").concat(a)),t<0)return void console.log("[App.tsx handleHidInputReport] Invalid zeroBasedPressCode (<0) for PRESS event. Ignoring.");let n;V.current.set(e,a);const r=null===(i=Q.current)||void 0===i?void 0:i.targetLayerIndex;var l;if("number"===typeof r)n=r;else n=null!==(l=ne[0])&&void 0!==l?l:0;console.log("[App.tsx handleHidInputReport PRESS] Determined layerForInputInfo: ".concat(n,". practiceHookTargetLayer: ").concat(r,", displayLayerIndices[0]: ").concat(ne[0]));const s={type:"press",timestamp:a,pressCode:t,layerIndex:n};Q.current&&"function"===typeof Q.current.handleInput&&Q.current.handleInput(s)}else if(n){console.log("[App.tsx handleHidInputReport] Event identified as RELEASE.");const t=o-e;if(t<=0)return;if(V.current.get(t)){var s,u;V.current.delete(t),console.log("[App.tsx handleHidInputReport] RELEASE event detected. Raw pressCode from device (after offset): ".concat(t,", Timestamp: ").concat(a));const e=t-1;if(e<0)return void console.log("[App.tsx handleHidInputReport] Invalid zeroBasedPressCode (<0). Ignoring.");let n;const r=null===(s=Q.current)||void 0===s?void 0:s.targetLayerIndex;var c;if("number"===typeof r)n=r;else n=null!==(c=ne[0])&&void 0!==c?c:0;console.log("[App.tsx handleHidInputReport RELEASE] Determined layerForInputInfo: ".concat(n,". practiceHookTargetLayer: ").concat(r,", displayLayerIndices[0]: ").concat(ne[0]));const o={type:"release",timestamp:a,pressCode:e,layerIndex:n};if(console.log("[App.tsx handleHidInputReport] PREPARING TO CALL activePractice.handleInput for RELEASE. inputInfo:",JSON.stringify(o)),!Q.current||"function"!==typeof Q.current.handleInput)return void console.warn("[App.tsx handleHidInputReport] activePractice.current.handleInput is not available for RELEASE.");const i=Q.current.handleInput(o);console.log("[App.tsx HID_INPUT_RESULT for ".concat(q.current,"] isExpected: ").concat(null===i||void 0===i?void 0:i.isExpected,", shouldGoToNext: ").concat(null===i||void 0===i?void 0:i.shouldGoToNext,", dIdx (hook internal, if available): ").concat(null===(u=Q.current)||void 0===u?void 0:u.dIdx,", App's dIdx: ").concat(J.current,", App's gIdx: ").concat(X.current));let l=!1;if(i){if(!0===i.shouldGoToNext){if(R(null),j(null),null!==H.current&&(clearTimeout(H.current),H.current=null),"\u6570\u5b57\u306e\u57fa\u672c\u7df4\u7fd2"!==q.current||x)console.log("[App.tsx HID_INPUT_ADVANCE for ".concat(q.current,"] shouldGoToNext is TRUE. Calling nextStage.")),P(q.current);else{var d;console.log("[App.tsx HID_INPUT_ADVANCE for ".concat(q.current,"] Special handling for \u6570\u5b57\u306e\u57fa\u672c\u7df4\u7fd2 (Normal Mode). Looping dIdx."));const e=null===(d=Q.current)||void 0===d?void 0:d.headingChars;e&&e.length>0?E((t=>(t+1)%e.length)):(console.warn("[App.tsx HID_INPUT_ADVANCE for ".concat(q.current,"] headingChars not found, falling back to nextStage.")),P(q.current))}Z.current=!0,l=!0}else if(!1===i.shouldGoToNext)if(i.isExpected){console.log("[App.tsx HID_INPUT_STAY/ADVANCE_DIDX for ".concat(q.current,"] shouldGoToNext is FALSE, isExpected is TRUE.")),R(null),j(null),null!==H.current&&(clearTimeout(H.current),H.current=null);["\u82f1\u5b57\u306e\u57fa\u672c\u7df4\u7fd2","\u6570\u5b57\u306e\u57fa\u672c\u7df4\u7fd2","Caps Lock\u64cd\u4f5c","\u5927\u6587\u5b57\u5909\u63db\u64cd\u4f5c","\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff11","\u82f1\u5b57\u8a18\u53f7\u306e\u7df4\u7fd2\uff12","\u62d7\u534a\u6fc1\u97f3\u306e\u7df4\u7fd2","\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff11","\u8a18\u53f7\u306e\u57fa\u672c\u7df4\u7fd2\uff12","\u304b\u306a\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u8a18\u53f7\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u82f1\u5b57\u5165\u529b\uff11\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0","\u82f1\u6570\u77ed\u6587\u5165\u529b\uff13\u5206\u9593\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0"].includes(q.current)?(console.log('  [App.tsx] Practice "'.concat(q.current,'" is in practicesNotAdvancingDIdxOnFalse. Not advancing dIdx.')),Z.current=!1):(console.log('  [App.tsx] Practice "'.concat(q.current,'" NOT in practicesNotAdvancingDIdxOnFalse. Advancing dIdx.')),Z.current=!0,l=!0,E((e=>e+1)))}else{if(console.log("[App.tsx HID_INPUT_UNEXPECTED for ".concat(q.current,"] shouldGoToNext is FALSE, isExpected is FALSE.")),"Caps Lock\u64cd\u4f5c"!==q.current||4!==o.layerIndex||1!==o.pressCode){var h,f,p,g;let t=null!==(h=null!==(f=null!==(p=i.errorExpectedLayer)&&void 0!==p?p:i.errorLayer)&&void 0!==f?f:null===(g=Q.current)||void 0===g?void 0:g.targetLayerIndex)&&void 0!==h?h:2;re(e,t)}Z.current=!1}else if(void 0===i.shouldGoToNext)if(i.isExpected)console.log("[App.tsx HID_INPUT_SELF_MANAGE/NO_ADVANCE for ".concat(q.current,"] shouldGoToNext is UNDEFINED, isExpected is TRUE.")),R(null),j(null),null!==H.current&&(clearTimeout(H.current),H.current=null),Z.current=!1;else{if(console.log("[App.tsx HID_INPUT_UNEXPECTED for ".concat(q.current,"] shouldGoToNext is UNDEFINED, isExpected is FALSE.")),"Caps Lock\u64cd\u4f5c"!==q.current||4!==o.layerIndex||1!==o.pressCode){var y,m,v,b;let t=null!==(y=null!==(m=null!==(v=i.errorExpectedLayer)&&void 0!==v?v:i.errorLayer)&&void 0!==m?m:null===(b=Q.current)||void 0===b?void 0:b.targetLayerIndex)&&void 0!==y?y:2;re(e,t)}Z.current=!1}else if(!i.isExpected){if(console.log("[App.tsx HID_INPUT_ERROR (fallback) for ".concat(q.current,"] isExpected is FALSE.")),"Caps Lock\u64cd\u4f5c"!==q.current||4!==o.layerIndex||1!==o.pressCode){var C,k,S,w;let t=null!==(C=null!==(k=null!==(S=i.errorExpectedLayer)&&void 0!==S?S:i.errorLayer)&&void 0!==k?k:null===(w=Q.current)||void 0===w?void 0:w.targetLayerIndex)&&void 0!==C?C:2;re(e,t)}Z.current=!1}l&&setTimeout((()=>{Z.current=!1}),0)}else console.warn("[App.tsx handleHidInputReport] Input result was falsy or activePractice is missing. No action taken."),Z.current=!1}else console.log("[App.tsx handleHidInputReport] No pressTimestamp found for pressCode: ".concat(t,". Ignoring release event.")),Z.current=!1}else console.log("[App.tsx handleHidInputReport] Unhandled keyCode: 0x".concat(o.toString(16)," for reportId 0x15.")),Z.current=!1}else 21===r&&console.log("[App.tsx handleHidInputReport] ReportId 0x15 received, but not in training or practice or activePractice.handleInput is missing."),Z.current=!1;else console.log("[App.tsx handleHidInputReport] Ignoring keep-alive report (0x14, 0x03).")}),[re,P,E,ne]),{device:ae,isConnected:ie,requestDevice:le,sendReport:se,error:ue}=(e=>{let{onInputReport:t,autoConnect:n=!0}=e;const[o,a]=(0,r.useState)(null),[i,l]=(0,r.useState)(!1),[s,u]=(0,r.useState)(null),c=(0,r.useRef)(!1),d=(0,r.useRef)(t);(0,r.useEffect)((()=>{d.current=t,console.log("[useHidDevice] onInputReport callback updated in ref.")}),[t]);const h=(0,r.useCallback)((e=>{console.log("[useHidDevice] RAW INPUT REPORT EVENT FIRED (handleInputReportEvent):",e),d.current?d.current(e):console.warn("[useHidDevice] onInputReportRef.current is null in handleInputReportEvent, not calling.")}),[]),f=(0,r.useCallback)((async e=>{if(c.current)return console.log("[useHidDevice] openAndSetupDevice: Another open operation in progress. Skipping for ".concat(e.productName,".")),!1;if(e.opened)return console.log("[useHidDevice] openAndSetupDevice: Device ".concat(e.productName," is already open. Setting up listener if not already set.")),e.oninputreport!==h&&(e.oninputreport=h,console.log("[useHidDevice] inputreport listener (re)assigned to already open device: ".concat(e.productName))),a(e),l(!0),!0;c.current=!0,u(null),console.log("[useHidDevice] Attempting to open device: ".concat(e.productName));try{return await e.open(),e.oninputreport=h,console.log("[useHidDevice] inputreport event listener (oninputreport) assigned."),a(e),l(!0),console.log("[useHidDevice] Device opened successfully and listener set:",e.productName),!0}catch(t){return console.error("[useHidDevice] Failed to open HID device:",t),u(t instanceof Error?t.message:String(t)),l(!1),a(null),!1}finally{c.current=!1}}),[h]),p=(0,r.useCallback)((async()=>{if(!navigator.hid)return u("WebHID is not supported by this browser."),console.error("[useHidDevice] WebHID not supported."),null;const e=[{usagePage:65376,usage:97}];u(null),console.log("[useHidDevice] Requesting HID device...");try{const t=await navigator.hid.requestDevice({filters:e});if(!t||!t.length)return console.log("[useHidDevice] No device selected or found."),null;const n=t[0];return console.log("[useHidDevice] Device selected: ".concat(n.productName)),await f(n)?n:null}catch(t){return console.error("[useHidDevice] Failed to request HID device:",t),u(t instanceof Error?t.message:String(t)),null}}),[f]);(0,r.useEffect)((()=>{let e=!0;return(async()=>{if(n&&!o&&navigator.hid&&e){console.log("[useHidDevice] Attempting auto-connect...");try{const t=await navigator.hid.getDevices();e&&t&&t.length>0?(console.log("[useHidDevice] Found ".concat(t.length," previously permitted device(s). Trying to open the first one: ").concat(t[0].productName)),await f(t[0])):e&&console.log("[useHidDevice] No previously permitted devices found for auto-connect.")}catch(t){e&&console.error("[useHidDevice] Error during auto-connect:",t)}}})(),()=>{e=!1}}),[n,o,f,h]),(0,r.useEffect)((()=>{const e=o;return()=>{e&&e.opened&&(console.log("[useHidDevice] Cleanup: Closing device ".concat(e.productName)),e.oninputreport=null,e.close().catch((e=>console.error("[useHidDevice] Error closing device on cleanup:",e))))}}),[o]);const g=(0,r.useCallback)((async(e,t)=>{if(!o||!o.opened){const e="[useHidDevice] Cannot send report: device not connected or not open.";return console.error(e),void u(e)}try{await o.sendReport(e,t)}catch(n){console.error("[useHidDevice] Failed to send HID report:",n),u(n instanceof Error?n.message:String(n))}}),[o]);return{device:o,isConnected:i,requestDevice:p,sendReport:g,error:s}})({onInputReport:oe,autoConnect:!0});(0,r.useEffect)((()=>{ue&&console.error("[App.tsx useEffect isHidConnected] HID Error:",ue)}),[ie,ue]);const ce=(0,r.useCallback)((async e=>{var t,n;if(!ie&&!e)return h(!1),I(""),T(0),E(0),R(null),j(null),null!==H.current&&(clearTimeout(H.current),H.current=null),f&&p(!1),V.current.clear(),null===(t=Q.current)||void 0===t||null===(n=t.reset)||void 0===n||n.call(t),c(!0),void N(!1);let r=ae;if(!r||!r.opened)try{if(r=await le(),!r)return console.error("[App.tsx sendHidReportForTraining] HID device connection failed. Cannot start training."),void(e&&h(!1))}catch(i){return console.error("[App.tsx sendHidReportForTraining] Error during HID device connection:",i),void(e&&h(!1))}try{await se(0,new Uint8Array([2,e?1:0]))}catch(l){return console.error("[App.tsx sendHidReportForTraining] HID report sending error:",l),void(e&&h(!1))}var o,a;(h(e),e)?(c(!0),N(!1),q.current):(I(""),T(0),E(0),R(null),j(null),null!==H.current&&(clearTimeout(H.current),H.current=null),V.current.clear(),f&&p(!1),null===(o=Q.current)||void 0===o||null===(a=o.reset)||void 0===a||a.call(o),c(!0),N(!1))}),[ie,ae,le,se,f,I,T,E,p,N,c,h,H,V,Q,q,R,j]);(0,r.useEffect)((()=>{$.current=d}),[d]),(0,r.useEffect)((()=>{q.current=m}),[m]),(0,r.useEffect)((()=>{console.log("[App.tsx DEBUG useEffect activePractice] activePractice changed. Exists: ".concat(!!C)),Q.current=C,C&&console.log("  [App.tsx DEBUG activePractice details] Status: ".concat(C.status,", Target: ").concat(C.targetChar,", TargetLayerIndex: ").concat(C.targetLayerIndex,", TargetLayerIndices: ").concat(JSON.stringify(C.targetLayerIndices),", DisplayLayers: ").concat(JSON.stringify(C.displayLayers),", Has getHighlightClassName: ").concat("function"===typeof C.getHighlightClassName))}),[C]),(0,r.useEffect)((()=>{X.current=v}),[v]),(0,r.useEffect)((()=>{J.current=b}),[b]),(0,r.useEffect)((()=>{}),[f]),(0,r.useEffect)((()=>{}),[u]),(0,r.useEffect)((()=>{}),[x]),(0,r.useEffect)((()=>{console.log('[App.tsx useEffect for practice change] new practice: "'.concat(m,'", current isAlphaNumericMode: ').concat(f))}),[m,f]),(0,r.useEffect)((()=>{const e=Q.current,t=q.current;Z.current||e&&t&&ju(t)&&("finished"!==e.status&&"timed_out"!==e.status||(console.log('[App.tsx useEffect for activePractice advancement] Challenge "'.concat(t,'" ended with status "').concat(e.status,'". Calling nextStage.')),P(t)))}),[C,P]);const de=(0,r.useCallback)(((e,t,n)=>t===D&&n===(null!==F?F-1:-1)),[F,D]),he="".concat(5.5*n,"rem"),fe=(0,r.useMemo)((()=>{var e,t;return null!==(e=null===(t=B[o])||void 0===t?void 0:t[a])&&void 0!==e?e:{}}),[o,a]),pe=null===C||void 0===C?void 0:C.displayLayers,ge=(0,r.useMemo)((()=>{var e,t,n;const r=null!==(e=null===(t=O[o])||void 0===t||null===(n=t[a])||void 0===n?void 0:n.layers)&&void 0!==e?e:[];return pe||r}),[m,pe,o,a]);return(0,gt.jsxs)(gt.Fragment,{children:[(0,gt.jsxs)("div",{className:"p-4 pt-20",children:[" ",d&&(console.log('[App.tsx DEBUG RENDER PracticeView] practice: "'.concat(m,'", training: ').concat(d,", isAlphaNumericMode: ").concat(f)),console.log("  [App.tsx DEBUG RENDER PracticeView] displayLayerIndices: ".concat(JSON.stringify(ne))),console.log("  [App.tsx DEBUG RENDER PracticeView] keyboardLayers length: ".concat(null===ge||void 0===ge?void 0:ge.length)),console.log("  [App.tsx DEBUG RENDER PracticeView] activePractice exists: ".concat(!!C)),C&&(console.log("    [App.tsx DEBUG RENDER PracticeView] activePractice.headingChars (passed to PracticeView):",C.headingChars),console.log("    [App.tsx DEBUG RENDER PracticeView] activePractice.status: ".concat(C.status,", activePractice.targetChar: ").concat(C.targetChar,", has getHighlightClassName: ").concat("function"===typeof C.getHighlightClassName))),console.log("  [App.tsx DEBUG RENDER PracticeView] lastInvalidKeyCode: ".concat(F,", lastInvalidLayerIndex: ").concat(D)),null),(0,gt.jsx)(Ou,{training:d,showTrainingButton:s,isRandomMode:x,isRandomModeAvailable:A,practice:m,onToggleTraining:()=>{d&&f&&p(!1);const e=!d;ce(e),e&&p(!1)},onStartAlphaNumericPractice:()=>{d?p(!0):ce(!0).then((()=>{p(!0)})).catch((e=>{console.error("Failed to start training for alphanumeric practice:",e)}))},onToggleKeyLabels:ju(m)?K:()=>c((e=>!e)),actualShowKeyLabelsState:ju(m)?L:u,onToggleRandomMode:()=>{_()},buttonStyle:{marginBottom:"0.5rem",padding:"5px 10px",display:"block",minWidth:"120px",textAlign:"center"}},"global-controls-".concat(m)),d?(0,gt.jsxs)(gt.Fragment,{children:["                ",f?(0,gt.jsx)(Ru,{practice:m,handlePracticeSelect:w,gIdx:v,dIdx:b,headingChars:k,isChallengeFinished:S,activePractice:C,isRandomMode:!!ju(m)||x,displayLayerIndices:ne,keyboardLayers:ge,cols:n,fixedWidth:he,showKeyLabels:ju(m)?L:u,lastInvalidKeyCode:F,lastInvalidLayerIndex:D,currentFunctionKeyMap:fe,training:d,typedChar:M,isAlphaNumericMode:!0,isInvalidInputTarget:de,isKanaStepUpOpen:G,setIsKanaStepUpOpen:z,isAlphaNumericSymbolStepUpOpen:W,setIsAlphaNumericSymbolStepUpOpen:Y},"practice-view-alpha-".concat(m,"-").concat(f,"-").concat(L)):(0,gt.jsx)(Ru,{practice:m,handlePracticeSelect:w,gIdx:v,dIdx:b,headingChars:k,isChallengeFinished:S,activePractice:C,isRandomMode:!!ju(m)||x,displayLayerIndices:ne,keyboardLayers:ge,cols:n,fixedWidth:he,showKeyLabels:ju(m)?L:u,lastInvalidKeyCode:F,lastInvalidLayerIndex:D,currentFunctionKeyMap:fe,training:d,typedChar:M,isAlphaNumericMode:!1,isInvalidInputTarget:de,isKanaStepUpOpen:G,setIsKanaStepUpOpen:z,isAlphaNumericSymbolStepUpOpen:W,setIsAlphaNumericSymbolStepUpOpen:Y},"practice-view-kana-".concat(m,"-").concat(f,"-").concat(L))]}):(0,gt.jsx)(gt.Fragment,{children:(0,gt.jsx)(Du,{layers:e,title:t,cols:n,fixedWidth:he,fw:i,sn:l,training:d})})]})," "]})}var Vu,Bu,Uu,Gu,zu=-1,Wu=function(e){addEventListener("pageshow",(function(t){t.persisted&&(zu=t.timeStamp,e(t))}),!0)},Yu=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},$u=function(){var e=Yu();return e&&e.activationStart||0},qu=function(e,t){var n=Yu(),r="navigate";return zu>=0?r="back-forward-cache":n&&(document.prerendering||$u()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Qu=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},Xu=function(e,t,n,r){var o,a;return function(i){t.value>=0&&(i||r)&&((a=t.value-(o||0))||void 0===o)&&(o=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Zu=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Ju=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},ec=function(e){var t=!1;return function(){t||(e(),t=!0)}},tc=-1,nc=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},rc=function(e){"hidden"===document.visibilityState&&tc>-1&&(tc="visibilitychange"===e.type?e.timeStamp:0,ac())},oc=function(){addEventListener("visibilitychange",rc,!0),addEventListener("prerenderingchange",rc,!0)},ac=function(){removeEventListener("visibilitychange",rc,!0),removeEventListener("prerenderingchange",rc,!0)},ic=function(){return tc<0&&(tc=nc(),oc(),Wu((function(){setTimeout((function(){tc=nc(),oc()}),0)}))),{get firstHiddenTime(){return tc}}},lc=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},sc=[1800,3e3],uc=function(e,t){t=t||{},lc((function(){var n,r=ic(),o=qu("FCP"),a=Qu("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<r.firstHiddenTime&&(o.value=Math.max(e.startTime-$u(),0),o.entries.push(e),n(!0)))}))}));a&&(n=Xu(e,o,sc,t.reportAllChanges),Wu((function(r){o=qu("FCP"),n=Xu(e,o,sc,t.reportAllChanges),Zu((function(){o.value=performance.now()-r.timeStamp,n(!0)}))})))}))},cc=[.1,.25],dc=(new Map,function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=ec(e),"hidden"===document.visibilityState?e():(n=t(e),Ju(e)),n}),hc=[2500,4e3],fc={},pc=[800,1800],gc=function e(t){document.prerendering?lc((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},yc=function(e,t){t=t||{};var n=qu("TTFB"),r=Xu(e,n,pc,t.reportAllChanges);gc((function(){var o=Yu();o&&(n.value=Math.max(o.responseStart-$u(),0),n.entries=[o],r(!0),Wu((function(){n=qu("TTFB",0),(r=Xu(e,n,pc,t.reportAllChanges))(!0)})))}))},mc={passive:!0,capture:!0},vc=new Date,bc=function(e,t){Vu||(Vu=t,Bu=e,Uu=new Date,kc(removeEventListener),xc())},xc=function(){if(Bu>=0&&Bu<Uu-vc){var e={entryType:"first-input",name:Vu.type,target:Vu.target,cancelable:Vu.cancelable,startTime:Vu.timeStamp,processingStart:Vu.timeStamp+Bu};Gu.forEach((function(t){t(e)})),Gu=[]}},Cc=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){bc(e,t),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,mc),removeEventListener("pointercancel",r,mc)};addEventListener("pointerup",n,mc),addEventListener("pointercancel",r,mc)}(t,e):bc(t,e)}},kc=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,Cc,mc)}))},Sc=[100,300];const wc=e=>{e&&e instanceof Function&&(!function(e,t){t=t||{},uc(ec((function(){var n,r=qu("CLS",0),o=0,a=[],i=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=a[0],n=a[a.length-1];o&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,a.push(e)):(o=e.value,a=[e])}})),o>r.value&&(r.value=o,r.entries=a,n())},l=Qu("layout-shift",i);l&&(n=Xu(e,r,cc,t.reportAllChanges),Ju((function(){i(l.takeRecords()),n(!0)})),Wu((function(){o=0,r=qu("CLS",0),n=Xu(e,r,cc,t.reportAllChanges),Zu((function(){return n()}))})),setTimeout(n,0))})))}(e),function(e,t){t=t||{},lc((function(){var n,r=ic(),o=qu("FID"),a=function(e){e.startTime<r.firstHiddenTime&&(o.value=e.processingStart-e.startTime,o.entries.push(e),n(!0))},i=function(e){e.forEach(a)},l=Qu("first-input",i);n=Xu(e,o,Sc,t.reportAllChanges),l&&(Ju(ec((function(){i(l.takeRecords()),l.disconnect()}))),Wu((function(){var r;o=qu("FID"),n=Xu(e,o,Sc,t.reportAllChanges),Gu=[],Bu=-1,Vu=null,kc(addEventListener),r=a,Gu.push(r),xc()})))}))}(e),uc(e),function(e,t){t=t||{},lc((function(){var n,r=ic(),o=qu("LCP"),a=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<r.firstHiddenTime&&(o.value=Math.max(e.startTime-$u(),0),o.entries=[e],n())}))},i=Qu("largest-contentful-paint",a);if(i){n=Xu(e,o,hc,t.reportAllChanges);var l=ec((function(){fc[o.id]||(a(i.takeRecords()),i.disconnect(),fc[o.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return dc(l)}),{once:!0,capture:!0})})),Ju(l),Wu((function(r){o=qu("LCP"),n=Xu(e,o,hc,t.reportAllChanges),Zu((function(){o.value=performance.now()-r.timeStamp,fc[o.id]=!0,n(!0)}))}))}}))}(e),yc(e))};o.createRoot(document.getElementById("root")).render((0,gt.jsx)(Hu,{})),wc()})();
//# sourceMappingURL=main.cb3f0b4d.js.map